!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).serverWorkflowSdk={})}(this,(function(e){"use strict";var t=function(e){this.message=e};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r={exports:{}},i={},o={},s={},a={},c={},d={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function i(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)a(n,t[i]),n.push(e[++i]);return new r(n)}e._Code=r,e.nil=new r(""),e._=i;const o=new r("+");function s(e,...t){const n=[d(e[0])];let i=0;for(;i<t.length;)n.push(o),a(n,t[i]),n.push(o,d(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function a(e,t){var i;t instanceof r?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(i=t)||"boolean"==typeof i||null===i?i:d(Array.isArray(i)?i.join(","):i))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=s,e.addCodeArg=a,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:s`${e}${t}`},e.stringify=function(e){return new r(d(e))},e.safeStringify=d,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(`.${t}`):i`[${t}]`},e.regexpCode=function(e){return new r(e.toString())}}(d);var u={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=d;class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=i;class o extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:n,itemIndex:r}){this.value=e,this.scopePath=t._`.${new t.Name(n)}[${r}]`}}e.ValueScopeName=o;const s=t._`\n`;e.ValueScope=class extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?s:t.nil}}get(){return this._scope}name(e){return new o(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:i}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[i];if(s){const e=s.get(o);if(e)return e}else s=this._values[i]=new Map;s.set(o,r);const a=this._scope[i]||(this._scope[i]=[]),c=a.length;return a[c]=t.ref,r.setValue(t,{property:i,itemIndex:c}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,n=this._values){return this._reduceValues(n,(n=>{if(void 0===n.scopePath)throw new Error(`CodeGen: name "${n}" has no value`);return t._`${e}${n.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(i,o,s={},a){let c=t.nil;for(const d in i){const u=i[d];if(!u)continue;const l=s[d]=s[d]||new Map;u.forEach((i=>{if(l.has(i))return;l.set(i,r.Started);let s=o(i);if(s){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;c=t._`${c}${n} ${i} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(i)))throw new n(i);c=t._`${c}${s}${this.opts._n}`}l.set(i,r.Completed)}))}return c}}}(u),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=d,n=u;var r=d;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=u;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(e,t){return this}}class s extends o{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const r=e?n.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,n),this}get names(){return P(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class c extends a{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class l extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class f extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends o{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class h extends o{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class m extends o{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const i=n[r];i.optimizeNames(e,t)||(T(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>O(e,t.names)),{})}}class y extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class g extends y{}g.kind="else";class w extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof w?t:t.nodes:this.nodes.length?this:new w(A(e),t instanceof w?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){const e=super.names;return P(e,this.condition),this.else&&O(e,this.else.names),e}}w.kind="if";class b extends y{}b.kind="for";class $ extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return O(super.names,this.iteration.names)}}class k extends b{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?n.varKinds.var:this.varKind,{name:r,from:i,to:o}=this;return`for(${t} ${r}=${i}; ${r}<${o}; ${r}++)`+super.render(e)}get names(){const e=P(super.names,this.from);return P(e,this.to)}}class _ extends b{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return O(super.names,this.iterable.names)}}class j extends y{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}j.kind="func";class S extends m{render(e){return"return "+super.render(e)}}S.kind="return";class E extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&O(e,this.catch.names),this.finally&&O(e,this.finally.names),e}}class x extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}x.kind="catch";class C extends y{render(e){return"finally"+super.render(e)}}C.kind="finally";function O(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function P(e,n){return n instanceof t._CodeOrName?O(e,n.names):e}function I(e,n,r){return e instanceof t.Name?o(e):(i=e)instanceof t._Code&&i._items.some((e=>e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str]))?new t._Code(e._items.reduce(((e,n)=>(n instanceof t.Name&&(n=o(n)),n instanceof t._Code?e.push(...n._items):e.push(n),e)),[])):e;var i;function o(e){const t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function T(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function A(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${M(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new n.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new s(e,i,n)),i}const(e,t,r){return this._def(n.varKinds.const,e,t,r)}let(e,t,r){return this._def(n.varKinds.let,e,t,r)}var(e,t,r){return this._def(n.varKinds.var,e,t,r)}assign(e,t,n){return this._leafNode(new a(e,t,n))}add(t,n){return this._leafNode(new c(t,e.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new h(e)),this}object(...e){const n=["{"];for(const[r,i]of e)n.length>1&&n.push(","),n.push(r),(r!==i||this.opts.es5)&&(n.push(":"),t.addCodeArg(n,i));return n.push("}"),new t._Code(n)}if(e,t,n){if(this._blockNode(new w(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new w(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(w,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new $(e),t)}forRange(e,t,r,i,o=(this.opts.es5?n.varKinds.var:n.varKinds.let)){const s=this._scope.toName(e);return this._for(new k(o,s,t,r),(()=>i(s)))}forOf(e,r,i,o=n.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,t._`${e}.length`,(n=>{this.var(s,t._`${e}[${n}]`),i(s)}))}return this._for(new _("of",o,s,r),(()=>i(s)))}forIn(e,r,i,o=(this.opts.es5?n.varKinds.var:n.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${r})`,i);const s=this._scope.toName(e);return this._for(new _("in",o,s,r),(()=>i(s)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new l(e))}break(e){return this._leafNode(new f(e))}return(e){const t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new E;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new x(e),t(e)}return n&&(this._currNode=r.finally=new C,this.code(n)),this._endBlockNode(x,C)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,n=t.nil,r,i){return this._blockNode(new j(e,n,r)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(j)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=A;const N=R(e.operators.AND);e.and=function(...e){return e.reduce(N)};const D=R(e.operators.OR);function R(e){return(n,r)=>n===t.nil?r:r===t.nil?n:t._`${M(n)} ${e} ${M(r)}`}function M(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(D)}}(c);var l={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=c,n=d;function r(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const i=r.RULES.keywords;for(const n in t)i[n]||h(e,`unknown keyword: "${n}"`)}function i(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function o(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function a({mergeNames:e,mergeToName:n,mergeValues:r,resultToName:i}){return(o,s,a,c)=>{const d=void 0===a?s:a instanceof t.Name?(s instanceof t.Name?e(o,s,a):n(o,s,a),a):s instanceof t.Name?(n(o,a,s),s):r(s,a);return c!==t.Name||d instanceof t.Name?d:i(o,d)}}function u(e,n){if(!0===n)return e.var("props",!0);const r=e.var("props",t._`{}`);return void 0!==n&&l(e,r,n),r}function l(e,n,r){Object.keys(r).forEach((r=>e.assign(t._`${n}${t.getProperty(r)}`,!0)))}e.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},e.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(r(e,t),!i(t,e.self.RULES.all))},e.checkUnknownRules=r,e.schemaHasRules=i,e.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},e.schemaRefOrVal=function({topSchemaRef:e,schemaPath:n},r,i,o){if(!o){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return t._`${r}`}return t._`${e}${n}${t.getProperty(i)}`},e.unescapeFragment=function(e){return s(decodeURIComponent(e))},e.escapeFragment=function(e){return encodeURIComponent(o(e))},e.escapeJsonPointer=o,e.unescapeJsonPointer=s,e.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},e.mergeEvaluated={props:a({mergeNames:(e,n,r)=>e.if(t._`${r} !== true && ${n} !== undefined`,(()=>{e.if(t._`${n} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,t._`${r} || {}`).code(t._`Object.assign(${r}, ${n})`)))})),mergeToName:(e,n,r)=>e.if(t._`${r} !== true`,(()=>{!0===n?e.assign(r,!0):(e.assign(r,t._`${r} || {}`),l(e,r,n))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:a({mergeNames:(e,n,r)=>e.if(t._`${r} !== true && ${n} !== undefined`,(()=>e.assign(r,t._`${n} === true ? true : ${r} > ${n} ? ${r} : ${n}`))),mergeToName:(e,n,r)=>e.if(t._`${r} !== true`,(()=>e.assign(r,!0===n||t._`${r} > ${n} ? ${r} : ${n}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},e.evaluatedPropsToName=u,e.setEvaluated=l;const f={};var p;function h(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}e.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:f[t.code]||(f[t.code]=new n._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p=e.Type||(e.Type={})),e.getErrorPath=function(e,n,r){if(e instanceof t.Name){const i=n===p.Num;return r?i?t._`"[" + ${e} + "]"`:t._`"['" + ${e} + "']"`:i?t._`"/" + ${e}`:t._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?t.getProperty(e).toString():"/"+o(e)},e.checkStrictMode=h}(l);var f={};Object.defineProperty(f,"__esModule",{value:!0});const p=c,h={data:new p.Name("data"),valCxt:new p.Name("valCxt"),instancePath:new p.Name("instancePath"),parentData:new p.Name("parentData"),parentDataProperty:new p.Name("parentDataProperty"),rootData:new p.Name("rootData"),dynamicAnchors:new p.Name("dynamicAnchors"),vErrors:new p.Name("vErrors"),errors:new p.Name("errors"),this:new p.Name("this"),self:new p.Name("self"),scope:new p.Name("scope"),json:new p.Name("json"),jsonPos:new p.Name("jsonPos"),jsonLen:new p.Name("jsonLen"),jsonPart:new p.Name("jsonPart")};f.default=h,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=c,n=l,r=f;function i(e,n){const i=e.const("err",n);e.if(t._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,t._`[${i}]`)),t._`${r.default.vErrors}.push(${i})`),e.code(t._`${r.default.errors}++`)}function o(e,n){const{gen:r,validateName:i,schemaEnv:o}=e;o.$async?r.throw(t._`new ${e.ValidationError}(${n})`):(r.assign(t._`${i}.errors`,n),r.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:n})=>n?t.str`"${e}" keyword must be ${n} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(n,r=e.keywordError,s,c){const{it:d}=n,{gen:u,compositeRule:l,allErrors:f}=d,p=a(n,r,s);(null!=c?c:l||f)?i(u,p):o(d,t._`[${p}]`)},e.reportExtraError=function(t,n=e.keywordError,s){const{it:c}=t,{gen:d,compositeRule:u,allErrors:l}=c;i(d,a(t,n,s)),u||l||o(c,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if(t._`${r.default.vErrors} !== null`,(()=>e.if(n,(()=>e.assign(t._`${r.default.vErrors}.length`,n)),(()=>e.assign(r.default.vErrors,null)))))},e.extendErrors=function({gen:e,keyword:n,schemaValue:i,data:o,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",s,r.default.errors,(s=>{e.const(c,t._`${r.default.vErrors}[${s}]`),e.if(t._`${c}.instancePath === undefined`,(()=>e.assign(t._`${c}.instancePath`,t.strConcat(r.default.instancePath,a.errorPath)))),e.assign(t._`${c}.schemaPath`,t.str`${a.errSchemaPath}/${n}`),a.opts.verbose&&(e.assign(t._`${c}.schema`,i),e.assign(t._`${c}.data`,o))}))};const s={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function a(e,n,i){const{createErrors:o}=e.it;return!1===o?t._`{}`:function(e,n,i={}){const{gen:o,it:a}=e,c=[d(a,i),u(e,i)];return function(e,{params:n,message:i},o){const{keyword:a,data:c,schemaValue:d,it:u}=e,{opts:l,propertyName:f,topSchemaRef:p,schemaPath:h}=u;o.push([s.keyword,a],[s.params,"function"==typeof n?n(e):n||t._`{}`]),l.messages&&o.push([s.message,"function"==typeof i?i(e):i]);l.verbose&&o.push([s.schema,d],[s.parentSchema,t._`${p}${h}`],[r.default.data,c]);f&&o.push([s.propertyName,f])}(e,n,c),o.object(...c)}(e,n,i)}function d({errorPath:e},{instancePath:i}){const o=i?t.str`${e}${n.getErrorPath(i,n.Type.Str)}`:e;return[r.default.instancePath,t.strConcat(r.default.instancePath,o)]}function u({keyword:e,it:{errSchemaPath:r}},{schemaPath:i,parentSchema:o}){let a=o?r:t.str`${r}/${e}`;return i&&(a=t.str`${a}${n.getErrorPath(i,n.Type.Str)}`),[s.schemaPath,a]}}(a),Object.defineProperty(s,"__esModule",{value:!0}),s.boolOrEmptySchema=s.topBoolOrEmptySchema=void 0;const m=a,y=c,v=f,g={message:"boolean schema is false"};function w(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};m.reportError(i,g,void 0,t)}s.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?w(e,!1):"object"==typeof n&&!0===n.$async?t.return(v.default.data):(t.assign(y._`${r}.errors`,null),t.return(!0))},s.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),w(e)):n.var(t,!0)};var b={},$={};Object.defineProperty($,"__esModule",{value:!0}),$.getRules=$.isJSONType=void 0;const k=new Set(["string","number","integer","boolean","null","object","array"]);$.isJSONType=function(e){return"string"==typeof e&&k.has(e)},$.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var _={};function j(e,t){return t.rules.some((t=>S(e,t)))}function S(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(_,"__esModule",{value:!0}),_.shouldUseRule=_.shouldUseGroup=_.schemaHasRulesForType=void 0,_.schemaHasRulesForType=function({schema:e,self:t},n){const r=t.RULES.types[n];return r&&!0!==r&&j(e,r)},_.shouldUseGroup=j,_.shouldUseRule=S,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=$,n=_,r=a,i=c,o=l;var s;function d(e){const n=Array.isArray(e)?e:e?[e]:[];if(n.every(t.isJSONType))return n;throw new Error("type must be JSONType or JSONType[]: "+n.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(s=e.DataType||(e.DataType={})),e.getSchemaTypes=function(e){const t=d(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},e.getJSONTypes=d,e.coerceAndCheckDataType=function(e,t){const{gen:r,data:o,opts:a}=e,c=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,a.coerceTypes),d=t.length>0&&!(0===c.length&&1===t.length&&n.schemaHasRulesForType(e,t[0]));if(d){const n=p(t,o,a.strictNumbers,s.Wrong);r.if(n,(()=>{c.length?function(e,t,n){const{gen:r,data:o,opts:s}=e,a=r.let("dataType",i._`typeof ${o}`),c=r.let("coerced",i._`undefined`);"array"===s.coerceTypes&&r.if(i._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,(()=>r.assign(o,i._`${o}[0]`).assign(a,i._`typeof ${o}`).if(p(t,o,s.strictNumbers),(()=>r.assign(c,o)))));r.if(i._`${c} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===s.coerceTypes)&&d(e);function d(e){switch(e){case"string":return void r.elseIf(i._`${a} == "number" || ${a} == "boolean"`).assign(c,i._`"" + ${o}`).elseIf(i._`${o} === null`).assign(c,i._`""`);case"number":return void r.elseIf(i._`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(c,i._`+${o}`);case"integer":return void r.elseIf(i._`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(c,i._`+${o}`);case"boolean":return void r.elseIf(i._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(c,!1).elseIf(i._`${o} === "true" || ${o} === 1`).assign(c,!0);case"null":return r.elseIf(i._`${o} === "" || ${o} === 0 || ${o} === false`),void r.assign(c,null);case"array":r.elseIf(i._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(c,i._`[${o}]`)}}r.else(),m(e),r.endIf(),r.if(i._`${c} !== undefined`,(()=>{r.assign(o,c),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(i._`${t} !== undefined`,(()=>e.assign(i._`${t}[${n}]`,r)))}(e,c)}))}(e,t,c):m(e)}))}return d};const u=new Set(["string","number","integer","boolean","null"]);function f(e,t,n,r=s.Correct){const o=r===s.Correct?i.operators.EQ:i.operators.NEQ;let a;switch(e){case"null":return i._`${t} ${o} null`;case"array":a=i._`Array.isArray(${t})`;break;case"object":a=i._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":a=c(i._`!(${t} % 1) && !isNaN(${t})`);break;case"number":a=c();break;default:return i._`typeof ${t} ${o} ${e}`}return r===s.Correct?a:i.not(a);function c(e=i.nil){return i.and(i._`typeof ${t} == "number"`,e,n?i._`isFinite(${t})`:i.nil)}}function p(e,t,n,r){if(1===e.length)return f(e[0],t,n,r);let s;const a=o.toHash(e);if(a.array&&a.object){const e=i._`typeof ${t} != "object"`;s=a.null?e:i._`!${t} || ${e}`,delete a.null,delete a.array,delete a.object}else s=i.nil;a.number&&delete a.integer;for(const e in a)s=i.and(s,f(e,t,n,r));return s}e.checkDataType=f,e.checkDataTypes=p;const h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?i._`{type: ${e}}`:i._`{type: ${t}}`};function m(e){const t=function(e){const{gen:t,data:n,schema:r}=e,i=o.schemaRefOrVal(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);r.reportError(t,h)}e.reportTypeError=m}(b);var E={};Object.defineProperty(E,"__esModule",{value:!0}),E.assignDefaults=void 0;const x=c,C=l;function O(e,t,n){const{gen:r,compositeRule:i,data:o,opts:s}=e;if(void 0===n)return;const a=x._`${o}${x.getProperty(t)}`;if(i)return void C.checkStrictMode(e,`default is ignored for: ${a}`);let c=x._`${a} === undefined`;"empty"===s.useDefaults&&(c=x._`${c} || ${a} === null || ${a} === ""`),r.if(c,x._`${a} = ${x.stringify(n)}`)}E.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)O(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>O(e,n,t.default)))};var P={},I={};Object.defineProperty(I,"__esModule",{value:!0}),I.validateUnion=I.validateArray=I.usePattern=I.callValidateCode=I.schemaProperties=I.allSchemaProperties=I.noPropertyInData=I.propertyInData=I.isOwnProperty=I.hasPropFunc=I.reportMissingProp=I.checkMissingProp=I.checkReportMissingProp=void 0;const T=c,A=l,N=f;function D(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:T._`Object.prototype.hasOwnProperty`})}function R(e,t,n){return T._`${D(e)}.call(${t}, ${n})`}function M(e,t,n,r){const i=T._`${t}${T.getProperty(n)} === undefined`;return r?T.or(i,T.not(R(e,t,n))):i}function q(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}I.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:i}=e;n.if(M(n,r,t,i.opts.ownProperties),(()=>{e.setParams({missingProperty:T._`${t}`},!0),e.error()}))},I.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,i){return T.or(...r.map((r=>T.and(M(e,t,r,n.ownProperties),T._`${i} = ${r}`))))},I.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},I.hasPropFunc=D,I.isOwnProperty=R,I.propertyInData=function(e,t,n,r){const i=T._`${t}${T.getProperty(n)} !== undefined`;return r?T._`${i} && ${R(e,t,n)}`:i},I.noPropertyInData=M,I.allSchemaProperties=q,I.schemaProperties=function(e,t){return q(t).filter((n=>!A.alwaysValidSchema(e,t[n])))},I.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:s},a,c,d){const u=d?T._`${e}, ${t}, ${r}${i}`:t,l=[[N.default.instancePath,T.strConcat(N.default.instancePath,o)],[N.default.parentData,s.parentData],[N.default.parentDataProperty,s.parentDataProperty],[N.default.rootData,N.default.rootData]];s.opts.dynamicRef&&l.push([N.default.dynamicAnchors,N.default.dynamicAnchors]);const f=T._`${u}, ${n.object(...l)}`;return c!==T.nil?T._`${a}.call(${c}, ${f})`:T._`${a}(${f})`},I.usePattern=function({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"";return e.scopeValue("pattern",{key:n,ref:new RegExp(n,r),code:T._`new RegExp(${n}, ${r})`})},I.validateArray=function(e){const{gen:t,data:n,keyword:r,it:i}=e,o=t.name("valid");if(i.allErrors){const e=t.let("valid",!0);return s((()=>t.assign(e,!1))),e}return t.var(o,!0),s((()=>t.break())),o;function s(i){const s=t.const("len",T._`${n}.length`);t.forRange("i",0,s,(n=>{e.subschema({keyword:r,dataProp:n,dataPropType:A.Type.Num},o),t.if(T.not(o),i)}))}},I.validateUnion=function(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>A.alwaysValidSchema(i,e)))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),s=t.name("_valid");t.block((()=>n.forEach(((n,i)=>{const a=e.subschema({keyword:r,schemaProp:i,compositeRule:!0},s);t.assign(o,T._`${o} || ${s}`);e.mergeValidEvaluated(a,s)||t.if(T.not(o))})))),e.result(o,(()=>e.reset()),(()=>e.error(!0)))},Object.defineProperty(P,"__esModule",{value:!0}),P.validateKeywordUsage=P.validSchemaType=P.funcKeywordCode=P.macroKeywordCode=void 0;const F=c,L=f,z=I,U=a;function V(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,(()=>t.assign(n,F._`${r.parentData}[${r.parentDataProperty}]`)))}function B(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:F.stringify(n)})}P.macroKeywordCode=function(e,t){const{gen:n,keyword:r,schema:i,parentSchema:o,it:s}=e,a=t.macro.call(s.self,i,o,s),c=B(n,r,a);!1!==s.opts.validateSchema&&s.self.validateSchema(a,!0);const d=n.name("valid");e.subschema({schema:a,schemaPath:F.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,(()=>e.error(!0)))},P.funcKeywordCode=function(e,t){var n;const{gen:r,keyword:i,schema:o,parentSchema:s,$data:a,it:c}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(c,t);const d=!a&&t.compile?t.compile.call(c.self,o,s,c):t.validate,u=B(r,i,d),l=r.let("valid");function f(n=(t.async?F._`await `:F.nil)){const i=c.opts.passContext?L.default.this:L.default.self,o=!("compile"in t&&!a||!1===t.schema);r.assign(l,F._`${n}${z.callValidateCode(e,u,i,o)}`,t.modifying)}function p(e){var n;r.if(F.not(null!==(n=t.valid)&&void 0!==n?n:l),e)}e.block$data(l,(function(){if(!1===t.errors)f(),t.modifying&&V(e),p((()=>e.error()));else{const n=t.async?function(){const e=r.let("ruleErrs",null);return r.try((()=>f(F._`await `)),(t=>r.assign(l,!1).if(F._`${t} instanceof ${c.ValidationError}`,(()=>r.assign(e,F._`${t}.errors`)),(()=>r.throw(t))))),e}():function(){const e=F._`${u}.errors`;return r.assign(e,null),f(F.nil),e}();t.modifying&&V(e),p((()=>function(e,t){const{gen:n}=e;n.if(F._`Array.isArray(${t})`,(()=>{n.assign(L.default.vErrors,F._`${L.default.vErrors} === null ? ${t} : ${L.default.vErrors}.concat(${t})`).assign(L.default.errors,F._`${L.default.vErrors}.length`),U.extendErrors(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:l)},P.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},P.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema){if(!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}};var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.extendSubschemaMode=K.extendSubschemaData=K.getSubschema=void 0;const W=c,G=l;K.getSubschema=function(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(void 0!==t&&void 0!==r)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const r=e.schema[t];return void 0===n?{schema:r,schemaPath:W._`${e.schemaPath}${W.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:r[n],schemaPath:W._`${e.schemaPath}${W.getProperty(t)}${W.getProperty(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${G.escapeFragment(n)}`}}if(void 0!==r){if(void 0===i||void 0===o||void 0===s)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')},K.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:s}){if(void 0!==i&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(void 0!==n){const{errorPath:i,dataPathArr:o,opts:s}=t;c(a.let("data",W._`${t.data}${W.getProperty(n)}`,!0)),e.errorPath=W.str`${i}${G.getErrorPath(n,r,s.jsPropertySyntax)}`,e.parentDataProperty=W._`${n}`,e.dataPathArr=[...o,e.parentDataProperty]}if(void 0!==i){c(i instanceof W.Name?i:a.let("data",i,!0)),void 0!==s&&(e.propertyName=s)}function c(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}o&&(e.dataTypes=o)},K.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n};var J={},H=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n},Y={exports:{}},Q=Y.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),Z(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function Z(e,t,n,r,i,o,s,a,c,d){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var u in t(r,i,o,s,a,c,d),r){var l=r[u];if(Array.isArray(l)){if(u in Q.arrayKeywords)for(var f=0;f<l.length;f++)Z(e,t,n,l[f],i+"/"+u+"/"+f,o,i,u,r,f)}else if(u in Q.propsKeywords){if(l&&"object"==typeof l)for(var p in l)Z(e,t,n,l[p],i+"/"+u+"/"+X(p),o,i,u,r,p)}else(u in Q.keywords||e.allKeys&&!(u in Q.skipKeywords))&&Z(e,t,n,l,i+"/"+u,o,i,u,r)}n(r,i,o,s,a,c,d)}}function X(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Q.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Q.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Q.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Q.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var ee={exports:{}};
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */!function(e,t){!function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function s(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function a(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),s=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",a),d=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,i,"[\\+\\-\\.]")+"*"),n(n(s+"|"+t(u,a,"[\\:]"))+"*");var l=n(n("25[0-5]")+"|"+n("2[0-4]"+i)+"|"+n("1"+i+i)+"|"+n("0?[1-9]"+i)+"|0?0?"+i),f=n(l+"\\."+l+"\\."+l+"\\."+l),p=n(o+"{1,4}"),h=n(n(p+"\\:"+p)+"|"+f),m=n(n(p+"\\:")+"{6}"+h),y=n("\\:\\:"+n(p+"\\:")+"{5}"+h),v=n(n(p)+"?\\:\\:"+n(p+"\\:")+"{4}"+h),g=n(n(n(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+n(p+"\\:")+"{3}"+h),w=n(n(n(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+n(p+"\\:")+"{2}"+h),b=n(n(n(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+h),$=n(n(n(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+h),k=n(n(n(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),_=n(n(n(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),j=n([m,y,v,g,w,b,$,k,_].join("|")),S=n(n(u+"|"+s)+"+");n("[vV]"+o+"+\\."+t(u,a,"[\\:]")+"+"),n(n(s+"|"+t(u,a))+"*");var E=n(s+"|"+t(u,a,"[\\:\\@]"));return n(n(s+"|"+t(u,a,"[\\@]"))+"+"),n(n(E+"|"+t("[\\/\\?]",d))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",d),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,c),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+j+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+S+")")+"?\\]?$")}}var c=a(!1),d=a(!0),u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f=2147483647,p=36,h=1,m=26,y=38,v=700,g=72,w=128,b="-",$=/^xn--/,k=/[^\0-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=p-h,E=Math.floor,x=String.fromCharCode;function C(e){throw new RangeError(j[e])}function O(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function P(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+O((e=e.replace(_,".")).split("."),t).join(".")}function I(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var T=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},A=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},N=function(e,t,n){var r=0;for(e=n?E(e/v):e>>1,e+=E(e/t);e>S*m>>1;r+=p)e=E(e/S);return E(r+(S+1)*e/(e+y))},D=function(e){var t=[],n=e.length,r=0,i=w,o=g,s=e.lastIndexOf(b);s<0&&(s=0);for(var a=0;a<s;++a)e.charCodeAt(a)>=128&&C("not-basic"),t.push(e.charCodeAt(a));for(var c=s>0?s+1:0;c<n;){for(var d=r,u=1,l=p;;l+=p){c>=n&&C("invalid-input");var y=T(e.charCodeAt(c++));(y>=p||y>E((f-r)/u))&&C("overflow"),r+=y*u;var v=l<=o?h:l>=o+m?m:l-o;if(y<v)break;var $=p-v;u>E(f/$)&&C("overflow"),u*=$}var k=t.length+1;o=N(r-d,k,0==d),E(r/k)>f-i&&C("overflow"),i+=E(r/k),r%=k,t.splice(r++,0,i)}return String.fromCodePoint.apply(String,t)},R=function(e){var t=[],n=(e=I(e)).length,r=w,i=0,o=g,s=!0,a=!1,c=void 0;try{for(var d,u=e[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var l=d.value;l<128&&t.push(x(l))}}catch(e){a=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(a)throw c}}var y=t.length,v=y;for(y&&t.push(b);v<n;){var $=f,k=!0,_=!1,j=void 0;try{for(var S,O=e[Symbol.iterator]();!(k=(S=O.next()).done);k=!0){var P=S.value;P>=r&&P<$&&($=P)}}catch(e){_=!0,j=e}finally{try{!k&&O.return&&O.return()}finally{if(_)throw j}}var T=v+1;$-r>E((f-i)/T)&&C("overflow"),i+=($-r)*T,r=$;var D=!0,R=!1,M=void 0;try{for(var q,F=e[Symbol.iterator]();!(D=(q=F.next()).done);D=!0){var L=q.value;if(L<r&&++i>f&&C("overflow"),L==r){for(var z=i,U=p;;U+=p){var V=U<=o?h:U>=o+m?m:U-o;if(z<V)break;var B=z-V,K=p-V;t.push(x(A(V+B%K,0))),z=E(B/K)}t.push(x(A(z,0))),o=N(i,T,v==y),i=0,++v}}}catch(e){R=!0,M=e}finally{try{!D&&F.return&&F.return()}finally{if(R)throw M}}++i,++r}return t.join("")},M=function(e){return P(e,(function(e){return $.test(e)?D(e.slice(4).toLowerCase()):e}))},q=function(e){return P(e,(function(e){return k.test(e)?"xn--"+R(e):e}))},F={version:"2.1.0",ucs2:{decode:I,encode:function(e){return String.fromCodePoint.apply(String,l(e))}},decode:D,encode:R,toASCII:q,toUnicode:M},L={};function z(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function U(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function V(e,t){function n(e){var n=U(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,z).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,z).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,z).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,z).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,z).replace(t.PCT_ENCODED,i)),e}function B(e){return e.replace(/^0*(.*)/,"$1")||"0"}function K(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(B).join("."):e}function W(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=u(n,3),i=r[1],o=r[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=u(s,2),c=a[0],d=a[1],l=d?d.split(":").map(B):[],f=c.split(":").map(B),p=t.IPV4ADDRESS.test(f[f.length-1]),h=p?7:8,m=f.length-h,y=Array(h),v=0;v<h;++v)y[v]=l[v]||f[m+v]||"";p&&(y[h-1]=K(y[h-1],t));var g=y.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],w=void 0;if(g&&g.length>1){var b=y.slice(0,g.index),$=y.slice(g.index+g.length);w=b.join(":")+"::"+$.join(":")}else w=y.join(":");return o&&(w+="%"+o),w}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,J=void 0==="".match(/(){0}/)[1];function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?d:c;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(G);if(i){J?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=W(K(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=L[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)V(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(r.PCT_ENCODED,U).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}V(n,c)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function Y(e,t){var n=!1!==t.iri?d:c,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(W(K(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var Q=/^\.\.?\//,Z=/^\/\.(\/|$)/,X=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Q))e=e.replace(Q,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(X))e=e.replace(X,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?d:c,r=[],i=L[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,U).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}V(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=Y(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var s=e.path;t.absolutePath||i&&i.absolutePath||(s=te(s)),void 0===o&&(s=s.replace(/^\/\//,"/%2F")),r.push(s)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=H(ne(e,n),n),t=H(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function ie(e,t,n){var r=s({scheme:"null"},n);return ne(re(H(e,r),H(t,r),r,!0),r)}function oe(e,t){return"string"==typeof e?e=ne(H(e,t),t):"object"===r(e)&&(e=H(ne(e,t),t)),e}function se(e,t,n){return"string"==typeof e?e=ne(H(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(H(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?d.ESCAPE:c.ESCAPE,z)}function ce(e,t){return e&&e.toString().replace(t&&t.iri?d.PCT_ENCODED:c.PCT_ENCODED,U)}var de={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},ue={scheme:"https",domainHost:de.domainHost,parse:de.parse,serialize:de.serialize};function le(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var fe={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=le(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(le(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=u(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:fe.domainHost,parse:fe.parse,serialize:fe.serialize},he={},me="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ye="[0-9A-Fa-f]",ve=n(n("%[EFef]"+ye+"%"+ye+ye+"%"+ye+ye)+"|"+n("%[89A-Fa-f]"+ye+"%"+ye+ye)+"|"+n("%"+ye+ye)),ge="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",we=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),be="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$e=new RegExp(me,"g"),ke=new RegExp(ve,"g"),_e=new RegExp(t("[^]",ge,"[\\.]",'[\\"]',we),"g"),je=new RegExp(t("[^]",me,be),"g"),Se=je;function Ee(e){var t=U(e);return t.match($e)?t:e}var xe={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},s=n.query.split("&"),a=0,c=s.length;a<c;++a){var d=s[a].split("=");switch(d[0]){case"to":for(var u=d[1].split(","),l=0,f=u.length;l<f;++l)r.push(u[l]);break;case"subject":n.subject=ce(d[1],t);break;case"body":n.body=ce(d[1],t);break;default:i=!0,o[ce(d[0],t)]=ce(d[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var p=0,h=r.length;p<h;++p){var m=r[p].split("@");if(m[0]=ce(m[0]),t.unicodeSupport)m[1]=ce(m[1],t).toLowerCase();else try{m[1]=F.toASCII(ce(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[p]=m.join("@")}return n},serialize:function(e,t){var n=e,r=o(e.to);if(r){for(var s=0,a=r.length;s<a;++s){var c=String(r[s]),d=c.lastIndexOf("@"),u=c.slice(0,d).replace(ke,Ee).replace(ke,i).replace(_e,z),l=c.slice(d+1);try{l=t.iri?F.toUnicode(l):F.toASCII(ce(l,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}r[s]=u+"@"+l}n.path=r.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var p=[];for(var h in f)f[h]!==he[h]&&p.push(h.replace(ke,Ee).replace(ke,i).replace(je,z)+"="+f[h].replace(ke,Ee).replace(ke,i).replace(Se,z));return p.length&&(n.query=p.join("&")),n}},Ce=/^([^\:]+)\:(.*)/,Oe={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Ce),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=i+":"+(t.nid||o),c=L[a];r.nid=o,r.nss=s,r.path=void 0,c&&(r=c.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=L[i];o&&(e=o.serialize(e,t));var s=e,a=e.nss;return s.path=(r||t.nid)+":"+a,s}},Pe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ie={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(Pe)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};L[de.scheme]=de,L[ue.scheme]=ue,L[fe.scheme]=fe,L[pe.scheme]=pe,L[xe.scheme]=xe,L[Oe.scheme]=Oe,L[Ie.scheme]=Ie,e.SCHEMES=L,e.pctEncChar=z,e.pctDecChars=U,e.parse=H,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=ie,e.normalize=oe,e.equal=se,e.escapeComponent=ae,e.unescapeComponent=ce,Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,ee.exports),Object.defineProperty(J,"__esModule",{value:!0}),J.getSchemaRefs=J.resolveUrl=J.normalizeId=J._getFullPath=J.getFullPath=J.inlineRef=void 0;const te=l,ne=H,re=Y.exports,ie=ee.exports,oe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);J.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!ae(e):!!t&&ce(e)<=t)};const se=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ae(e){for(const t in e){if(se.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(ae))return!0;if("object"==typeof n&&ae(n))return!0}return!1}function ce(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!oe.has(n)&&("object"==typeof e[n]&&te.eachItem(e[n],(e=>t+=ce(e))),t===1/0))return 1/0}return t}function de(e="",t){!1!==t&&(e=fe(e));return ue(ie.parse(e))}function ue(e){return ie.serialize(e).split("#")[0]+"#"}J.getFullPath=de,J._getFullPath=ue;const le=/#\/?$/;function fe(e){return e?e.replace(le,""):""}J.normalizeId=fe,J.resolveUrl=function(e,t){return t=fe(t),ie.resolve(e,t)};const pe=/^[a-z_][-a-z0-9._]*$/i;J.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const{schemaId:t}=this.opts,n=fe(e[t]),r={"":n},i=de(n,!1),o={},s=new Set;return re(e,{allKeys:!0},((e,n,d,u)=>{if(void 0===u)return;const l=i+n;let f=r[u];function p(t){if(t=fe(f?ie.resolve(f,t):t),s.has(t))throw c(t);s.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?a(e,n.schema,t):t!==fe(l)&&("#"===t[0]?(a(e,o[t],t),o[t]=e):this.refs[t]=l),t}function h(e){if("string"==typeof e){if(!pe.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e[t]&&(f=p.call(this,e[t])),h.call(this,e.$anchor),h.call(this,e.$dynamicAnchor),r[n]=f})),o;function a(e,t,n){if(void 0!==t&&!ne(e,t))throw c(n)}function c(e){return new Error(`reference "${e}" resolves to more than one schema`)}},Object.defineProperty(o,"__esModule",{value:!0}),o.getData=o.KeywordCxt=o.validateFunctionCode=void 0;const he=s,me=b,ye=_,ve=b,ge=E,we=P,be=K,$e=c,ke=f,_e=J,je=l,Se=a;function Ee({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,$e._`${ke.default.data}, ${ke.default.valCxt}`,r.$async,(()=>{e.code($e._`"use strict"; ${xe(n,i)}`),function(e,t){e.if(ke.default.valCxt,(()=>{e.var(ke.default.instancePath,$e._`${ke.default.valCxt}.${ke.default.instancePath}`),e.var(ke.default.parentData,$e._`${ke.default.valCxt}.${ke.default.parentData}`),e.var(ke.default.parentDataProperty,$e._`${ke.default.valCxt}.${ke.default.parentDataProperty}`),e.var(ke.default.rootData,$e._`${ke.default.valCxt}.${ke.default.rootData}`),t.dynamicRef&&e.var(ke.default.dynamicAnchors,$e._`${ke.default.valCxt}.${ke.default.dynamicAnchors}`)}),(()=>{e.var(ke.default.instancePath,$e._`""`),e.var(ke.default.parentData,$e._`undefined`),e.var(ke.default.parentDataProperty,$e._`undefined`),e.var(ke.default.rootData,ke.default.data),t.dynamicRef&&e.var(ke.default.dynamicAnchors,$e._`{}`)}))}(e,i),e.code(o)})):e.func(t,$e._`${ke.default.data}, ${function(e){return $e._`{${ke.default.instancePath}="", ${ke.default.parentData}, ${ke.default.parentDataProperty}, ${ke.default.rootData}=${ke.default.data}${e.dynamicRef?$e._`, ${ke.default.dynamicAnchors}={}`:$e.nil}}={}`}(i)}`,r.$async,(()=>e.code(xe(n,i)).code(o)))}function xe(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?$e._`/*# sourceURL=${n} */`:$e.nil}function Ce(e,t){Pe(e)&&(Ie(e),Oe(e))?function(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&Ae(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=_e.resolveUrl(e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",ke.default.errors);Te(e,o),r.var(t,$e._`${o} === ${ke.default.errors}`)}(e,t):he.boolOrEmptySchema(e,t)}function Oe({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Pe(e){return"boolean"!=typeof e.schema}function Ie(e){je.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&je.schemaHasRulesButRef(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function Te(e,t){if(e.opts.jtd)return Ne(e,[],!1,t);const n=me.getSchemaTypes(e.schema);Ne(e,n,!me.coerceAndCheckDataType(e,n),t)}function Ae({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(!0===i.$comment)e.code($e._`${ke.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const n=$e.str`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code($e._`${ke.default.self}.opts.$comment(${o}, ${n}, ${i}.schema)`)}}function Ne(e,t,n,r){const{gen:i,schema:o,data:s,allErrors:a,opts:c,self:d}=e,{RULES:u}=d;function l(d){ye.shouldUseGroup(o,d)&&(d.type?(i.if(ve.checkDataType(d.type,s,c.strictNumbers)),De(e,d),1===t.length&&t[0]===d.type&&n&&(i.else(),ve.reportTypeError(e)),i.endIf()):De(e,d),a||i.if($e._`${ke.default.errors} === ${r||0}`))}!o.$ref||!c.ignoreKeywordsWithRef&&je.schemaHasRulesButRef(o,u)?(c.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{Me(e.dataTypes,t)||qe(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>Me(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&qe(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if("object"==typeof i&&ye.shouldUseRule(e.schema,i)){const{type:n}=i.definition;n.length&&!n.some((e=>Re(t,e)))&&qe(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes)}(e,t),i.block((()=>{for(const e of u.rules)l(e);l(u.post)}))):i.block((()=>Le(e,"$ref",u.all.$ref.definition)))}function De(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&ge.assignDefaults(e,t.type),n.block((()=>{for(const n of t.rules)ye.shouldUseRule(r,n)&&Le(e,n.keyword,n.definition,t.type)}))}function Re(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function Me(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function qe(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,je.checkStrictMode(e,t,e.opts.strictTypes)}o.validateFunctionCode=function(e){Pe(e)&&(Ie(e),Oe(e))?function(e){const{schema:t,opts:n,gen:r}=e;Ee(e,(()=>{n.$comment&&t.$comment&&Ae(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&je.checkStrictMode(e,"default is ignored in the schema root")}(e),r.let(ke.default.vErrors,null),r.let(ke.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",$e._`${n}.evaluated`),t.if($e._`${e.evaluated}.dynamicProps`,(()=>t.assign($e._`${e.evaluated}.props`,$e._`undefined`))),t.if($e._`${e.evaluated}.dynamicItems`,(()=>t.assign($e._`${e.evaluated}.items`,$e._`undefined`)))}(e),Te(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if($e._`${ke.default.errors} === 0`,(()=>t.return(ke.default.data)),(()=>t.throw($e._`new ${i}(${ke.default.vErrors})`))):(t.assign($e._`${r}.errors`,ke.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof $e.Name&&e.assign($e._`${t}.props`,n);r instanceof $e.Name&&e.assign($e._`${t}.items`,r)}(e),t.return($e._`${ke.default.errors} === 0`))}(e)}))}(e):Ee(e,(()=>he.topBoolOrEmptySchema(e)))};class Fe{constructor(e,t,n){if(we.validateKeywordUsage(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=je.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",Ve(this.$data,e));else if(this.schemaCode=this.schemaValue,!we.validSchemaType(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",ke.default.errors))}result(e,t,n){this.failResult($e.not(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult($e.not(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail($e._`${t} !== undefined && (${$e.or(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?Se.reportExtraError:Se.reportError)(this,this.def.error,t)}$dataError(){Se.reportError(this,this.def.$dataError||Se.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');Se.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=$e.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=$e.nil,t=$e.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:i,def:o}=this;n.if($e.or($e._`${r} === undefined`,t)),e!==$e.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==$e.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:i}=this;return $e.or(function(){if(n.length){if(!(t instanceof $e.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return $e._`${ve.checkDataTypes(e,t,i.opts.strictNumbers,ve.DataType.Wrong)}`}return $e.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return $e._`!${n}(${t})`}return $e.nil}())}subschema(e,t){const n=be.getSubschema(this.it,e);be.extendSubschemaData(n,this.it,e),be.extendSubschemaMode(n,e);const r={...this.it,...n,items:void 0,props:void 0};return Ce(r,t),r}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=je.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=je.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,$e.Name))),!0}}function Le(e,t,n,r){const i=new Fe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?we.funcKeywordCode(i,n):"macro"in n?we.macroKeywordCode(i,n):(n.compile||n.validate)&&we.funcKeywordCode(i,n)}o.KeywordCxt=Fe;const ze=/^\/(?:[^~]|~0|~1)*$/,Ue=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ve(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(""===e)return ke.default.rootData;if("/"===e[0]){if(!ze.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=ke.default.rootData}else{const s=Ue.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(i=s[2],"#"===i){if(a>=t)throw new Error(c("property/index",a));return r[t-a]}if(a>t)throw new Error(c("data",a));if(o=n[t-a],!i)return o}let s=o;const a=i.split("/");for(const e of a)e&&(o=$e._`${o}${$e.getProperty(je.unescapeJsonPointer(e))}`,s=$e._`${s} && ${o}`);return s;function c(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}o.getData=Ve;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});class Ke extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Be.default=Ke;var We={};Object.defineProperty(We,"__esModule",{value:!0});const Ge=J;class Je extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=Ge.resolveUrl(e,t),this.missingSchema=Ge.normalizeId(Ge.getFullPath(this.missingRef))}}We.default=Je;var He={};Object.defineProperty(He,"__esModule",{value:!0}),He.resolveSchema=He.getCompilingSchema=He.resolveRef=He.compileSchema=He.SchemaEnv=void 0;const Ye=c,Qe=Be,Ze=f,Xe=J,et=l,tt=o,nt=ee.exports;class rt{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:Xe.normalizeId(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function it(e){const t=st.call(this,e);if(t)return t;const n=Xe.getFullPath(e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new Ye.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o});let a;e.$async&&(a=s.scopeValue("Error",{ref:Qe.default,code:Ye._`require("ajv/dist/runtime/validation_error").default`}));const c=s.scopeName("validate");e.validateName=c;const d={gen:s,allErrors:this.opts.allErrors,data:Ze.default.data,parentData:Ze.default.parentData,parentDataProperty:Ze.default.parentDataProperty,dataNames:[Ze.default.data],dataPathArr:[Ye.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:Ye.stringify(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Ye.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:Ye._`""`,opts:this.opts,self:this};let u;try{this._compilations.add(e),tt.validateFunctionCode(d),s.optimize(this.opts.code.optimize);const t=s.toString();u=`${s.scopeRefs(Ze.default.scope)}return ${t}`,this.opts.code.process&&(u=this.opts.code.process(u,e));const n=new Function(`${Ze.default.self}`,`${Ze.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:c,validateCode:t,scopeValues:s._values}),this.opts.unevaluated){const{props:e,items:t}=d;n.evaluated={props:e instanceof Ye.Name?void 0:e,items:t instanceof Ye.Name?void 0:t,dynamicProps:e instanceof Ye.Name,dynamicItems:t instanceof Ye.Name},n.source&&(n.source.evaluated=Ye.stringify(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),t}finally{this._compilations.delete(e)}}function ot(e){return Xe.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:it.call(this,e)}function st(e){for(const r of this._compilations)if(n=e,(t=r).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function at(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||ct.call(this,e,t)}function ct(e,t){const n=nt.parse(t),r=Xe._getFullPath(n);let i=Xe.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&r===i)return ut.call(this,n,e);const o=Xe.normalizeId(r),s=this.refs[o]||this.schemas[o];if("string"==typeof s){const t=ct.call(this,e,s);if("object"!=typeof(null==t?void 0:t.schema))return;return ut.call(this,n,t)}if("object"==typeof(null==s?void 0:s.schema)){if(s.validate||it.call(this,s),o===Xe.normalizeId(t)){const{schema:t}=s,{schemaId:n}=this.opts,r=t[n];return r&&(i=Xe.resolveUrl(i,r)),new rt({schema:t,schemaId:n,root:e,baseId:i})}return ut.call(this,n,s)}}He.SchemaEnv=rt,He.compileSchema=it,He.resolveRef=function(e,t,n){var r;n=Xe.resolveUrl(t,n);const i=e.refs[n];if(i)return i;let o=at.call(this,e,n);if(void 0===o){const i=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:s}=this.opts;i&&(o=new rt({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[n]=ot.call(this,o):void 0},He.getCompilingSchema=st,He.resolveSchema=ct;const dt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ut(e,{baseId:t,schema:n,root:r}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[et.unescapeFragment(r)]))return;const e="object"==typeof n&&n[this.opts.schemaId];!dt.has(r)&&e&&(t=Xe.resolveUrl(t,e))}let o;if("boolean"!=typeof n&&n.$ref&&!et.schemaHasRulesButRef(n,this.RULES)){const e=Xe.resolveUrl(t,n.$ref);o=ct.call(this,r,e)}const{schemaId:s}=this.opts;return o=o||new rt({schema:n,schemaId:s,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}var lt={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=o;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=c;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Be,i=We,s=$,a=He,d=c,u=J,f=b,p=l,h=lt,m=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,n,r,i,o,s,a,c,d,u,l,f,p,h,m,y,v,g,w,b,$,k;const _=e.strict,j=null===(t=e.code)||void 0===t?void 0:t.optimize,S=!0===j||void 0===j?1:j||0;return{strictSchema:null===(r=null!==(n=e.strictSchema)&&void 0!==n?n:_)||void 0===r||r,strictNumbers:null===(o=null!==(i=e.strictNumbers)&&void 0!==i?i:_)||void 0===o||o,strictTypes:null!==(a=null!==(s=e.strictTypes)&&void 0!==s?s:_)&&void 0!==a?a:"log",strictTuples:null!==(d=null!==(c=e.strictTuples)&&void 0!==c?c:_)&&void 0!==d?d:"log",strictRequired:null!==(l=null!==(u=e.strictRequired)&&void 0!==u?u:_)&&void 0!==l&&l,code:e.code?{...e.code,optimize:S}:{optimize:S},loopRequired:null!==(f=e.loopRequired)&&void 0!==f?f:200,loopEnum:null!==(p=e.loopEnum)&&void 0!==p?p:200,meta:null===(h=e.meta)||void 0===h||h,messages:null===(m=e.messages)||void 0===m||m,inlineRefs:null===(y=e.inlineRefs)||void 0===y||y,schemaId:null!==(v=e.schemaId)&&void 0!==v?v:"$id",addUsedSchema:null===(g=e.addUsedSchema)||void 0===g||g,validateSchema:null===(w=e.validateSchema)||void 0===w||w,validateFormats:null===(b=e.validateFormats)||void 0===b||b,unicodeRegExp:null===($=e.unicodeRegExp)||void 0===$||$,int32range:null===(k=e.int32range)||void 0===k||k}}class k{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:y,es5:t,lines:n}),this.logger=function(e){if(!1===e)return O;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=s.getRules(),_.call(this,v,e,"NOT SUPPORTED"),_.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=C.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&x.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),S.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=h;"id"===n&&(r={...h},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await o.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||s.call(this,n)}async function o(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function s(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof i.default))throw t;return a.call(this,t),await c.call(this,t.missingSchema),s.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const n=await d.call(this,e);this.refs[e]||await o.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function d(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=u.normalizeId(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=j.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new a.SchemaEnv({schema:{},schemaId:n});if(t=a.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=j.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=u.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(I.call(this,n,t),!t)return p.eachItem(n,(e=>T.call(this,e))),this;N.call(this,t);const r={...t,type:f.getJSONTypes(t.type),schemaType:f.getJSONTypes(t.schemaType)};return p.eachItem(n,0===r.type.length?e=>T.call(this,e,r):e=>r.type.forEach((t=>T.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=i[e];r&&o&&(i[e]=R(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:s}=this.opts;if("object"==typeof e)o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;const d=u.getSchemaRefs.call(this,e);return n=u.normalizeId(o||n),c=new a.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:n,localRefs:d}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),r&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function _(e,t,n,r="error"){for(const i in e){const o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function j(e){return e=u.normalizeId(e),this.schemas[e]||this.refs[e]}function S(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function x(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function C(){const e={...this.opts};for(const t of m)delete e[t];return e}e.default=k,k.ValidationError=r.default,k.MissingRefError=i.default;const O={log(){},warn(){},error(){}};const P=/^[a-z_$][a-z0-9_$:-]*$/i;function I(e,t){const{RULES:n}=this;if(p.eachItem(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!P.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function T(e,t,n){var r;const i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=i?o.post:o.rules.find((({type:e})=>e===n));if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:f.getJSONTypes(t.type),schemaType:f.getJSONTypes(t.schemaType)}};t.before?A.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function A(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function N(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=R(t)),e.validateSchema=this.compile(t,!0))}const D={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(e){return{anyOf:[e,D]}}}(i);var ft={},pt={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});const mt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ht.default=mt;var yt={};Object.defineProperty(yt,"__esModule",{value:!0}),yt.callRef=yt.getValidate=void 0;const vt=We,gt=I,wt=c,bt=f,$t=He,kt=l,_t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:c}=r,{root:d}=o;if(("#"===n||"#/"===n)&&i===d.baseId)return function(){if(o===d)return St(e,s,o,o.$async);const n=t.scopeValue("root",{ref:d});return St(e,wt._`${n}.validate`,d,d.$async)}();const u=$t.resolveRef.call(c,d,i,n);if(void 0===u)throw new vt.default(i,n);return u instanceof $t.SchemaEnv?function(t){const n=jt(e,t);St(e,n,t,t.$async)}(u):function(r){const i=t.scopeValue("schema",!0===a.code.source?{ref:r,code:wt.stringify(r)}:{ref:r}),o=t.name("valid"),s=e.subschema({schema:r,dataTypes:[],schemaPath:wt.nil,topSchemaRef:i,errSchemaPath:n},o);e.mergeEvaluated(s),e.ok(o)}(u)}};function jt(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):wt._`${n.scopeValue("wrapper",{ref:t})}.validate`}function St(e,t,n,r){const{gen:i,it:o}=e,{allErrors:s,schemaEnv:a,opts:c}=o,d=c.passContext?bt.default.this:wt.nil;function u(e){const t=wt._`${e}.errors`;i.assign(bt.default.vErrors,wt._`${bt.default.vErrors} === null ? ${t} : ${bt.default.vErrors}.concat(${t})`),i.assign(bt.default.errors,wt._`${bt.default.vErrors}.length`)}function l(e){var t;if(!o.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==o.props)if(r&&!r.dynamicProps)void 0!==r.props&&(o.props=kt.mergeEvaluated.props(i,r.props,o.props));else{const t=i.var("props",wt._`${e}.evaluated.props`);o.props=kt.mergeEvaluated.props(i,t,o.props,wt.Name)}if(!0!==o.items)if(r&&!r.dynamicItems)void 0!==r.items&&(o.items=kt.mergeEvaluated.items(i,r.items,o.items));else{const t=i.var("items",wt._`${e}.evaluated.items`);o.items=kt.mergeEvaluated.items(i,t,o.items,wt.Name)}}r?function(){if(!a.$async)throw new Error("async schema referenced by sync schema");const n=i.let("valid");i.try((()=>{i.code(wt._`await ${gt.callValidateCode(e,t,d)}`),l(t),s||i.assign(n,!0)}),(e=>{i.if(wt._`!(${e} instanceof ${o.ValidationError})`,(()=>i.throw(e))),u(e),s||i.assign(n,!1)})),e.ok(n)}():e.result(gt.callValidateCode(e,t,d),(()=>l(t)),(()=>u(t)))}yt.getValidate=jt,yt.callRef=St,yt.default=_t,Object.defineProperty(pt,"__esModule",{value:!0});const Et=yt,xt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ht.default,Et.default];pt.default=xt;var Ct={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});const Pt=c,It=Pt.operators,Tt={maximum:{okStr:"<=",ok:It.LTE,fail:It.GT},minimum:{okStr:">=",ok:It.GTE,fail:It.LT},exclusiveMaximum:{okStr:"<",ok:It.LT,fail:It.GTE},exclusiveMinimum:{okStr:">",ok:It.GT,fail:It.LTE}},At={message:({keyword:e,schemaCode:t})=>Pt.str`must be ${Tt[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>Pt._`{comparison: ${Tt[e].okStr}, limit: ${t}}`},Nt={keyword:Object.keys(Tt),type:"number",schemaType:"number",$data:!0,error:At,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(Pt._`${n} ${Tt[t].fail} ${r} || isNaN(${n})`)}};Ot.default=Nt;var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});const Rt=c,Mt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>Rt.str`must be multiple of ${e}`,params:({schemaCode:e})=>Rt._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,o=i.opts.multipleOfPrecision,s=t.let("res"),a=o?Rt._`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:Rt._`${s} !== parseInt(${s})`;e.fail$data(Rt._`(${r} === 0 || (${s} = ${n}/${r}, ${a}))`)}};Dt.default=Mt;var qt={},Ft={};function Lt(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.default=Lt,Lt.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(qt,"__esModule",{value:!0});const zt=c,Ut=l,Vt=Ft,Bt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>zt.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>zt._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,o="maxLength"===t?zt.operators.GT:zt.operators.LT,s=!1===i.opts.unicode?zt._`${n}.length`:zt._`${Ut.useFunc(e.gen,Vt.default)}(${n})`;e.fail$data(zt._`${s} ${o} ${r}`)}};qt.default=Bt;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});const Wt=I,Gt=c,Jt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Gt.str`must match pattern "${e}"`,params:({schemaCode:e})=>Gt._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:o}=e,s=o.opts.unicodeRegExp?"u":"",a=n?Gt._`(new RegExp(${i}, ${s}))`:Wt.usePattern(e,r);e.fail$data(Gt._`!${a}.test(${t})`)}};Kt.default=Jt;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});const Yt=c,Qt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Yt.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>Yt._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,i="maxProperties"===t?Yt.operators.GT:Yt.operators.LT;e.fail$data(Yt._`Object.keys(${n}).length ${i} ${r}`)}};Ht.default=Qt;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});const Xt=I,en=c,tn=l,nn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>en.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>en._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:o,it:s}=e,{opts:a}=s;if(!o&&0===n.length)return;const c=n.length>=a.loopRequired;if(s.allErrors?function(){if(c||o)e.block$data(en.nil,d);else for(const t of n)Xt.checkReportMissingProp(e,t)}():function(){const s=t.let("missing");if(c||o){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,r,(()=>{t.assign(o,Xt.propertyInData(t,i,n,a.ownProperties)),t.if(en.not(o),(()=>{e.error(),t.break()}))}),en.nil)}(s,n))),e.ok(n)}else t.if(Xt.checkMissingProp(e,n,s)),Xt.reportMissingProp(e,s),t.else()}(),a.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${s.schemaEnv.baseId+s.errSchemaPath}" (strictRequired)`;tn.checkStrictMode(s,t,s.opts.strictRequired)}}function d(){t.forOf("prop",r,(n=>{e.setParams({missingProperty:n}),t.if(Xt.noPropertyInData(t,i,n,a.ownProperties),(()=>e.error()))}))}}};Zt.default=nn;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});const on=c,sn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>on.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>on._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,i="maxItems"===t?on.operators.GT:on.operators.LT;e.fail$data(on._`${n}.length ${i} ${r}`)}};rn.default=sn;var an={},cn={};Object.defineProperty(cn,"__esModule",{value:!0});const dn=H;dn.code='require("ajv/dist/runtime/equal").default',cn.default=dn,Object.defineProperty(an,"__esModule",{value:!0});const un=b,ln=c,fn=l,pn=cn,hn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>ln.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>ln._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:o,schemaCode:s,it:a}=e;if(!r&&!i)return;const c=t.let("valid"),d=o.items?un.getSchemaTypes(o.items):[];function u(r,i){const o=t.name("item"),s=un.checkDataTypes(d,o,a.opts.strictNumbers,un.DataType.Wrong),u=t.const("indices",ln._`{}`);t.for(ln._`;${r}--;`,(()=>{t.let(o,ln._`${n}[${r}]`),t.if(s,ln._`continue`),d.length>1&&t.if(ln._`typeof ${o} == "string"`,ln._`${o} += "_"`),t.if(ln._`typeof ${u}[${o}] == "number"`,(()=>{t.assign(i,ln._`${u}[${o}]`),e.error(),t.assign(c,!1).break()})).code(ln._`${u}[${o}] = ${r}`)}))}function l(r,i){const o=fn.useFunc(t,pn.default),s=t.name("outer");t.label(s).for(ln._`;${r}--;`,(()=>t.for(ln._`${i} = ${r}; ${i}--;`,(()=>t.if(ln._`${o}(${n}[${r}], ${n}[${i}])`,(()=>{e.error(),t.assign(c,!1).break(s)}))))))}e.block$data(c,(function(){const r=t.let("i",ln._`${n}.length`),i=t.let("j");e.setParams({i:r,j:i}),t.assign(c,!0),t.if(ln._`${r} > 1`,(()=>(d.length>0&&!d.some((e=>"object"===e||"array"===e))?u:l)(r,i)))}),ln._`${s} === false`),e.ok(c)}};an.default=hn;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});const yn=c,vn=l,gn=cn,wn={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>yn._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:o}=e;r||o&&"object"==typeof o?e.fail$data(yn._`!${vn.useFunc(t,gn.default)}(${n}, ${i})`):e.fail(yn._`${o} !== ${n}`)}};mn.default=wn;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});const $n=c,kn=l,_n=cn,jn={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>$n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:o,it:s}=e;if(!r&&0===i.length)throw new Error("enum must have non-empty array");const a=i.length>=s.opts.loopEnum,c=kn.useFunc(t,_n.default);let d;if(a||r)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",o,(e=>t.if($n._`${c}(${n}, ${e})`,(()=>t.assign(d,!0).break()))))}));else{if(!Array.isArray(i))throw new Error("ajv implementation error");const e=t.const("vSchema",o);d=$n.or(...i.map(((t,r)=>function(e,t){const r=i[t];return"object"==typeof r&&null!==r?$n._`${c}(${n}, ${e}[${t}])`:$n._`${n} === ${r}`}(e,r))))}e.pass(d)}};bn.default=jn,Object.defineProperty(Ct,"__esModule",{value:!0});const Sn=Dt,En=qt,xn=Kt,Cn=Ht,On=Zt,Pn=rn,In=an,Tn=mn,An=bn,Nn=[Ot.default,Sn.default,En.default,xn.default,Cn.default,On.default,Pn.default,In.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Tn.default,An.default];Ct.default=Nn;var Dn={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.validateAdditionalItems=void 0;const Mn=c,qn=l,Fn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>Mn.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>Mn._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?Ln(e,r):qn.checkStrictMode(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function Ln(e,t){const{gen:n,schema:r,data:i,keyword:o,it:s}=e;s.items=!0;const a=n.const("len",Mn._`${i}.length`);if(!1===r)e.setParams({len:t.length}),e.pass(Mn._`${a} <= ${t.length}`);else if("object"==typeof r&&!qn.alwaysValidSchema(s,r)){const r=n.var("valid",Mn._`${a} <= ${t.length}`);n.if(Mn.not(r),(()=>function(r){n.forRange("i",t.length,a,(t=>{e.subschema({keyword:o,dataProp:t,dataPropType:qn.Type.Num},r),s.allErrors||n.if(Mn.not(r),(()=>n.break()))}))}(r))),e.ok(r)}}Rn.validateAdditionalItems=Ln,Rn.default=Fn;var zn={},Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.validateTuple=void 0;const Vn=c,Bn=l,Kn=I,Wn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Gn(e,"additionalItems",t);n.items=!0,Bn.alwaysValidSchema(n,t)||e.ok(Kn.validateArray(e))}};function Gn(e,t,n=e.schema){const{gen:r,parentSchema:i,data:o,keyword:s,it:a}=e;!function(e){const{opts:r,errSchemaPath:i}=a,o=n.length,c=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(r.strictTuples&&!c){const e=`"${s}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;Bn.checkStrictMode(a,e,r.strictTuples)}}(i),a.opts.unevaluated&&n.length&&!0!==a.items&&(a.items=Bn.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),d=r.const("len",Vn._`${o}.length`);n.forEach(((t,n)=>{Bn.alwaysValidSchema(a,t)||(r.if(Vn._`${d} > ${n}`,(()=>e.subschema({keyword:s,schemaProp:n,dataProp:n},c))),e.ok(c))}))}Un.validateTuple=Gn,Un.default=Wn,Object.defineProperty(zn,"__esModule",{value:!0});const Jn=Un,Hn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>Jn.validateTuple(e,"items")};zn.default=Hn;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});const Qn=c,Zn=l,Xn=I,er=Rn,tr={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>Qn.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>Qn._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,Zn.alwaysValidSchema(r,t)||(i?er.validateAdditionalItems(e,i):e.ok(Xn.validateArray(e)))}};Yn.default=tr;var nr={};Object.defineProperty(nr,"__esModule",{value:!0});const rr=c,ir=l,or={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?rr.str`must contain at least ${e} valid item(s)`:rr.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?rr._`{minContains: ${e}}`:rr._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;let s,a;const{minContains:c,maxContains:d}=r;o.opts.next?(s=void 0===c?1:c,a=d):s=1;const u=t.const("len",rr._`${i}.length`);if(e.setParams({min:s,max:a}),void 0===a&&0===s)return void ir.checkStrictMode(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==a&&s>a)return ir.checkStrictMode(o,'"minContains" > "maxContains" is always invalid'),void e.fail();if(ir.alwaysValidSchema(o,n)){let t=rr._`${u} >= ${s}`;return void 0!==a&&(t=rr._`${t} && ${u} <= ${a}`),void e.pass(t)}o.items=!0;const l=t.name("valid");if(void 0===a&&1===s)f(l,(()=>t.if(l,(()=>t.break()))));else{t.let(l,!1);const e=t.name("_valid"),n=t.let("count",0);f(e,(()=>t.if(e,(()=>function(e){t.code(rr._`${e}++`),void 0===a?t.if(rr._`${e} >= ${s}`,(()=>t.assign(l,!0).break())):(t.if(rr._`${e} > ${a}`,(()=>t.assign(l,!1).break())),1===s?t.assign(l,!0):t.if(rr._`${e} >= ${s}`,(()=>t.assign(l,!0))))}(n)))))}function f(n,r){t.forRange("i",0,u,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:ir.Type.Num,compositeRule:!0},n),r()}))}e.result(l,(()=>e.reset()))}};nr.default=or;var sr={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=c,n=l,r=I;e.error={message:({params:{property:e,depsCount:n,deps:r}})=>t.str`must have ${1===n?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:n,deps:r,missingProperty:i}})=>t._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${n},
    deps: ${r}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e){if("__proto__"===r)continue;(Array.isArray(e[r])?t:n)[r]=e[r]}return[t,n]}(e);o(e,t),s(e,n)}};function o(e,n=e.schema){const{gen:i,data:o,it:s}=e;if(0===Object.keys(n).length)return;const a=i.let("missing");for(const c in n){const d=n[c];if(0===d.length)continue;const u=r.propertyInData(i,o,c,s.opts.ownProperties);e.setParams({property:c,depsCount:d.length,deps:d.join(", ")}),s.allErrors?i.if(u,(()=>{for(const t of d)r.checkReportMissingProp(e,t)})):(i.if(t._`${u} && (${r.checkMissingProp(e,d,a)})`),r.reportMissingProp(e,a),i.else())}}function s(e,t=e.schema){const{gen:i,data:o,keyword:s,it:a}=e,c=i.name("valid");for(const d in t)n.alwaysValidSchema(a,t[d])||(i.if(r.propertyInData(i,o,d,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:s,schemaProp:d},c);e.mergeValidEvaluated(t,c)}),(()=>i.var(c,!0))),e.ok(c))}e.validatePropertyDeps=o,e.validateSchemaDeps=s,e.default=i}(sr);var ar={};Object.defineProperty(ar,"__esModule",{value:!0});const cr=c,dr=l,ur={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>cr._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:r,it:i}=e;if(dr.alwaysValidSchema(i,n))return;const o=t.name("valid");t.forIn("key",r,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},o),t.if(cr.not(o),(()=>{e.error(!0),i.allErrors||t.break()}))})),e.ok(o)}};ar.default=ur;var lr={};Object.defineProperty(lr,"__esModule",{value:!0});const fr=I,pr=c,hr=f,mr=l,yr={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>pr._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:o,it:s}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=s;if(s.props=!0,"all"!==c.removeAdditional&&mr.alwaysValidSchema(s,n))return;const d=fr.allSchemaProperties(r.properties),u=fr.allSchemaProperties(r.patternProperties);function l(e){t.code(pr._`delete ${i}[${e}]`)}function f(r){if("all"===c.removeAdditional||c.removeAdditional&&!1===n)l(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(a||t.break());if("object"==typeof n&&!mr.alwaysValidSchema(s,n)){const n=t.name("valid");"failing"===c.removeAdditional?(p(r,n,!1),t.if(pr.not(n),(()=>{e.reset(),l(r)}))):(p(r,n),a||t.if(pr.not(n),(()=>t.break())))}}}function p(t,n,r){const i={keyword:"additionalProperties",dataProp:t,dataPropType:mr.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}t.forIn("key",i,(n=>{d.length||u.length?t.if(function(n){let i;if(d.length>8){const e=mr.schemaRefOrVal(s,r.properties,"properties");i=fr.isOwnProperty(t,e,n)}else i=d.length?pr.or(...d.map((e=>pr._`${n} === ${e}`))):pr.nil;return u.length&&(i=pr.or(i,...u.map((t=>pr._`${fr.usePattern(e,t)}.test(${n})`)))),pr.not(i)}(n),(()=>f(n))):f(n)})),e.ok(pr._`${o} === ${hr.default.errors}`)}};lr.default=yr;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});const gr=o,wr=I,br=l,$r=lr,kr={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;"all"===o.opts.removeAdditional&&void 0===r.additionalProperties&&$r.default.code(new gr.KeywordCxt(o,$r.default,"additionalProperties"));const s=wr.allSchemaProperties(n);for(const e of s)o.definedProperties.add(e);o.opts.unevaluated&&s.length&&!0!==o.props&&(o.props=br.mergeEvaluated.props(t,br.toHash(s),o.props));const a=s.filter((e=>!br.alwaysValidSchema(o,n[e])));if(0===a.length)return;const c=t.name("valid");for(const n of a)d(n)?u(n):(t.if(wr.propertyInData(t,i,n,o.opts.ownProperties)),u(n),o.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(c);function d(e){return o.opts.useDefaults&&!o.compositeRule&&void 0!==n[e].default}function u(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},c)}}};vr.default=kr;var _r={};Object.defineProperty(_r,"__esModule",{value:!0});const jr=I,Sr=c,Er=l,xr=l,Cr={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:o}=e,{opts:s}=o,a=jr.allSchemaProperties(n),c=a.filter((e=>Er.alwaysValidSchema(o,n[e])));if(0===a.length||c.length===a.length&&(!o.opts.unevaluated||!0===o.props))return;const d=s.strictSchema&&!s.allowMatchingProperties&&i.properties,u=t.name("valid");!0===o.props||o.props instanceof Sr.Name||(o.props=xr.evaluatedPropsToName(t,o.props));const{props:l}=o;function f(e){for(const t in d)new RegExp(e).test(t)&&Er.checkStrictMode(o,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function p(n){t.forIn("key",r,(r=>{t.if(Sr._`${jr.usePattern(e,n)}.test(${r})`,(()=>{const i=c.includes(n);i||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:xr.Type.Str},u),o.opts.unevaluated&&!0!==l?t.assign(Sr._`${l}[${r}]`,!0):i||o.allErrors||t.if(Sr.not(u),(()=>t.break()))}))}))}!function(){for(const e of a)d&&f(e),o.allErrors?p(e):(t.var(u,!0),p(e),t.if(u))}()}};_r.default=Cr;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});const Pr=l,Ir={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if(Pr.alwaysValidSchema(r,n))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};Or.default=Ir;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});const Ar={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:I.validateUnion,error:{message:"must match a schema in anyOf"}};Tr.default=Ar;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});const Dr=c,Rr=l,Mr={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>Dr._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const o=n,s=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block((function(){o.forEach(((n,r)=>{let o;Rr.alwaysValidSchema(i,n)?t.var(c,!0):o=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},c),r>0&&t.if(Dr._`${c} && ${s}`).assign(s,!1).assign(a,Dr._`[${a}, ${r}]`).else(),t.if(c,(()=>{t.assign(s,!0),t.assign(a,r),o&&e.mergeEvaluated(o,Dr.Name)}))}))})),e.result(s,(()=>e.reset()),(()=>e.error(!0)))}};Nr.default=Mr;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});const Fr=l,Lr={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach(((t,n)=>{if(Fr.alwaysValidSchema(r,t))return;const o=e.subschema({keyword:"allOf",schemaProp:n},i);e.ok(i),e.mergeEvaluated(o)}))}};qr.default=Lr;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});const Ur=c,Vr=l,Br={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>Ur.str`must match "${e.ifClause}" schema`,params:({params:e})=>Ur._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:r}=e;void 0===n.then&&void 0===n.else&&Vr.checkStrictMode(r,'"if" without "then" and "else" is ignored');const i=Kr(r,"then"),o=Kr(r,"else");if(!i&&!o)return;const s=t.let("valid",!0),a=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(t)}(),e.reset(),i&&o){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(a,c("then",n),c("else",n))}else i?t.if(a,c("then")):t.if(Ur.not(a),c("else"));function c(n,r){return()=>{const i=e.subschema({keyword:n},a);t.assign(s,a),e.mergeValidEvaluated(i,s),r?t.assign(r,Ur._`${n}`):e.setParams({ifClause:n})}}e.pass(s,(()=>e.error(!0)))}};function Kr(e,t){const n=e.schema[t];return void 0!==n&&!Vr.alwaysValidSchema(e,n)}zr.default=Br;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});const Gr=l,Jr={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&Gr.checkStrictMode(n,`"${e}" without "if" is ignored`)}};Wr.default=Jr,Object.defineProperty(Dn,"__esModule",{value:!0});const Hr=Rn,Yr=zn,Qr=Un,Zr=Yn,Xr=nr,ei=sr,ti=ar,ni=lr,ri=vr,ii=_r,oi=Or,si=Tr,ai=Nr,ci=qr,di=zr,ui=Wr;Dn.default=function(e=!1){const t=[oi.default,si.default,ai.default,ci.default,di.default,ui.default,ti.default,ni.default,ei.default,ri.default,ii.default];return e?t.push(Yr.default,Zr.default):t.push(Hr.default,Qr.default),t.push(Xr.default),t};var li={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});const pi=c,hi={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>pi.str`must match format "${e}"`,params:({schemaCode:e})=>pi._`{format: ${e}}`},code(e,t){const{gen:n,data:r,$data:i,schema:o,schemaCode:s,it:a}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:l}=a;c.validateFormats&&(i?function(){const i=n.scopeValue("formats",{ref:l.formats,code:c.code.formats}),o=n.const("fDef",pi._`${i}[${s}]`),a=n.let("fType"),d=n.let("format");n.if(pi._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>n.assign(a,pi._`${o}.type || "string"`).assign(d,pi._`${o}.validate`)),(()=>n.assign(a,pi._`"string"`).assign(d,o))),e.fail$data(pi.or(!1===c.strictSchema?pi.nil:pi._`${s} && !${d}`,function(){const e=u.$async?pi._`(${o}.async ? await ${d}(${r}) : ${d}(${r}))`:pi._`${d}(${r})`,n=pi._`(typeof ${d} == "function" ? ${e} : ${d}.test(${r}))`;return pi._`${d} && ${d} !== true && ${a} === ${t} && !${n}`}()))}():function(){const i=l.formats[o];if(!i)return void function(){if(!1===c.strictSchema)return void l.logger.warn(e());throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${d}"`}}();if(!0===i)return;const[s,a,f]=function(e){const t=e instanceof RegExp?pi.regexpCode(e):c.code.formats?pi._`${c.code.formats}${pi.getProperty(o)}`:void 0,r=n.scopeValue("formats",{key:o,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,pi._`${r}.validate`];return["string",e,r]}(i);s===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!u.$async)throw new Error("async format in sync schema");return pi._`await ${f}(${r})`}return"function"==typeof a?pi._`${f}(${r})`:pi._`${f}.test(${r})`}())}())}};fi.default=hi,Object.defineProperty(li,"__esModule",{value:!0});const mi=[fi.default];li.default=mi;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.contentVocabulary=yi.metadataVocabulary=void 0,yi.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],yi.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(ft,"__esModule",{value:!0});const vi=Ct,gi=Dn,wi=li,bi=yi,$i=[pt.default,vi.default,gi.default(),wi.default,bi.metadataVocabulary,bi.contentVocabulary];ft.default=$i;var ki={},_i={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,(t=e.DiscrError||(e.DiscrError={})).Tag="tag",t.Mapping="mapping"}(_i),Object.defineProperty(ki,"__esModule",{value:!0});const ji=c,Si=_i,Ei={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===Si.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>ji._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:o}=e,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if("string"!=typeof a)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",ji._`${n}${ji.getProperty(a)}`);function u(n){const r=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(i,ji.Name),r}t.if(ji._`typeof ${d} == "string"`,(()=>function(){const n=function(){var e;const t={},n=o(i);let r=!0;for(let t=0;t<s.length;t++){const i=s[t],d=null===(e=i.properties)||void 0===e?void 0:e[a];if("object"!=typeof d)throw new Error(`discriminator: oneOf schemas must have "properties/${a}"`);r=r&&(n||o(i)),c(d,t)}if(!r)throw new Error(`discriminator: "${a}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(a)}function c(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`);for(const n of e.enum)d(n,t)}}function d(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${a}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(ji._`${d} === ${e}`),t.assign(c,u(n[e]));t.else(),e.error(!1,{discrError:Si.DiscrError.Mapping,tag:d,tagName:a}),t.endIf()}()),(()=>e.error(!1,{discrError:Si.DiscrError.Tag,tag:d,tagName:a}))),e.ok(c)}};ki.default=Ei;var xi={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=i,r=ft,s=ki,a=xi,d=["/properties"],u="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,d):a;this.addMetaSchema(e,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var f=o;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var p=c;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return p.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return p.CodeGen}})}(r,r.exports);var Ci=new(n(r.exports))({schemas:[{$id:"https://serverlessworkflow.io/schemas/0.8/auth.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - auth schema",type:"object",auth:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing auth definitions (json or yaml)"},{type:"array",description:"Workflow auth definitions",items:{type:"object",$ref:"#/definitions/authdef"},additionalItems:!1,minItems:1}]},required:["auth"],definitions:{authdef:{type:"object",properties:{name:{type:"string",description:"Unique auth definition name",minLength:1},scheme:{type:"string",description:"Defines the auth type",enum:["basic","bearer","oauth2"],default:"basic"},properties:{oneOf:[{type:"string",description:"Expression referencing a workflow secret that contains all needed auth info"},{title:"Basic Auth Info",$ref:"#/definitions/basicpropsdef"},{title:"Bearer Auth Info State",$ref:"#/definitions/bearerpropsdef"},{title:"OAuth2  Info",$ref:"#/definitions/oauth2propsdef"}]}},required:["name","properties"]},basicpropsdef:{oneOf:[{type:"string",description:"Expression referencing a workflow secret that contains all needed basic auth info"},{type:"object",description:"Basic auth information",properties:{username:{type:"string",description:"String or a workflow expression. Contains the user name",minLength:1},password:{type:"string",description:"String or a workflow expression. Contains the user password",minLength:1},metadata:{$ref:"common.json#/definitions/metadata"}},required:["username","password"],additionalProperties:!1}]},bearerpropsdef:{oneOf:[{type:"string",description:"Expression referencing a workflow secret that contains all needed bearer auth info"},{type:"object",description:"Bearer auth information",properties:{token:{type:"string",description:"String or a workflow expression. Contains the token",minLength:1},metadata:{$ref:"common.json#/definitions/metadata"}},required:["token"],additionalProperties:!1}]},oauth2propsdef:{oneOf:[{type:"string",description:"Expression referencing a workflow secret that contains all needed OAuth2 auth info"},{type:"object",description:"OAuth2 information",properties:{authority:{type:"string",description:"String or a workflow expression. Contains the authority information",minLength:1},grantType:{type:"string",description:"Defines the grant type",enum:["password","clientCredentials","tokenExchange"],additionalItems:!1},clientId:{type:"string",description:"String or a workflow expression. Contains the client identifier",minLength:1},clientSecret:{type:"string",description:"Workflow secret or a workflow expression. Contains the client secret",minLength:1},scopes:{type:"array",description:"Array containing strings or workflow expressions. Contains the OAuth2 scopes",items:{type:"string"},minItems:1,additionalItems:!1},username:{type:"string",description:"String or a workflow expression. Contains the user name. Used only if grantType is 'resourceOwner'",minLength:1},password:{type:"string",description:"String or a workflow expression. Contains the user password. Used only if grantType is 'resourceOwner'",minLength:1},audiences:{type:"array",description:"Array containing strings or workflow expressions. Contains the OAuth2 audiences",items:{type:"string"},minItems:1,additionalItems:!1},subjectToken:{type:"string",description:"String or a workflow expression. Contains the subject token",minLength:1},requestedSubject:{type:"string",description:"String or a workflow expression. Contains the requested subject",minLength:1},requestedIssuer:{type:"string",description:"String or a workflow expression. Contains the requested issuer",minLength:1},metadata:{$ref:"common.json#/definitions/metadata"}},required:["grantType","clientId"]}]}}},{$id:"https://serverlessworkflow.io/schemas/0.8/common.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - common schema",type:"object",definitions:{metadata:{type:"object",description:"Metadata information",additionalProperties:{type:"string"}}}},{$id:"https://serverlessworkflow.io/schemas/0.8/events.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - events schema",type:"object",events:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing event definitions (json or yaml)"},{type:"array",description:"Workflow CloudEvent definitions. Defines CloudEvents that can be consumed or produced",items:{type:"object",$ref:"#/definitions/eventdef"},additionalItems:!1,minItems:1}]},required:["events"],definitions:{eventdef:{type:"object",properties:{name:{type:"string",description:"Unique event name",minLength:1},source:{type:"string",description:"CloudEvent source"},type:{type:"string",description:"CloudEvent type"},kind:{type:"string",enum:["consumed","produced"],description:"Defines the CloudEvent as either 'consumed' or 'produced' by the workflow. Default is 'consumed'",default:"consumed"},correlation:{type:"array",description:"CloudEvent correlation definitions",minItems:1,items:{type:"object",$ref:"#/definitions/correlationDef"},additionalItems:!1},dataOnly:{type:"boolean",default:!0,description:"If `true`, only the Event payload is accessible to consuming Workflow states. If `false`, both event payload and context attributes should be accessible "},metadata:{$ref:"common.json#/definitions/metadata",description:"Metadata information"}},additionalProperties:!1,if:{properties:{kind:{const:"consumed"}}},then:{required:["name","source","type"]},else:{required:["name","type"]}},correlationDef:{type:"object",description:"CloudEvent correlation definition",properties:{contextAttributeName:{type:"string",description:"CloudEvent Extension Context Attribute name",minLength:1},contextAttributeValue:{type:"string",description:"CloudEvent Extension Context Attribute value",minLength:1}},additionalProperties:!1,required:["contextAttributeName"]}}},{$id:"https://serverlessworkflow.io/schemas/0.8/errors.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - errors schema",type:"object",errors:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing error definitions (json or yaml)"},{type:"array",description:"Workflow Error definitions. Defines checked errors that can be explicitly handled during workflow execution",items:{type:"object",$ref:"#/definitions/errordef"},additionalItems:!1,minItems:1}]},required:["errors"],definitions:{errordef:{type:"object",properties:{name:{type:"string",description:"Domain-specific error name",minLength:1},code:{type:"string",description:"Error code. Can be used in addition to the name to help runtimes resolve to technical errors/exceptions. Should not be defined if error is set to '*'",minLength:1},description:{type:"string",description:"Error description"}},additionalProperties:!1,required:["name"]}}},{$id:"https://serverlessworkflow.io/schemas/0.8/functions.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - functions schema",type:"object",functions:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing function definitions (json or yaml)"},{type:"array",description:"Workflow function definitions",items:{type:"object",$ref:"#/definitions/function"},additionalItems:!1,minItems:1}]},required:["functions"],definitions:{function:{type:"object",properties:{name:{type:"string",description:"Unique function name",minLength:1},operation:{type:"string",description:'If type is `rest`, <path_to_openapi_definition>#<operation_id>. If type is `asyncapi`, <path_to_asyncapi_definition>#<operation_id>. If type is `rpc`, <path_to_grpc_proto_file>#<service_name>#<service_method>. If type is `graphql`, <url_to_graphql_endpoint>#<literal \\"mutation\\" or \\"query\\">#<query_or_mutation_name>. If type is `odata`, <URI_to_odata_service>#<Entity_Set_Name>. If type is `expression`, defines the workflow expression.',minLength:1},type:{type:"string",description:"Defines the function type. Is either `rest`, `asyncapi, `rpc`, `graphql`, `odata`, `expression`, or `custom`. Default is `rest`",enum:["rest","asyncapi","rpc","graphql","odata","expression","custom"],default:"rest"},authRef:{type:"string",description:"References an auth definition name to be used to access to resource defined in the operation parameter",minLength:1},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["name","operation"]}}},{$id:"https://serverlessworkflow.io/schemas/0.8/retries.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - retries schema",type:"object",retries:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing retry definitions (json or yaml)"},{type:"array",description:"Workflow Retry definitions. Define retry strategies that can be referenced in states onError definitions",items:{type:"object",$ref:"#/definitions/retrydef"},additionalItems:!1,minItems:1}]},required:["retries"],definitions:{retrydef:{type:"object",properties:{name:{type:"string",description:"Unique retry strategy name",minLength:1},delay:{type:"string",description:"Time delay between retry attempts (ISO 8601 duration format)"},maxDelay:{type:"string",description:"Maximum time delay between retry attempts (ISO 8601 duration format)"},increment:{type:"string",description:"Static value by which the delay increases during each attempt (ISO 8601 time format)"},multiplier:{type:["number","string"],minimum:0,minLength:1,multipleOf:.01,description:"Numeric value, if specified the delay between retries is multiplied by this value."},maxAttempts:{type:["number","string"],minimum:1,minLength:0,description:"Maximum number of retry attempts."},jitter:{type:["number","string"],minimum:0,maximum:1,description:"If float type, maximum amount of random time added or subtracted from the delay between each retry relative to total delay (between 0 and 1). If string type, absolute maximum amount of random time added or subtracted from the delay between each retry (ISO 8601 duration format)"}},additionalProperties:!1,required:["name","maxAttempts"]}}},{$id:"https://serverlessworkflow.io/schemas/0.8/secrets.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - secrets schema",type:"object",secrets:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing secrets definitions (json or yaml)"},{type:"array",description:"Workflow Secrets definitions",items:{type:"string"},minItems:1}]},required:["secrets"]},{$id:"https://serverlessworkflow.io/schemas/0.8/timeouts.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - functions schema",type:"object",timeouts:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing timeouts definitions (json or yaml)"},{type:"object",description:"Workflow default timeouts",properties:{workflowExecTimeout:{$ref:"#/definitions/workflowExecTimeout"},stateExecTimeout:{$ref:"#/definitions/stateExecTimeout"},actionExecTimeout:{$ref:"#/definitions/actionExecTimeout"},branchExecTimeout:{$ref:"#/definitions/branchExecTimeout"},eventTimeout:{$ref:"#/definitions/eventTimeout"}},additionalProperties:!1,required:[]}]},required:["timeouts"],definitions:{workflowExecTimeout:{oneOf:[{type:"string",description:"Workflow execution timeout duration (ISO 8601 duration format). If not specified should be 'unlimited'",minLength:1},{type:"object",properties:{duration:{type:"string",description:"Workflow execution timeout duration (ISO 8601 duration format). If not specified should be 'unlimited'",minLength:1},interrupt:{type:"boolean",description:"If `false`, workflow instance is allowed to finish current execution. If `true`, current workflow execution is abrupted.",default:!0},runBefore:{type:"string",description:"Name of a workflow state to be executed before workflow instance is terminated",minLength:1}},additionalProperties:!1,required:["duration"]}]},stateExecTimeout:{oneOf:[{type:"string",description:"Total state execution timeout (including retries) (ISO 8601 duration format)",minLength:1},{type:"object",description:"Workflow default timeouts",properties:{single:{type:"string",description:"Single state execution timeout, not including retries (ISO 8601 duration format)",minLength:1},total:{type:"string",description:"Total state execution timeout, including retries (ISO 8601 duration format)",minLength:1}},additionalProperties:!1,required:["total"]}]},actionExecTimeout:{type:"string",description:"Single actions definition execution timeout duration (ISO 8601 duration format)",minLength:1},branchExecTimeout:{type:"string",description:"Single branch execution timeout duration (ISO 8601 duration format)",minLength:1},eventTimeout:{type:"string",description:"Timeout duration to wait for consuming defined events (ISO 8601 duration format)",minLength:1}}},{$id:"https://serverlessworkflow.io/schemas/0.8/workflow.json",$schema:"http://json-schema.org/draft-07/schema#",description:"Serverless Workflow specification - workflow schema",type:"object",properties:{id:{type:"string",description:"Workflow unique identifier",minLength:1},key:{type:"string",description:"Domain-specific workflow identifier",minLength:1},name:{type:"string",description:"Workflow name",minLength:1},description:{type:"string",description:"Workflow description"},version:{type:"string",description:"Workflow version",minLength:1},annotations:{type:"array",description:"List of helpful terms describing the workflows intended purpose, subject areas, or other important qualities",minItems:1,items:{type:"string"},additionalItems:!1},dataInputSchema:{oneOf:[{type:"string",description:"URI of the JSON Schema used to validate the workflow data input",minLength:1},{type:"object",description:"Workflow data input schema definition",properties:{schema:{type:"string",description:"URI of the JSON Schema used to validate the workflow data input",minLength:1},failOnValidationErrors:{type:"boolean",default:!0,description:"Determines if workflow execution should continue if there are validation errors"}},additionalProperties:!1,required:["schema","failOnValidationErrors"]}]},secrets:{$ref:"secrets.json#/secrets"},constants:{oneOf:[{type:"string",format:"uri",description:"URI to a resource containing constants data (json or yaml)"},{type:"object",description:"Workflow constants data (object type)"}]},start:{$ref:"#/definitions/startdef"},specVersion:{type:"string",description:"Serverless Workflow schema version",minLength:1},expressionLang:{type:"string",description:"Identifies the expression language used for workflow expressions. Default is 'jq'",default:"jq",minLength:1},timeouts:{$ref:"timeouts.json#/timeouts"},errors:{$ref:"errors.json#/errors"},keepActive:{type:"boolean",default:!1,description:"If 'true', workflow instances is not terminated when there are no active execution paths. Instance can be terminated via 'terminate end definition' or reaching defined 'workflowExecTimeout'"},metadata:{$ref:"common.json#/definitions/metadata"},events:{$ref:"events.json#/events"},functions:{$ref:"functions.json#/functions"},autoRetries:{type:"boolean",default:!1,description:"If set to true, actions should automatically be retried on unchecked errors. Default is false"},retries:{$ref:"retries.json#/retries"},auth:{$ref:"auth.json#/auth"},states:{type:"array",description:"State definitions",items:{anyOf:[{title:"Sleep State",$ref:"#/definitions/sleepstate"},{title:"Event State",$ref:"#/definitions/eventstate"},{title:"Operation State",$ref:"#/definitions/operationstate"},{title:"Parallel State",$ref:"#/definitions/parallelstate"},{title:"Switch State",$ref:"#/definitions/switchstate"},{title:"Inject State",$ref:"#/definitions/injectstate"},{title:"ForEach State",$ref:"#/definitions/foreachstate"},{title:"Callback State",$ref:"#/definitions/callbackstate"}]},additionalItems:!1,minItems:1}},oneOf:[{required:["id","specVersion","states"]},{required:["key","specVersion","states"]}],definitions:{sleep:{type:"object",properties:{before:{type:"string",description:"Amount of time (ISO 8601 duration format) to sleep before function/subflow invocation. Does not apply if 'eventRef' is defined."},after:{type:"string",description:"Amount of time (ISO 8601 duration format) to sleep after function/subflow invocation. Does not apply if 'eventRef' is defined."}},oneOf:[{required:["before"]},{required:["after"]},{required:["before","after"]}]},crondef:{oneOf:[{type:"string",description:"Cron expression defining when workflow instances should be created (automatically)",minLength:1},{type:"object",properties:{expression:{type:"string",description:"Repeating interval (cron expression) describing when the workflow instance should be created",minLength:1},validUntil:{type:"string",description:"Specific date and time (ISO 8601 format) when the cron expression invocation is no longer valid"}},additionalProperties:!1,required:["expression"]}]},continueasdef:{oneOf:[{type:"string",description:"Unique id of the workflow to be continue execution as. Entire state data is passed as data input to next execution",minLength:1},{type:"object",properties:{workflowId:{type:"string",description:"Unique id of the workflow to continue execution as"},version:{type:"string",description:"Version of the workflow to continue execution as",minLength:1},data:{type:["string","object"],description:"If string type, an expression which selects parts of the states data output to become the workflow data input of continued execution. If object type, a custom object to become the workflow data input of the continued execution"},workflowExecTimeout:{$ref:"timeouts.json#/definitions/workflowExecTimeout",description:"Workflow execution timeout to be used by the workflow continuing execution. Overwrites any specific settings set by that workflow"}},required:["workflowId"]}]},transition:{oneOf:[{type:"string",description:"Name of state to transition to",minLength:1},{type:"object",description:"Function Reference",properties:{nextState:{type:"string",description:"Name of state to transition to",minLength:1},produceEvents:{type:"array",description:"Array of events to be produced before the transition happens",items:{type:"object",$ref:"#/definitions/produceeventdef"},additionalItems:!1},compensate:{type:"boolean",default:!1,description:"If set to true, triggers workflow compensation when before this transition is taken. Default is false"}},additionalProperties:!1,required:["nextState"]}]},error:{type:"object",properties:{errorRef:{type:"string",description:"Reference to a unique workflow error definition. Used of errorRefs is not used",minLength:1},errorRefs:{type:"array",description:"References one or more workflow error definitions. Used if errorRef is not used",minItems:1,items:{type:"string"},additionalItems:!1},transition:{description:"Transition to next state to handle the error.",$ref:"#/definitions/transition"},end:{description:"End workflow execution in case of this error.",$ref:"#/definitions/end"}},additionalProperties:!1,oneOf:[{required:["errorRef","transition"]},{required:["errorRef","end"]},{required:["errorRefs","transition"]},{required:["errorRefs","end"]}]},onevents:{type:"object",properties:{eventRefs:{type:"array",description:"References one or more unique event names in the defined workflow events",minItems:1,items:{type:"string"},uniqueItems:!0,additionalItems:!1},actionMode:{type:"string",enum:["sequential","parallel"],description:"Specifies how actions are to be performed (in sequence or in parallel)",default:"sequential"},actions:{type:"array",description:"Actions to be performed if expression matches",items:{type:"object",$ref:"#/definitions/action"},additionalItems:!1},eventDataFilter:{description:"Event data filter",$ref:"#/definitions/eventdatafilter"}},additionalProperties:!1,required:["eventRefs"]},action:{type:"object",properties:{id:{type:"string",description:"Unique action identifier"},name:{type:"string",description:"Unique action definition name"},functionRef:{description:"References a function to be invoked",$ref:"#/definitions/functionref"},eventRef:{description:"References a 'trigger' and 'result' reusable event definitions",$ref:"#/definitions/eventref"},subFlowRef:{description:"References a sub-workflow to invoke",$ref:"#/definitions/subflowref"},sleep:{description:"Defines time periods workflow execution should sleep before / after function execution",$ref:"#/definitions/sleep"},retryRef:{type:"string",description:"References a defined workflow retry definition. If not defined the default retry policy is assumed"},nonRetryableErrors:{type:"array",description:"List of unique references to defined workflow errors for which the action should not be retried. Used only when `autoRetries` is set to `true`",minItems:1,items:{type:"string"},additionalItems:!1},retryableErrors:{type:"array",description:"List of unique references to defined workflow errors for which the action should be retried. Used only when `autoRetries` is set to `false`",minItems:1,items:{type:"string"},additionalItems:!1},actionDataFilter:{description:"Action data filter",$ref:"#/definitions/actiondatafilter"},condition:{description:"Expression, if defined, must evaluate to true for this action to be performed. If false, action is disregarded",type:"string",minLength:1}},additionalProperties:!1,oneOf:[{required:["functionRef"]},{required:["eventRef"]},{required:["subFlowRef"]}]},functionref:{oneOf:[{type:"string",description:"Name of the referenced function",minLength:1},{type:"object",description:"Function Reference",properties:{refName:{type:"string",description:"Name of the referenced function"},arguments:{type:"object",description:"Function arguments/inputs"},selectionSet:{type:"string",description:"Only used if function type is 'graphql'. A string containing a valid GraphQL selection set"},invoke:{type:"string",enum:["sync","async"],description:"Specifies if the function should be invoked sync or async",default:"sync"}},additionalProperties:!1,required:["refName"]}]},eventref:{type:"object",description:"Event References",properties:{triggerEventRef:{type:"string",description:"Reference to the unique name of a 'produced' event definition"},resultEventRef:{type:"string",description:"Reference to the unique name of a 'consumed' event definition"},resultEventTimeout:{type:"string",description:"Maximum amount of time (ISO 8601 format) to wait for the result event. If not defined it should default to the actionExecutionTimeout"},data:{type:["string","object"],description:"If string type, an expression which selects parts of the states data output to become the data (payload) of the event referenced by 'triggerEventRef'. If object type, a custom object to become the data (payload) of the event referenced by 'triggerEventRef'."},contextAttributes:{type:"object",description:"Add additional extension context attributes to the produced event",additionalProperties:{type:"string"}},invoke:{type:"string",enum:["sync","async"],description:"Specifies if the function should be invoked sync or async. Default is sync.",default:"sync"}},additionalProperties:!1,required:["triggerEventRef","resultEventRef"]},subflowref:{oneOf:[{type:"string",description:"Unique id of the sub-workflow to be invoked",minLength:1},{type:"object",description:"Specifies a sub-workflow to be invoked",properties:{workflowId:{type:"string",description:"Unique id of the sub-workflow to be invoked"},version:{type:"string",description:"Version of the sub-workflow to be invoked",minLength:1},onParentComplete:{type:"string",enum:["continue","terminate"],description:"If invoke is 'async', specifies how subflow execution should behave when parent workflow completes. Default is 'terminate'",default:"terminate"},invoke:{type:"string",enum:["sync","async"],description:"Specifies if the subflow should be invoked sync or async",default:"sync"}},required:["workflowId"]}]},branch:{type:"object",description:"Branch Definition",properties:{name:{type:"string",description:"Branch name"},timeouts:{type:"object",description:"State specific timeouts",properties:{actionExecTimeout:{$ref:"timeouts.json#/definitions/actionExecTimeout"},branchExecTimeout:{$ref:"timeouts.json#/definitions/branchExecTimeout"}},required:[]},actions:{type:"array",description:"Actions to be executed in this branch",items:{type:"object",$ref:"#/definitions/action"},additionalItems:!1}},additionalProperties:!1,required:["name","actions"]},sleepstate:{type:"object",description:"Causes the workflow execution to sleep for a specified duration",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"sleep",description:"State type"},end:{$ref:"#/definitions/end",description:"State end definition"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},duration:{type:"string",description:"Duration (ISO 8601 duration format) to sleep"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"}},required:[]},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after the workflow sleep",$ref:"#/definitions/transition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","duration"]},else:{oneOf:[{required:["name","type","duration","end"]},{required:["name","type","duration","transition"]}]}},eventstate:{type:"object",description:"This state is used to wait for events from event sources, then consumes them and invoke one or more actions to run in sequence or parallel",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"event",description:"State type"},exclusive:{type:"boolean",default:!0,description:"If true consuming one of the defined events causes its associated actions to be performed. If false all of the defined events must be consumed in order for actions to be performed"},onEvents:{type:"array",description:"Define the events to be consumed and optional actions to be performed",items:{type:"object",$ref:"#/definitions/onevents"},additionalItems:!1},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},actionExecTimeout:{$ref:"timeouts.json#/definitions/actionExecTimeout"},eventTimeout:{$ref:"timeouts.json#/definitions/eventTimeout"}},required:[]},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after all the actions have been performed",$ref:"#/definitions/transition"},end:{$ref:"#/definitions/end",description:"State end definition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,oneOf:[{required:["name","type","onEvents","end"]},{required:["name","type","onEvents","transition"]}]},operationstate:{type:"object",description:"Defines actions be performed. Does not wait for incoming events",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"operation",description:"State type"},end:{$ref:"#/definitions/end",description:"State end definition"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},actionMode:{type:"string",enum:["sequential","parallel"],description:"Specifies whether actions are performed in sequence or in parallel",default:"sequential"},actions:{type:"array",description:"Actions to be performed",items:{type:"object",$ref:"#/definitions/action"}},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},actionExecTimeout:{$ref:"timeouts.json#/definitions/actionExecTimeout"}},required:[]},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after all the actions have been performed",$ref:"#/definitions/transition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","actions"]},else:{oneOf:[{required:["name","type","actions","end"]},{required:["name","type","actions","transition"]}]}},parallelstate:{type:"object",description:"Consists of a number of states that are executed in parallel",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"parallel",description:"State type"},end:{$ref:"#/definitions/end",description:"State end definition"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},branchExecTimeout:{$ref:"timeouts.json#/definitions/branchExecTimeout"}},required:[]},branches:{type:"array",description:"Branch Definitions",items:{type:"object",$ref:"#/definitions/branch"},additionalItems:!1},completionType:{type:"string",enum:["allOf","atLeast"],description:"Option types on how to complete branch execution.",default:"allOf"},numCompleted:{type:["number","string"],minimum:0,minLength:0,description:"Used when completionType is set to 'atLeast' to specify the minimum number of branches that must complete before the state will transition."},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after all branches have completed execution",$ref:"#/definitions/transition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","branches"]},else:{oneOf:[{required:["name","type","branches","end"]},{required:["name","type","branches","transition"]}]}},switchstate:{oneOf:[{$ref:"#/definitions/databasedswitchstate"},{$ref:"#/definitions/eventbasedswitchstate"}]},eventbasedswitchstate:{type:"object",description:"Permits transitions to other states based on events",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"switch",description:"State type"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},eventTimeout:{$ref:"timeouts.json#/definitions/eventTimeout"}},required:[]},eventConditions:{type:"array",description:"Defines conditions evaluated against events",items:{type:"object",$ref:"#/definitions/eventcondition"},additionalItems:!1},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},defaultCondition:{description:"Default transition of the workflow if there is no matching data conditions. Can include a transition or end definition",$ref:"#/definitions/defaultconditiondef"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["name","type","eventConditions","defaultCondition"]},databasedswitchstate:{type:"object",description:"Permits transitions to other states based on data conditions",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"switch",description:"State type"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"}},required:[]},dataConditions:{type:"array",description:"Defines conditions evaluated against state data",items:{type:"object",$ref:"#/definitions/datacondition"},additionalItems:!1},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},defaultCondition:{description:"Default transition of the workflow if there is no matching data conditions. Can include a transition or end definition",$ref:"#/definitions/defaultconditiondef"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["name","type","dataConditions","defaultCondition"]},defaultconditiondef:{type:"object",description:"DefaultCondition definition. Can be either a transition or end definition",properties:{transition:{$ref:"#/definitions/transition"},end:{$ref:"#/definitions/end"}},additionalProperties:!1,oneOf:[{required:["transition"]},{required:["end"]}]},eventcondition:{oneOf:[{$ref:"#/definitions/transitioneventcondition"},{$ref:"#/definitions/enddeventcondition"}]},transitioneventcondition:{type:"object",description:"Switch state data event condition",properties:{name:{type:"string",description:"Event condition name"},eventRef:{type:"string",description:"References an unique event name in the defined workflow events"},transition:{description:"Next transition of the workflow if there is valid matches",$ref:"#/definitions/transition"},eventDataFilter:{description:"Event data filter definition",$ref:"#/definitions/eventdatafilter"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["eventRef","transition"]},enddeventcondition:{type:"object",description:"Switch state data event condition",properties:{name:{type:"string",description:"Event condition name"},eventRef:{type:"string",description:"References an unique event name in the defined workflow events"},end:{$ref:"#/definitions/end",description:"Explicit transition to end"},eventDataFilter:{description:"Event data filter definition",$ref:"#/definitions/eventdatafilter"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["eventRef","end"]},datacondition:{oneOf:[{$ref:"#/definitions/transitiondatacondition"},{$ref:"#/definitions/enddatacondition"}]},transitiondatacondition:{type:"object",description:"Switch state data based condition",properties:{name:{type:"string",description:"Data condition name"},condition:{type:"string",description:"Workflow expression evaluated against state data. Must evaluate to true or false"},transition:{description:"Workflow transition if condition is evaluated to true",$ref:"#/definitions/transition"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["condition","transition"]},enddatacondition:{type:"object",description:"Switch state data based condition",properties:{name:{type:"string",description:"Data condition name"},condition:{type:"string",description:"Workflow expression evaluated against state data. Must evaluate to true or false"},end:{$ref:"#/definitions/end",description:"Workflow end definition"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,required:["condition","end"]},injectstate:{type:"object",description:"Inject static data into state data. Does not perform any actions",properties:{id:{type:"string",description:"Unique state id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"inject",description:"State type"},end:{$ref:"#/definitions/end",description:"State end definition"},data:{type:"object",description:"JSON object which can be set as states data input and can be manipulated via filters"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"}},required:[]},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},transition:{description:"Next transition of the workflow after injection has completed",$ref:"#/definitions/transition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","data"]},else:{oneOf:[{required:["name","type","data","end"]},{required:["name","type","data","transition"]}]}},foreachstate:{type:"object",description:"Execute a set of defined actions or workflows for each element of a data array",properties:{id:{type:"string",description:"Unique State id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"foreach",description:"State type"},end:{$ref:"#/definitions/end",description:"State end definition"},inputCollection:{type:"string",description:"Workflow expression selecting an array element of the states data"},outputCollection:{type:"string",description:"Workflow expression specifying an array element of the states data to add the results of each iteration"},iterationParam:{type:"string",description:"Name of the iteration parameter that can be referenced in actions/workflow. For each parallel iteration, this param should contain an unique element of the inputCollection array"},batchSize:{type:["number","string"],minimum:0,minLength:0,description:"Specifies how many iterations may run in parallel at the same time. Used if 'mode' property is set to 'parallel' (default)"},actions:{type:"array",description:"Actions to be executed for each of the elements of inputCollection",items:{type:"object",$ref:"#/definitions/action"},additionalItems:!1},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},actionExecTimeout:{$ref:"timeouts.json#/definitions/actionExecTimeout"}},required:[]},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after state has completed",$ref:"#/definitions/transition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},mode:{type:"string",enum:["sequential","parallel"],description:"Specifies how iterations are to be performed (sequentially or in parallel)",default:"parallel"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","inputCollection","actions"]},else:{oneOf:[{required:["name","type","inputCollection","actions","end"]},{required:["name","type","inputCollection","actions","transition"]}]}},callbackstate:{type:"object",description:"This state performs an action, then waits for the callback event that denotes completion of the action",properties:{id:{type:"string",description:"Unique state id",minLength:1},name:{type:"string",description:"State name"},type:{type:"string",const:"callback",description:"State type"},action:{description:"Defines the action to be executed",$ref:"#/definitions/action"},eventRef:{type:"string",description:"References an unique callback event name in the defined workflow events"},timeouts:{type:"object",description:"State specific timeouts",properties:{stateExecTimeout:{$ref:"timeouts.json#/definitions/stateExecTimeout"},actionExecTimeout:{$ref:"timeouts.json#/definitions/actionExecTimeout"},eventTimeout:{$ref:"timeouts.json#/definitions/eventTimeout"}},required:[]},eventDataFilter:{description:"Event data filter",$ref:"#/definitions/eventdatafilter"},stateDataFilter:{description:"State data filter",$ref:"#/definitions/statedatafilter"},onErrors:{type:"array",description:"States error handling definitions",items:{type:"object",$ref:"#/definitions/error"},additionalItems:!1},transition:{description:"Next transition of the workflow after all the actions have been performed",$ref:"#/definitions/transition"},end:{$ref:"#/definitions/end",description:"State end definition"},compensatedBy:{type:"string",minLength:1,description:"Unique Name of a workflow state which is responsible for compensation of this state"},usedForCompensation:{type:"boolean",default:!1,description:"If true, this state is used to compensate another state. Default is false"},metadata:{$ref:"common.json#/definitions/metadata"}},additionalProperties:!1,if:{properties:{usedForCompensation:{const:!0}},required:["usedForCompensation"]},then:{required:["name","type","action","eventRef"]},else:{oneOf:[{required:["name","type","action","eventRef","end"]},{required:["name","type","action","eventRef","transition"]}]}},startdef:{oneOf:[{type:"string",description:"Name of the starting workflow state",minLength:1},{type:"object",description:"Workflow start definition",properties:{stateName:{type:"string",description:"Name of the starting workflow state",minLength:1},schedule:{description:"Define the time/repeating intervals or cron at which workflow instances should be automatically started.",$ref:"#/definitions/schedule"}},additionalProperties:!1,required:["stateName","schedule"]}]},schedule:{oneOf:[{type:"string",description:"Time interval (must be repeating interval) described with ISO 8601 format. Declares when workflow instances will be automatically created.  (UTC timezone is assumed)",minLength:1},{type:"object",description:"Start state schedule definition",properties:{interval:{type:"string",description:"Time interval (must be repeating interval) described with ISO 8601 format. Declares when workflow instances will be automatically created.",minLength:1},cron:{$ref:"#/definitions/crondef"},timezone:{type:"string",description:"Timezone name used to evaluate the interval & cron-expression. (default: UTC)"}},additionalProperties:!1,oneOf:[{required:["interval"]},{required:["cron"]}]}]},end:{oneOf:[{type:"boolean",description:"State end definition",default:!0},{type:"object",description:"State end definition",properties:{terminate:{type:"boolean",default:!1,description:"If true, completes all execution flows in the given workflow instance"},produceEvents:{type:"array",description:"Defines events that should be produced",items:{type:"object",$ref:"#/definitions/produceeventdef"},additionalItems:!1},compensate:{type:"boolean",default:!1,description:"If set to true, triggers workflow compensation. Default is false"},continueAs:{$ref:"#/definitions/continueasdef"}},additionalProperties:!1,required:[]}]},produceeventdef:{type:"object",description:"Produce an event and set its data",properties:{eventRef:{type:"string",description:"References a name of a defined event"},data:{type:["string","object"],description:"If String, expression which selects parts of the states data output to become the data of the produced event. If object a custom object to become the data of produced event."},contextAttributes:{type:"object",description:"Add additional event extension context attributes",additionalProperties:{type:"string"}}},additionalProperties:!1,required:["eventRef"]},statedatafilter:{type:"object",properties:{input:{type:"string",description:"Workflow expression to filter the state data input"},output:{type:"string",description:"Workflow expression that filters the state data output"}},additionalProperties:!1,required:[]},eventdatafilter:{type:"object",properties:{useData:{type:"boolean",description:"If set to false, event payload is not added/merged to state data. In this case 'data' and 'toStateData' should be ignored. Default is true.",default:!0},data:{type:"string",description:"Workflow expression that filters the received event payload (default: '${ . }')"},toStateData:{type:"string",description:" Workflow expression that selects a state data element to which the filtered event should be added/merged into. If not specified, denotes, the top-level state data element."}},additionalProperties:!1,required:[]},actiondatafilter:{type:"object",properties:{fromStateData:{type:"string",description:"Workflow expression that selects state data that the state action can use"},useResults:{type:"boolean",description:"If set to false, action data results are not added/merged to state data. In this case 'results' and 'toStateData' should be ignored. Default is true.",default:!0},results:{type:"string",description:"Workflow expression that filters the actions data results"},toStateData:{type:"string",description:"Workflow expression that selects a state data element to which the action results should be added/merged into. If not specified, denote, the top-level state data element"}},additionalProperties:!1,required:[]}}}],strict:!1});Ci.addFormat("uri",(function(e){return!0}));var Oi=new Map([["Workflow","https://serverlessworkflow.io/schemas/0.8/workflow.json"],["Sleep","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/sleep"],["Crondef","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/crondef"],["Continueasdef","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/continueasdef"],["Transition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/transition"],["Error","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/error"],["Onevents","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/onevents"],["Action","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/action"],["Functionref","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/functionref"],["Eventref","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/eventref"],["Subflowref","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/subflowref"],["Branch","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/branch"],["Sleepstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/sleepstate"],["Eventstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/eventstate"],["Operationstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/operationstate"],["Parallelstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/parallelstate"],["Switchstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/switchstate"],["Eventbasedswitchstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/eventbasedswitchstate"],["Databasedswitchstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/databasedswitchstate"],["Defaultconditiondef","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/defaultconditiondef"],["Eventcondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/eventcondition"],["Transitioneventcondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/transitioneventcondition"],["Enddeventcondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/enddeventcondition"],["Datacondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/datacondition"],["Transitiondatacondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/transitiondatacondition"],["Enddatacondition","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/enddatacondition"],["Injectstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/injectstate"],["Foreachstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/foreachstate"],["Callbackstate","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/callbackstate"],["Startdef","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/startdef"],["Schedule","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/schedule"],["End","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/end"],["Produceeventdef","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/produceeventdef"],["Statedatafilter","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/statedatafilter"],["Eventdatafilter","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/eventdatafilter"],["Actiondatafilter","https://serverlessworkflow.io/schemas/0.8/workflow.json#/definitions/actiondatafilter"],["WorkflowExecTimeout","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/definitions/workflowExecTimeout"],["StateExecTimeout","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/definitions/stateExecTimeout"],["ActionExecTimeout","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/definitions/actionExecTimeout"],["BranchExecTimeout","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/definitions/branchExecTimeout"],["EventTimeout","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/definitions/eventTimeout"],["Errordef","https://serverlessworkflow.io/schemas/0.8/errors.json#/definitions/errordef"],["Metadata","https://serverlessworkflow.io/schemas/0.8/common.json#/definitions/metadata"],["Eventdef","https://serverlessworkflow.io/schemas/0.8/events.json#/definitions/eventdef"],["CorrelationDef","https://serverlessworkflow.io/schemas/0.8/events.json#/definitions/correlationDef"],["Function","https://serverlessworkflow.io/schemas/0.8/functions.json#/definitions/function"],["Retrydef","https://serverlessworkflow.io/schemas/0.8/retries.json#/definitions/retrydef"],["Authdef","https://serverlessworkflow.io/schemas/0.8/auth.json#/definitions/authdef"],["Basicpropsdef","https://serverlessworkflow.io/schemas/0.8/auth.json#/definitions/basicpropsdef"],["Bearerpropsdef","https://serverlessworkflow.io/schemas/0.8/auth.json#/definitions/bearerpropsdef"],["Oauth2propsdef","https://serverlessworkflow.io/schemas/0.8/auth.json#/definitions/oauth2propsdef"],["Secrets","https://serverlessworkflow.io/schemas/0.8/secrets.json#/secrets"],["Timeouts","https://serverlessworkflow.io/schemas/0.8/timeouts.json#/timeouts"],["Errors","https://serverlessworkflow.io/schemas/0.8/errors.json#/errors"],["Events","https://serverlessworkflow.io/schemas/0.8/events.json#/events"],["Functions","https://serverlessworkflow.io/schemas/0.8/functions.json#/functions"],["Retries","https://serverlessworkflow.io/schemas/0.8/retries.json#/retries"],["Auth","https://serverlessworkflow.io/schemas/0.8/auth.json#/auth"]].map((function(e){var t=e[0],n=e[1],r=Ci.getSchema(n);if(!r)throw"Unable to find schema '"+n+"' for type '"+t+"'";return[t,r]}))),Pi=function(e){this.workflow=e,this.errors=[];var n=Oi.get("Workflow"),r=this.workflow.normalize();n(JSON.parse(JSON.stringify(r))),n.errors&&(this.errors=n.errors.map((function(e){var n="Workflow is invalid: "+e.instancePath+" | "+e.schemaPath+" | "+e.message+"\n        data: "+JSON.stringify(r,null,4);return new t(n)})));var i=e.specVersion;if("0.8"!==i){var o="provided workflow.specVersion value '"+i+"' can not be different from the SDK supported version '0.8'";this.errors.push(new t(o))}this.isValid=0===this.errors.length};function Ii(e){var t={},n=function(e){return function(){return e}},r=new Proxy({},{get:function(i,o){return"build"===o?(e||n)(t):function(e){return t[o.toString()]=e,r}},set:function(){return!1}});return r}
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ti(e){return null==e}var Ai={isNothing:Ti,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:Ti(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function Ni(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function Di(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ni(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}Di.prototype=Object.create(Error.prototype),Di.prototype.constructor=Di,Di.prototype.toString=function(e){return this.name+": "+Ni(this,e)};var Ri=Di;function Mi(e,t,n,r,i){var o="",s="",a=Math.floor(i/2)-1;return r-t>a&&(t=r-a+(o=" ... ").length),n-r>a&&(n=r+a-(s=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+s,pos:r-t+o.length}}function qi(e,t){return Ai.repeat(" ",t-e.length)+e}var Fi=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],s=-1;n=r.exec(e.buffer);)o.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var a,c,d="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,l=t.maxLength-(t.indent+u+3);for(a=1;a<=t.linesBefore&&!(s-a<0);a++)c=Mi(e.buffer,i[s-a],o[s-a],e.position-(i[s]-i[s-a]),l),d=Ai.repeat(" ",t.indent)+qi((e.line-a+1).toString(),u)+" | "+c.str+"\n"+d;for(c=Mi(e.buffer,i[s],o[s],e.position,l),d+=Ai.repeat(" ",t.indent)+qi((e.line+1).toString(),u)+" | "+c.str+"\n",d+=Ai.repeat("-",t.indent+u+3+c.pos)+"^\n",a=1;a<=t.linesAfter&&!(s+a>=o.length);a++)c=Mi(e.buffer,i[s+a],o[s+a],e.position-(i[s]-i[s+a]),l),d+=Ai.repeat(" ",t.indent)+qi((e.line+a+1).toString(),u)+" | "+c.str+"\n";return d.replace(/\n$/,"")},Li=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zi=["scalar","sequence","mapping"];var Ui=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===Li.indexOf(t))throw new Ri('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===zi.indexOf(this.kind))throw new Ri('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function Vi(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function Bi(e){return this.extend(e)}Bi.prototype.extend=function(e){var t=[],n=[];if(e instanceof Ui)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new Ri("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof Ui))throw new Ri("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new Ri("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new Ri("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof Ui))throw new Ri("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(Bi.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=Vi(r,"implicit"),r.compiledExplicit=Vi(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var Ki=new Bi({explicit:[new Ui("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new Ui("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new Ui("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]});var Wi=new Ui("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Gi=new Ui("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Ji(e){return 48<=e&&e<=55}function Hi(e){return 48<=e&&e<=57}var Yi=new Ui("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,o=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!Ji(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!Hi(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!Ai.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var Zi=/^[-+]?[0-9]+e/;var Xi=new Ui("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!Qi.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||Ai.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ai.isNegativeZero(e))return"-0.0";return n=e.toString(10),Zi.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),eo=Ki.extend({implicit:[Wi,Gi,Yi,Xi]}),to=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),no=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var ro=new Ui("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==to.exec(e)||null!==no.exec(e))},construct:function(e){var t,n,r,i,o,s,a,c,d=0,u=null;if(null===(t=to.exec(e))&&(t=no.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],a=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(n,r,i,o,s,a,d)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}});var io=new Ui("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var so=new Ui("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=oo;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=oo,s=0,a=[];for(t=0;t<i;t++)t%4==0&&t&&(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)),s=s<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(a.push(s>>16&255),a.push(s>>8&255),a.push(255&s)):18===n?(a.push(s>>10&255),a.push(s>>2&255)):12===n&&a.push(s>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,s=oo;for(t=0;t<o;t++)t%3==0&&t&&(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=s[i>>18&63],r+=s[i>>12&63],r+=s[i>>6&63],r+=s[63&i]):2===n?(r+=s[i>>10&63],r+=s[i>>4&63],r+=s[i<<2&63],r+=s[64]):1===n&&(r+=s[i>>2&63],r+=s[i<<4&63],r+=s[64],r+=s[64]),r}}),ao=Object.prototype.hasOwnProperty,co=Object.prototype.toString;var uo=new Ui("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=[],a=e;for(t=0,n=a.length;t<n;t+=1){if(r=a[t],o=!1,"[object Object]"!==co.call(r))return!1;for(i in r)if(ao.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==s.indexOf(i))return!1;s.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),lo=Object.prototype.toString;var fo=new Ui("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(r=s[t],"[object Object]"!==lo.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1)r=s[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),po=Object.prototype.hasOwnProperty;var ho=new Ui("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(po.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),mo=eo.extend({implicit:[ro,io],explicit:[so,uo,fo,ho]}),yo=Object.prototype.hasOwnProperty,vo=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,go=/[\x85\u2028\u2029]/,wo=/[,\[\]\{\}]/,bo=/^(?:!|!!|![a-z\-]+!)$/i,$o=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ko(e){return Object.prototype.toString.call(e)}function _o(e){return 10===e||13===e}function jo(e){return 9===e||32===e}function So(e){return 9===e||32===e||10===e||13===e}function Eo(e){return 44===e||91===e||93===e||123===e||125===e}function xo(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function Co(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function Oo(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var Po=new Array(256),Io=new Array(256),To=0;To<256;To++)Po[To]=Co(To)?1:0,Io[To]=Co(To);function Ao(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||mo,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function No(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=Fi(n),new Ri(t,n)}function Do(e,t){throw No(e,t)}function Ro(e,t){e.onWarning&&e.onWarning.call(null,No(e,t))}var Mo={YAML:function(e,t,n){var r,i,o;null!==e.version&&Do(e,"duplication of %YAML directive"),1!==n.length&&Do(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Do(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Do(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&Ro(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&Do(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],bo.test(r)||Do(e,"ill-formed tag handle (first argument) of the TAG directive"),yo.call(e.tagMap,r)&&Do(e,'there is a previously declared suffix for "'+r+'" tag handle'),$o.test(i)||Do(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){Do(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function qo(e,t,n,r){var i,o,s,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,o=a.length;i<o;i+=1)9===(s=a.charCodeAt(i))||32<=s&&s<=1114111||Do(e,"expected valid JSON character");else vo.test(a)&&Do(e,"the stream contains non-printable characters");e.result+=a}}function Fo(e,t,n,r){var i,o,s,a;for(Ai.isObject(n)||Do(e,"cannot merge mappings; the provided source object is unacceptable"),s=0,a=(i=Object.keys(n)).length;s<a;s+=1)o=i[s],yo.call(t,o)||(t[o]=n[o],r[o]=!0)}function Lo(e,t,n,r,i,o,s,a,c){var d,u;if(Array.isArray(i))for(d=0,u=(i=Array.prototype.slice.call(i)).length;d<u;d+=1)Array.isArray(i[d])&&Do(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===ko(i[d])&&(i[d]="[object Object]");if("object"==typeof i&&"[object Object]"===ko(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(d=0,u=o.length;d<u;d+=1)Fo(e,t,o[d],n);else Fo(e,t,o,n);else e.json||yo.call(n,i)||!yo.call(t,i)||(e.line=s||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,Do(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[i]=o,delete n[i];return t}function zo(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):Do(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Uo(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;jo(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!_o(i))break;for(zo(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&Ro(e,"deficient indentation"),r}function Vo(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!So(t)))}function Bo(e,t){1===t?e.result+=" ":t>1&&(e.result+=Ai.repeat("\n",t-1))}function Ko(e,t){var n,r,i=e.tag,o=e.anchor,s=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,Do(e,"tab characters must not be used in indentation")),45===r)&&So(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,Uo(e,!0,-1)&&e.lineIndent<=t)s.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,Jo(e,t,3,!1,!0),s.push(e.result),Uo(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)Do(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=i,e.anchor=o,e.kind="sequence",e.result=s,!0)}function Wo(e){var t,n,r,i,o=!1,s=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&Do(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(o=!0,i=e.input.charCodeAt(++e.position)):33===i?(s=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):Do(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!So(i);)33===i&&(s?Do(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),bo.test(n)||Do(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),wo.test(r)&&Do(e,"tag suffix cannot contain flow indicator characters")}r&&!$o.test(r)&&Do(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){Do(e,"tag name is malformed: "+r)}return o?e.tag=r:yo.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:Do(e,'undeclared tag handle "'+n+'"'),!0}function Go(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&Do(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!So(n)&&!Eo(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Do(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Jo(e,t,n,r,i){var o,s,a,c,d,u,l,f,p,h=1,m=!1,y=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=s=a=4===n||3===n,r&&Uo(e,!0,-1)&&(m=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;Wo(e)||Go(e);)Uo(e,!0,-1)?(m=!0,a=o,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):a=!1;if(a&&(a=m||i),1!==h&&4!==n||(f=1===n||2===n?t:t+1,p=e.position-e.lineStart,1===h?a&&(Ko(e,p)||function(e,t,n){var r,i,o,s,a,c,d,u=e.tag,l=e.anchor,f={},p=Object.create(null),h=null,m=null,y=null,v=!1,g=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=f),d=e.input.charCodeAt(e.position);0!==d;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,Do(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),o=e.line,63!==d&&58!==d||!So(r)){if(s=e.line,a=e.lineStart,c=e.position,!Jo(e,n,2,!1,!0))break;if(e.line===o){for(d=e.input.charCodeAt(e.position);jo(d);)d=e.input.charCodeAt(++e.position);if(58===d)So(d=e.input.charCodeAt(++e.position))||Do(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Lo(e,f,p,h,m,null,s,a,c),h=m=y=null),g=!0,v=!1,i=!1,h=e.tag,m=e.result;else{if(!g)return e.tag=u,e.anchor=l,!0;Do(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!g)return e.tag=u,e.anchor=l,!0;Do(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===d?(v&&(Lo(e,f,p,h,m,null,s,a,c),h=m=y=null),g=!0,v=!0,i=!0):v?(v=!1,i=!0):Do(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,d=r;if((e.line===o||e.lineIndent>t)&&(v&&(s=e.line,a=e.lineStart,c=e.position),Jo(e,t,4,!0,i)&&(v?m=e.result:y=e.result),v||(Lo(e,f,p,h,m,y,s,a,c),h=m=y=null),Uo(e,!0,-1),d=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==d)Do(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Lo(e,f,p,h,m,null,s,a,c),g&&(e.tag=u,e.anchor=l,e.kind="mapping",e.result=f),g}(e,p,f))||function(e,t){var n,r,i,o,s,a,c,d,u,l,f,p,h=!0,m=e.tag,y=e.anchor,v=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))s=93,d=!1,o=[];else{if(123!==p)return!1;s=125,d=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if(Uo(e,!0,t),(p=e.input.charCodeAt(e.position))===s)return e.position++,e.tag=m,e.anchor=y,e.kind=d?"mapping":"sequence",e.result=o,!0;h?44===p&&Do(e,"expected the node content, but found ','"):Do(e,"missed comma between flow collection entries"),f=null,a=c=!1,63===p&&So(e.input.charCodeAt(e.position+1))&&(a=c=!0,e.position++,Uo(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,Jo(e,t,1,!1,!0),l=e.tag,u=e.result,Uo(e,!0,t),p=e.input.charCodeAt(e.position),!c&&e.line!==n||58!==p||(a=!0,p=e.input.charCodeAt(++e.position),Uo(e,!0,t),Jo(e,t,1,!1,!0),f=e.result),d?Lo(e,o,v,l,u,f,n,r,i):a?o.push(Lo(e,null,v,l,u,f,n,r,i)):o.push(u),Uo(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(h=!0,p=e.input.charCodeAt(++e.position)):h=!1}Do(e,"unexpected end of the stream within a flow collection")}(e,f)?y=!0:(s&&function(e,t){var n,r,i,o,s,a=1,c=!1,d=!1,u=t,l=0,f=!1;if(124===(o=e.input.charCodeAt(e.position)))r=!1;else{if(62!==o)return!1;r=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===a?a=43===o?3:2:Do(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(s=o)&&s<=57?s-48:-1)>=0))break;0===i?Do(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?Do(e,"repeat of an indentation width identifier"):(u=t+i-1,d=!0)}if(jo(o)){do{o=e.input.charCodeAt(++e.position)}while(jo(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!_o(o)&&0!==o)}for(;0!==o;){for(zo(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!d||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>u&&(u=e.lineIndent),_o(o))l++;else{if(e.lineIndent<u){3===a?e.result+=Ai.repeat("\n",c?1+l:l):1===a&&c&&(e.result+="\n");break}for(r?jo(o)?(f=!0,e.result+=Ai.repeat("\n",c?1+l:l)):f?(f=!1,e.result+=Ai.repeat("\n",l+1)):0===l?c&&(e.result+=" "):e.result+=Ai.repeat("\n",l):e.result+=Ai.repeat("\n",c?1+l:l),c=!0,d=!0,l=0,n=e.position;!_o(o)&&0!==o;)o=e.input.charCodeAt(++e.position);qo(e,n,e.position,!1)}}return!0}(e,f)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(qo(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else _o(n)?(qo(e,r,i,!0),Bo(e,Uo(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Vo(e)?Do(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Do(e,"unexpected end of the stream within a single quoted scalar")}(e,f)||function(e,t){var n,r,i,o,s,a,c;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return qo(e,n,e.position,!0),e.position++,!0;if(92===a){if(qo(e,n,e.position,!0),_o(a=e.input.charCodeAt(++e.position)))Uo(e,!1,t);else if(a<256&&Po[a])e.result+=Io[a],e.position++;else if((s=120===(c=a)?2:117===c?4:85===c?8:0)>0){for(i=s,o=0;i>0;i--)(s=xo(a=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+s:Do(e,"expected hexadecimal character");e.result+=Oo(o),e.position++}else Do(e,"unknown escape sequence");n=r=e.position}else _o(a)?(qo(e,n,r,!0),Bo(e,Uo(e,!1,t)),n=r=e.position):e.position===e.lineStart&&Vo(e)?Do(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}Do(e,"unexpected end of the stream within a double quoted scalar")}(e,f)?y=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!So(r)&&!Eo(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Do(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),yo.call(e.anchorMap,n)||Do(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Uo(e,!0,-1),!0}(e)?function(e,t,n){var r,i,o,s,a,c,d,u,l=e.kind,f=e.result;if(So(u=e.input.charCodeAt(e.position))||Eo(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(So(r=e.input.charCodeAt(e.position+1))||n&&Eo(r)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,s=!1;0!==u;){if(58===u){if(So(r=e.input.charCodeAt(e.position+1))||n&&Eo(r))break}else if(35===u){if(So(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Vo(e)||n&&Eo(u))break;if(_o(u)){if(a=e.line,c=e.lineStart,d=e.lineIndent,Uo(e,!1,-1),e.lineIndent>=t){s=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=a,e.lineStart=c,e.lineIndent=d;break}}s&&(qo(e,i,o,!1),Bo(e,e.line-a),i=o=e.position,s=!1),jo(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return qo(e,i,o,!1),!!e.result||(e.kind=l,e.result=f,!1)}(e,f,1===n)&&(y=!0,null===e.tag&&(e.tag="?")):(y=!0,null===e.tag&&null===e.anchor||Do(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(y=a&&Ko(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&Do(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),c=0,d=e.implicitTypes.length;c<d;c+=1)if((l=e.implicitTypes[c]).resolve(e.result)){e.result=l.construct(e.result),e.tag=l.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(yo.call(e.typeMap[e.kind||"fallback"],e.tag))l=e.typeMap[e.kind||"fallback"][e.tag];else for(l=null,c=0,d=(u=e.typeMap.multi[e.kind||"fallback"]).length;c<d;c+=1)if(e.tag.slice(0,u[c].tag.length)===u[c].tag){l=u[c];break}l||Do(e,"unknown tag !<"+e.tag+">"),null!==e.result&&l.kind!==e.kind&&Do(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+l.kind+'", not "'+e.kind+'"'),l.resolve(e.result,e.tag)?(e.result=l.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):Do(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||y}function Ho(e){var t,n,r,i,o=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(Uo(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(s=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!So(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&Do(e,"directive name must not be less than one character in length");0!==i;){for(;jo(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!_o(i));break}if(_o(i))break;for(t=e.position;0!==i&&!So(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&zo(e),yo.call(Mo,n)?Mo[n](e,n,r):Ro(e,'unknown document directive "'+n+'"')}Uo(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Uo(e,!0,-1)):s&&Do(e,"directives end mark is expected"),Jo(e,e.lineIndent-1,4,!1,!0),Uo(e,!0,-1),e.checkLineBreaks&&go.test(e.input.slice(o,e.position))&&Ro(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Vo(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Uo(e,!0,-1)):e.position<e.length-1&&Do(e,"end of the stream or a document separator is expected")}function Yo(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new Ao(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,Do(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Ho(n);return n.documents}var Qo={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=Yo(e,n);if("function"!=typeof t)return r;for(var i=0,o=r.length;i<o;i+=1)t(r[i])},load:function(e,t){var n=Yo(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new Ri("expected a single document in the stream, but found more")}}},Zo=Object.prototype.toString,Xo=Object.prototype.hasOwnProperty,es=65279,ts={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ns=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rs=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function is(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new Ri("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+Ai.repeat("0",r-t.length)+t}function os(e){this.schema=e.schema||mo,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ai.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,s,a,c;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)s=r[i],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(c=e.compiledTypeMap.fallback[s])&&Xo.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ss(e,t){for(var n,r=Ai.repeat(" ",t),i=0,o=-1,s="",a=e.length;i<a;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=a):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(s+=r),s+=n;return s}function as(e,t){return"\n"+Ai.repeat(" ",e.indent*t)}function cs(e){return 32===e||9===e}function ds(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==es||65536<=e&&e<=1114111}function us(e){return ds(e)&&e!==es&&13!==e&&10!==e}function ls(e,t,n){var r=us(e),i=r&&!cs(e);return(n?r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!i)||us(t)&&!cs(t)&&35===e||58===t&&i}function fs(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function ps(e){return/^\n* /.test(e)}function hs(e,t,n,r,i,o,s,a){var c,d,u=0,l=null,f=!1,p=!1,h=-1!==r,m=-1,y=ds(d=fs(e,0))&&d!==es&&!cs(d)&&45!==d&&63!==d&&58!==d&&44!==d&&91!==d&&93!==d&&123!==d&&125!==d&&35!==d&&38!==d&&42!==d&&33!==d&&124!==d&&61!==d&&62!==d&&39!==d&&34!==d&&37!==d&&64!==d&&96!==d&&function(e){return!cs(e)&&58!==e}(fs(e,e.length-1));if(t||s)for(c=0;c<e.length;u>=65536?c+=2:c++){if(!ds(u=fs(e,c)))return 5;y=y&&ls(u,l,a),l=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(10===(u=fs(e,c)))f=!0,h&&(p=p||c-m-1>r&&" "!==e[m+1],m=c);else if(!ds(u))return 5;y=y&&ls(u,l,a),l=u}p=p||h&&c-m-1>r&&" "!==e[m+1]}return f||p?n>9&&ps(e)?5:s?2===o?5:2:p?4:3:!y||s||i(e)?2===o?5:2:1}function ms(e,t,n,r,i){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==ns.indexOf(t)||rs.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),a=r||e.flowLevel>-1&&n>=e.flowLevel;switch(hs(t,a,e.indent,s,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,i)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+ys(t,e.indent)+vs(ss(t,o));case 4:return">"+ys(t,e.indent)+vs(ss(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(a=e.indexOf("\n"),a=-1!==a?a:e.length,i.lastIndex=a,gs(e.slice(0,a),t)),s="\n"===e[0]||" "===e[0];var a;for(;r=i.exec(e);){var c=r[1],d=r[2];n=" "===d[0],o+=c+(s||n||""===d?"":"\n")+gs(d,t),s=n}return o}(t,s),o));case 5:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=fs(e,i),!(t=ts[r])&&ds(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||is(r);return n}(t)+'"';default:throw new Ri("impossible error: invalid scalar style")}}()}function ys(e,t){var n=ps(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function vs(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function gs(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,s=0,a=0,c="";n=i.exec(e);)(a=n.index)-o>t&&(r=s>o?s:a,c+="\n"+e.slice(o,r),o=r+1),s=a;return c+="\n",e.length-o>t&&s>o?c+=e.slice(o,s)+"\n"+e.slice(s+1):c+=e.slice(o),c.slice(1)}function ws(e,t,n,r){var i,o,s,a="",c=e.tag;for(i=0,o=n.length;i<o;i+=1)s=n[i],e.replacer&&(s=e.replacer.call(n,String(i),s)),($s(e,t+1,s,!0,!0,!1,!0)||void 0===s&&$s(e,t+1,null,!0,!0,!1,!0))&&(r&&""===a||(a+=as(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function bs(e,t,n){var r,i,o,s,a,c;for(o=0,s=(i=n?e.explicitTypes:e.implicitTypes).length;o<s;o+=1)if(((a=i[o]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===Zo.call(a.represent))r=a.represent(t,c);else{if(!Xo.call(a.represent,c))throw new Ri("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');r=a.represent[c](t,c)}e.dump=r}return!0}return!1}function $s(e,t,n,r,i,o,s){e.tag=null,e.dump=n,bs(e,n,!1)||bs(e,n,!0);var a,c=Zo.call(e.dump),d=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var u,l,f="[object Object]"===c||"[object Array]"===c;if(f&&(l=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&t>0)&&(i=!1),l&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(f&&l&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===c)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,s,a,c,d,u="",l=e.tag,f=Object.keys(n);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new Ri("sortKeys must be a boolean or a function");for(i=0,o=f.length;i<o;i+=1)d="",r&&""===u||(d+=as(e,t)),a=n[s=f[i]],e.replacer&&(a=e.replacer.call(n,s,a)),$s(e,t+1,s,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=as(e,t)),$s(e,t+1,a,!0,c)&&(e.dump&&10===e.dump.charCodeAt(0)?d+=":":d+=": ",u+=d+=e.dump));e.tag=l,e.dump=u||"{}"}(e,t,e.dump,i),l&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,s,a,c="",d=e.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)a="",""!==c&&(a+=", "),e.condenseFlow&&(a+='"'),s=n[o=u[r]],e.replacer&&(s=e.replacer.call(n,o,s)),$s(e,t,o,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),$s(e,t,s,!1,!1)&&(c+=a+=e.dump));e.tag=d,e.dump="{"+c+"}"}(e,t,e.dump),l&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===c)r&&0!==e.dump.length?(e.noArrayIndent&&!s&&t>0?ws(e,t-1,e.dump,i):ws(e,t,e.dump,i),l&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var r,i,o,s="",a=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),($s(e,t,o,!1,!1)||void 0===o&&$s(e,t,null,!1,!1))&&(""!==s&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=a,e.dump="["+s+"]"}(e,t,e.dump),l&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==c){if("[object Undefined]"===c)return!1;if(e.skipInvalid)return!1;throw new Ri("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&ms(e,e.dump,t,o,d)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function ks(e,t){var n,r,i=[],o=[];for(_s(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function _s(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)_s(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)_s(e[r[i]],t,n)}var js=Qo.load,Ss={dump:function(e,t){var n=new os(t=t||{});n.noRefs||ks(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),$s(n,0,r,!0,!0)?n.dump+"\n":""}}.dump,Es=function(e,t){var n=Oi.get(e);if(!n)throw Error("Validate function not defined for type '"+e+"'");if(!n(JSON.parse(JSON.stringify(t)))){var r=n.errors[0];throw new Error(e+" is invalid: "+r.instancePath+" | "+r.schemaPath+" | "+r.message+"\n      data: "+JSON.stringify(t,null,4))}return!0},xs=function(e){return!!e&&"object"===typeof e};function Cs(e){xs(e.end)&&(e.end=new la(e.end))}function Os(e){xs(e.transition)&&(e.transition=new La(e.transition))}function Ps(e){e.defaultCondition=e.defaultCondition&&new ua(e.defaultCondition)}function Is(e){Array.isArray(e.actions)&&(e.actions=e.actions.map((function(e){return new Xs(e)})))}function Ts(e){e.stateDataFilter=e.stateDataFilter&&new Ma(e.stateDataFilter)}function As(e){e.metadata=e.metadata&&new Sa(e.metadata)}function Ns(e){e.workflowExecTimeout=e.workflowExecTimeout&&new Va(e.workflowExecTimeout)}function Ds(e){e.eventDataFilter=e.eventDataFilter&&new va(e.eventDataFilter)}function Rs(e){Array.isArray(e.onErrors)&&(e.onErrors=e.onErrors.map((function(e){return new ha(e)})))}function Ms(e){Array.isArray(e.produceEvents)&&(e.produceEvents=e.produceEvents.map((function(e){return new Pa(e)})))}function qs(e){e.end||e.transition||(e.end=!0)}function Fs(e){xs(e.end)&&(e.end=e.end.normalize())}function Ls(e,t){var n;xs(t[e])&&Object.assign(t,((n={})[e]=JSON.parse(JSON.stringify(t[e])),n))}function zs(e){Ls("timeouts",e);var t=e.timeouts;t&&xs(t.stateExecTimeout)&&(t.stateExecTimeout=new Ra(t.stateExecTimeout))}function Us(e){e.defaultCondition=e.defaultCondition&&e.defaultCondition.normalize()}function Vs(e){e.workflowExecTimeout=e.workflowExecTimeout&&e.workflowExecTimeout.normalize()}function Bs(e){Array.isArray(e.onErrors)&&(e.onErrors=e.onErrors.map((function(e){return e.normalize()})))}function Ks(e){Array.isArray(e.actions)&&(e.actions=e.actions.map((function(e){return e.normalize()})))}function Ws(e){xs(e.transition)&&(e.transition=e.transition.normalize())}function Gs(e,t){(null==t?void 0:t.actionMode)||delete e.actionMode}function Js(e,t){void 0===(null==t?void 0:t.usedForCompensation)&&delete e.usedForCompensation}function Hs(e,t){void 0===(null==t?void 0:t.compensate)&&delete e.compensate}function Ys(e,t){(null==t?void 0:t.invoke)||delete e.invoke}function Qs(e){null==e||delete e.sourceModel}var Zs=function(){function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return t=i,(null==(r=n.sourceModel)?void 0:r.expressionLang)||delete t.expressionLang,function(e){xs(e.timeouts)&&(e.timeouts=e.timeouts&&e.timeouts.normalize())}(i),function(e,t){void 0===(null==t?void 0:t.keepActive)&&delete e.keepActive}(i,n.sourceModel),function(e){Array.isArray(e.events)&&(e.events=e.events.map((function(e){return e.normalize()})))}(i),function(e){Array.isArray(e.functions)&&(e.functions=e.functions.map((function(e){return e.normalize()})))}(i),function(e){Array.isArray(e.auth)&&(e.auth=e.auth.map((function(e){return e.normalize()})))}(i),function(e){e.states=e.states.map((function(e){return e.normalize()}))}(i),Qs(i),i},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,version:void 0,description:void 0,specVersion:void 0,start:void 0,states:void 0,functions:void 0,events:void 0,retries:void 0,timeouts:void 0,expressionLang:"jq",keepActive:!0};Object.assign(this,i,t),Ls("dataInputSchema",this),Ls("constants",this),xs((r=this).start)&&(r.start=new Da(r.start)),function(e){xs(e.timeouts)&&(e.timeouts=e.timeouts&&new Fa(e.timeouts))}(this),function(e){Array.isArray(e.errors)&&(e.errors=e.errors.map((function(e){return new ma(e)})))}(this),As(this),function(e){Array.isArray(e.events)&&(e.events=e.events.map((function(e){return new ga(e)})))}(this),function(e){Array.isArray(e.functions)&&(e.functions=e.functions.map((function(e){return new ka(e)})))}(this),function(e){Array.isArray(e.retries)&&(e.retries=e.retries.map((function(e){return new Ia(e)})))}(this),function(e){Array.isArray(e.auth)&&(e.auth=e.auth.map((function(e){return new ta(e)})))}(this),function(e){e.states=e.states&&e.states.map((function(e){switch(e.type){case"sleep":return new Na(e);case"event":return new ba(e);case"operation":return new Ca(e);case"parallel":return new Oa(e);case"switch":var t=e;if(t.dataConditions)return new da(e);if(t.eventConditions)return new ya(e);throw new Error("Unexpected switch type; \n state value= "+JSON.stringify(e,null,4));case"inject":return new ja(e);case"foreach":return new $a(e);case"callback":return new oa(e);default:throw new Error("Unexpected type= "+e.type+"; \n state value= "+JSON.stringify(e,null,4))}}))}(this)}return e.fromSource=function(t){try{return new e(js(t))}catch(e){throw new Error("Format not supported")}},e.toJson=function(e){return Es("Workflow",e.normalize()),JSON.stringify(e.normalize())},e.toYaml=function(e){return Es("Workflow",e.normalize()),Ss(JSON.parse(JSON.stringify(e.normalize())))},e}(),Xs=function e(t){var n,r=this;this.normalize=function(){var t,n=new e(r);return xs((t=n).subFlowRef)&&(t.subFlowRef=t.subFlowRef.normalize()),function(e){xs(e.eventRef)&&(e.eventRef=e.eventRef&&e.eventRef.normalize())}(n),function(e){xs(e.functionRef)&&(e.functionRef=e.functionRef&&e.functionRef.normalize())}(n),Qs(n),n},this.sourceModel=Object.assign({},t),Object.assign(this,t),xs((n=this).functionRef)&&(n.functionRef=new _a(n.functionRef)),function(e){e.eventRef=e.eventRef&&new wa(e.eventRef)}(this),function(e){xs(e.subFlowRef)&&(e.subFlowRef=new qa(e.subFlowRef))}(this),function(e){e.sleep=e.sleep&&new Aa(e.sleep)}(this),function(e){e.actionDataFilter=e.actionDataFilter&&new ea(e.actionDataFilter)}(this)},ea=function(e){Object.assign(this,e)},ta=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return t=i,(null==(r=n.sourceModel)?void 0:r.scheme)||delete t.scheme,Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,{scheme:"basic"},t),function(e){if(xs(e.properties)){var t=e.properties;t.username&&t.password&&(e.properties=new na(e)),t.token&&(e.properties=new ra(e)),t.grantType&&(e.properties=new Ea(e))}}(this)},na=function(e){Object.assign(this,e),As(this)},ra=function(e){Object.assign(this,e),As(this)},ia=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Ks(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Is(this),Ls("timeouts",this)},oa=function e(t){var n=this;this.normalize=function(){var t,r=new e(n);return(t=r).action=t.action&&t.action.normalize(),Bs(r),Ws(r),Fs(r),Js(r,n.sourceModel),qs(r),Qs(r),r},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,type:"callback",usedForCompensation:!1};Object.assign(this,i,t),(r=this).action=r.action&&new Xs(r.action),zs(this),Ds(this),Ts(this),Rs(this),Os(this),Cs(this),As(this)},sa=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Vs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Ns(this),Ls("data",this)},aa=function(e){Object.assign(this,e)},ca=function(e){Object.assign(this,e)},da=function e(t){var n=this;this.normalize=function(){var t,r=new e(n);return t=r,Array.isArray(t.dataConditions)&&(t.dataConditions=t.dataConditions.map((function(e){return e.normalize()}))),Bs(r),Us(r),Js(r,n.sourceModel),Qs(r),r},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,type:"switch",usedForCompensation:!1};Object.assign(this,i,t),Ts(this),zs(this),r=this,Array.isArray(r.dataConditions)&&(r.dataConditions=r.dataConditions.map((function(e){if(e.transition)return new za(e);if(e.end)return new fa(e);throw new Error("Provided value is neither Transitiondatacondition nor Enddatacondition \n data= "+e+" ")}))),Rs(this),Ps(this),As(this)},ua=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Ws(t),qs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Os(this),Cs(this)},la=function e(t){var n,r=this;this.normalize=function(){var t,n,i=new e(r);return Hs(i,r.sourceModel),t=i,void 0===(null==(n=r.sourceModel)?void 0:n.terminate)&&delete t.terminate,function(e){xs(e.continueAs)&&(e.continueAs=e.continueAs.normalize())}(i),Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,{compensate:!1,terminate:!1},t),Ms(this),xs((n=this).continueAs)&&(n.continueAs=new sa(n.continueAs))},fa=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Cs(this),As(this)},pa=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Cs(this),Ds(this),As(this)},ha=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Ws(t),qs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Os(this),Cs(this)},ma=function(e){Object.assign(this,e)},ya=function e(t){var n=this;this.normalize=function(){var t,r=new e(n);return t=r,Array.isArray(t.eventConditions)&&(t.eventConditions=t.eventConditions.map((function(e){return e.normalize()}))),Bs(r),Us(r),Js(r,n.sourceModel),Qs(r),r},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,type:"switch",usedForCompensation:!1};Object.assign(this,i,t),Ts(this),zs(this),r=this,Array.isArray(r.eventConditions)&&(r.eventConditions=r.eventConditions.map((function(e){if(e.transition)return new Ua(e);if(e.end)return new pa(e);throw new Error("Provided value is neither Transitioneventcondition nor Enddeventcondition \n data= "+e+" ")}))),Rs(this),Ps(this),As(this)},va=function(e){Object.assign(this,e)},ga=function e(t){var n,r=this;this.normalize=function(){var t,n,i=new e(r);return t=i,(null==(n=r.sourceModel)?void 0:n.kind)||delete t.kind,function(e,t){void 0===(null==t?void 0:t.dataOnly)&&delete e.dataOnly}(i,r.sourceModel),Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,{kind:"consumed",dataOnly:!0},t),n=this,Array.isArray(n.correlation)&&(n.correlation=n.correlation.map((function(e){return new aa(e)}))),As(this)},wa=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Ys(t,n.sourceModel),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Ls("data",this),Ls("contextAttributes",this)},ba=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return t=i,void 0===(null==(r=n.sourceModel)?void 0:r.exclusive)&&delete t.exclusive,function(e){e.onEvents=e.onEvents&&e.onEvents.map((function(e){return e.normalize()}))}(i),Bs(i),Ws(i),Fs(i),qs(i),Qs(i),i},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,type:"event",exclusive:!0};Object.assign(this,i,t),(r=this).onEvents=r.onEvents.map((function(e){return new xa(e)})),zs(this),Ts(this),Rs(this),Os(this),Cs(this),As(this)},$a=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return Fs(i),Ks(i),Bs(i),Ws(i),Js(i,n.sourceModel),t=i,(null==(r=n.sourceModel)?void 0:r.mode)||delete t.mode,qs(i),Qs(i),i},this.sourceModel=Object.assign({},t);var r={id:void 0,name:void 0,type:"foreach",usedForCompensation:!1,mode:"parallel"};Object.assign(this,r,t),Cs(this),Is(this),zs(this),Ts(this),Rs(this),Os(this),As(this)},ka=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return t=i,(null==(r=n.sourceModel)?void 0:r.type)||delete t.type,Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,{type:"rest"},t),As(this)},_a=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Ys(t,n.sourceModel),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Ls("arguments",this)},ja=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Ws(t),Js(t,n.sourceModel),qs(t),Qs(t),t},this.sourceModel=Object.assign({},t);var r={id:void 0,name:void 0,type:"inject",usedForCompensation:!1};Object.assign(this,r,t),Cs(this),Ls("data",this),zs(this),Ts(this),Os(this),As(this)},Sa=function(e){Object.assign(this,e)},Ea=function(e){Object.assign(this,e),As(this)},xa=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Gs(t,n.sourceModel),Ks(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,{actionMode:"sequential"},t),Is(this),Ds(this)},Ca=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Gs(t,n.sourceModel),Ks(t),Bs(t),Ws(t),Js(t,n.sourceModel),qs(t),Qs(t),t},this.sourceModel=Object.assign({},t);var r={id:void 0,name:void 0,type:"operation",actionMode:"sequential",usedForCompensation:!1};Object.assign(this,r,t),Cs(this),Ts(this),Is(this),zs(this),Rs(this),Os(this),As(this)},Oa=function e(t){var n=this;this.normalize=function(){var t,r=new e(n);return Fs(r),t=r,Array.isArray(t.branches)&&(t.branches=t.branches.map((function(e){return e.normalize()}))),function(e,t){(null==t?void 0:t.completionType)||delete e.completionType}(r,n.sourceModel),Bs(r),Ws(r),Js(r,n.sourceModel),qs(r),Qs(r),r},this.sourceModel=Object.assign({},t);var r,i={id:void 0,name:void 0,type:"parallel",completionType:"allOf",usedForCompensation:!1};Object.assign(this,i,t),Cs(this),Ts(this),zs(this),r=this,Array.isArray(r.branches)&&(r.branches=r.branches.map((function(e){return new ia(e)}))),Rs(this),Os(this),As(this)},Pa=function(e){Object.assign(this,e),Ls("data",this),Ls("contextAttributes",this)},Ia=function(e){Object.assign(this,e)},Ta=function(e){var t;Object.assign(this,e),xs((t=this).cron)&&(t.cron=new ca(t.cron))},Aa=function(e){Object.assign(this,e)},Na=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Fs(t),Bs(t),Ws(t),Js(t,n.sourceModel),qs(t),Qs(t),t},this.sourceModel=Object.assign({},t);var r={id:void 0,name:void 0,type:"sleep",usedForCompensation:!1};Object.assign(this,r,t),Cs(this),Ts(this),zs(this),Rs(this),Os(this),As(this)},Da=function(e){var t;Object.assign(this,e),xs((t=this).schedule)&&(t.schedule=new Ta(t.schedule))},Ra=function(e){Object.assign(this,e)},Ma=function(e){Object.assign(this,e)},qa=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return Ys(i,n.sourceModel),t=i,(null==(r=n.sourceModel)?void 0:r.onParentComplete)||delete t.onParentComplete,Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,t)},Fa=function e(t){var n,r=this;this.normalize=function(){var t=new e(r);return Vs(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Ns(this),(n=this).stateExecTimeout=n.stateExecTimeout&&new Ra(n.stateExecTimeout)},La=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Hs(t,n.sourceModel),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,{compensate:!1},t),Ms(this)},za=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Ws(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Os(this),As(this)},Ua=function e(t){var n=this;this.normalize=function(){var t=new e(n);return Ws(t),Qs(t),t},this.sourceModel=Object.assign({},t),Object.assign(this,t),Os(this),Ds(this),As(this)},Va=function e(t){var n=this;this.normalize=function(){var t,r,i=new e(n);return t=i,void 0===(null==(r=n.sourceModel)?void 0:r.interrupt)&&delete t.interrupt,Qs(i),i},this.sourceModel=Object.assign({},t),Object.assign(this,{interrupt:!0},t)},Ba=Object.freeze({__proto__:null,Workflow:Zs,Action:Xs,Actiondatafilter:ea,Authdef:ta,Basicpropsdef:na,Bearerpropsdef:ra,Branch:ia,Callbackstate:oa,Continueasdef:sa,CorrelationDef:aa,Crondef:ca,Databasedswitchstate:da,Defaultconditiondef:ua,End:la,Enddatacondition:fa,Enddeventcondition:pa,Error:ha,Errordef:ma,Eventbasedswitchstate:ya,Eventdatafilter:va,Eventdef:ga,Eventref:wa,Eventstate:ba,Foreachstate:$a,Function:ka,Functionref:_a,Injectstate:ja,Metadata:Sa,Oauth2propsdef:Ea,Onevents:xa,Operationstate:Ca,Parallelstate:Oa,Produceeventdef:Pa,Retrydef:Ia,Schedule:Ta,Sleep:Aa,Sleepstate:Na,Startdef:Da,StateExecTimeout:Ra,Statedatafilter:Ma,Subflowref:qa,Timeouts:Fa,Transition:La,Transitiondatacondition:za,Transitioneventcondition:Ua,WorkflowExecTimeout:Va});function Ka(e){return function(){var t=new Zs(e);return Es("Workflow",t.normalize()),t}}function Wa(e){return function(){var t=new Xs(e);return Es("Action",t.normalize()),t}}function Ga(e){return function(){var t=new ea(e);return Es("Actiondatafilter",t),t}}function Ja(e){return function(){var t=new ta(e);return Es("Authdef",t.normalize()),t}}function Ha(e){return function(){var t=new na(e);return Es("Basicpropsdef",t),t}}function Ya(e){return function(){var t=new ra(e);return Es("Bearerpropsdef",t),t}}function Qa(e){return function(){var t=new ia(e);return Es("Branch",t.normalize()),t}}function Za(e){return function(){var t=new oa(e);return qs(t),Es("Callbackstate",t.normalize()),t}}function Xa(e){return function(){var t=new sa(e);return Es("Continueasdef",t.normalize()),t}}function ec(e){return function(){var t=new aa(e);return Es("CorrelationDef",t),t}}function tc(e){return function(){var t=new ca(e);return Es("Crondef",t),t}}function nc(e){return function(){var t=new da(e);return Es("Databasedswitchstate",t.normalize()),t}}function rc(e){return function(){var t=new ua(e);return Es("Defaultconditiondef",t.normalize()),t}}function ic(e){return function(){var t=new la(e);return Es("End",t.normalize()),t}}function oc(e){return function(){var t=new fa(e);return Es("Enddatacondition",t.normalize()),t}}function sc(e){return function(){var t=new pa(e);return Es("Enddeventcondition",t.normalize()),t}}function ac(e){return function(){var t=new ha(e);return qs(t),Es("Error",t.normalize()),t}}function cc(e){return function(){var t=new ma(e);return Es("Errordef",t),t}}function dc(e){return function(){var t=new ya(e);return Es("Eventbasedswitchstate",t.normalize()),t}}function uc(e){return function(){var t=new va(e);return Es("Eventdatafilter",t),t}}function lc(e){return function(){var t=new ga(e);return Es("Eventdef",t.normalize()),t}}function fc(e){return function(){var t=new wa(e);return Es("Eventref",t.normalize()),t}}function pc(e){return function(){var t=new ba(e);return qs(t),Es("Eventstate",t.normalize()),t}}function hc(e){return function(){var t=new $a(e);return qs(t),Es("Foreachstate",t.normalize()),t}}function mc(e){return function(){var t=new ka(e);return Es("Function",t.normalize()),t}}function yc(e){return function(){var t=new _a(e);return Es("Functionref",t.normalize()),t}}function vc(e){return function(){var t=new ja(e);return qs(t),Es("Injectstate",t.normalize()),t}}function gc(e){return function(){var t=new Sa(e);return Es("Metadata",t),t}}function wc(e){return function(){var t=new Ea(e);return Es("Oauth2propsdef",t),t}}function bc(e){return function(){var t=new xa(e);return Es("Onevents",t.normalize()),t}}function $c(e){return function(){var t=new Ca(e);return qs(t),Es("Operationstate",t.normalize()),t}}function kc(e){return function(){var t=new Oa(e);return qs(t),Es("Parallelstate",t.normalize()),t}}function _c(e){return function(){var t=new Pa(e);return Es("Produceeventdef",t),t}}function jc(e){return function(){var t=new Ia(e);return Es("Retrydef",t),t}}function Sc(e){return function(){var t=new Ta(e);return Es("Schedule",t),t}}function Ec(e){return function(){var t=new Aa(e);return Es("Sleep",t),t}}function xc(e){return function(){var t=new Na(e);return Es("Sleepstate",t.normalize()),t}}function Cc(e){return function(){var t=new Da(e);return Es("Startdef",t),t}}function Oc(e){return function(){var t=new Ra(e);return Es("StateExecTimeout",t),t}}function Pc(e){return function(){var t=new Ma(e);return Es("Statedatafilter",t),t}}function Ic(e){return function(){var t=new qa(e);return Es("Subflowref",t.normalize()),t}}function Tc(e){return function(){var t=new Fa(e);return Es("Timeouts",t.normalize()),t}}function Ac(e){return function(){var t=new La(e);return Es("Transition",t.normalize()),t}}function Nc(e){return function(){var t=new za(e);return Es("Transitiondatacondition",t.normalize()),t}}function Dc(e){return function(){var t=new Ua(e);return Es("Transitioneventcondition",t.normalize()),t}}function Rc(e){return function(){var t=new Va(e);return Es("WorkflowExecTimeout",t.normalize()),t}}var Mc=function(){function e(e,t){void 0===t&&(t=!1),this.state=e,this.isFirstState=t}return e.prototype.sourceCode=function(){var e=this.definitions();return this.transitions().reduce((function(e,t){return e+"\n"+t}),e)},e.prototype.definitions=function(){return this.definitionName()+"\n"+this.definitionType()+(void 0!==this.definitionDetails()?"\n"+this.definitionDetails():"")},e.prototype.transitions=function(){var e=[];return e.push.apply(e,this.startTransition()),e.push.apply(e,this.dataConditionsTransitions()),e.push.apply(e,this.eventConditionsTransition()),e.push.apply(e,this.errorTransitions()),e.push.apply(e,this.naturalTransition(this.stateKeyDiagram(this.state.name),this.state.transition)),e.push.apply(e,this.compensatedByTransition()),e.push.apply(e,this.endTransition()),e},e.prototype.stateKeyDiagram=function(e){return null==e?void 0:e.replace(/ /g,"_")},e.prototype.startTransition=function(){var e=[];if(this.isFirstState){var t=this.stateKeyDiagram(this.state.name);e.push(this.transitionDescription("[*]",t))}return e},e.prototype.dataConditionsTransitions=function(){var e=this,t=[],n=this.state;if(n.dataConditions){var r=this.state.name;n.dataConditions.forEach((function(n){var i=n;t.push.apply(t,e.naturalTransition(r,i.transition,i.condition)),n.end&&t.push(e.transitionDescription(r,"[*]",i.condition))})),t.push.apply(t,this.defaultConditionTransition(n))}return t},e.prototype.eventConditionsTransition=function(){var e=this,t=[],n=this.state;if(n.eventConditions){var r=this.state.name;n.eventConditions.forEach((function(n){var i=n;t.push.apply(t,e.naturalTransition(r,i.transition,i.eventRef)),n.end&&t.push(e.transitionDescription(r,"[*]"))})),t.push.apply(t,this.defaultConditionTransition(n))}return t},e.prototype.defaultConditionTransition=function(e){var t=[];return e.defaultCondition&&t.push.apply(t,this.naturalTransition(this.state.name,e.defaultCondition.transition,"default")),t},e.prototype.endTransition=function(){var e=[];if(this.state.end){var t=this.state.name,n=void 0;if(xs(this.state.end)){var r=this.state.end;r.produceEvents&&(n="Produced event = ["+r.produceEvents.map((function(e){return e.eventRef})).join(",")+"]")}e.push(this.transitionDescription(t,"[*]",n))}return e},e.prototype.naturalTransition=function(e,t,n){void 0===n&&(n=void 0);var r=[];if(t){var i="";xs(t)?i=t.nextState:"string"==typeof t&&(i=t),r.push(this.transitionDescription(e,i,n||void 0))}return r},e.prototype.errorTransitions=function(){var e=this,t=[];return this.state.onErrors&&this.state.onErrors.forEach((function(n){t.push.apply(t,e.naturalTransition(e.stateKeyDiagram(e.state.name),n.transition,n.errorRef))})),t},e.prototype.compensatedByTransition=function(){var e=[];return this.state.compensatedBy&&e.push.apply(e,this.naturalTransition(this.state.name,this.state.compensatedBy,"compensated by")),e},e.prototype.definitionDetails=function(){var e;switch(this.state.type){case"sleep":e=this.sleepStateDetails();break;case"event":break;case"operation":e=this.operationStateDetails();break;case"parallel":e=this.parallelStateDetails();break;case"switch":var t=this.state;if(t.dataConditions){e=this.dataBasedSwitchStateDetails();break}if(t.eventConditions){e=this.eventBasedSwitchStateDetails();break}throw new Error("Unexpected switch type; \n state value= "+JSON.stringify(this.state,null,4));case"inject":break;case"foreach":e=this.foreachStateDetails();break;case"callback":e=this.callbackStateDetails();break;default:throw new Error("Unexpected type= "+this.state.type+"; \n state value= "+JSON.stringify(this.state,null,4))}return this.state.usedForCompensation&&(e=e||"",e=this.stateDescription(this.stateKeyDiagram(this.state.name),"usedForCompensation\n")+e),e||void 0},e.prototype.definitionType=function(){var e=this.state.type;return this.stateDescription(this.stateKeyDiagram(this.state.name),"type",e.charAt(0).toUpperCase()+e.slice(1)+" State")},e.prototype.parallelStateDetails=function(){var e,t=this.state,n=[];return t.completionType&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Completion type",t.completionType)),t.branches&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Num. of branches",(null===(e=t.branches)||void 0===e?void 0:e.length)+"")),n.length>0?n.reduce((function(e,t){return e+"\n"+t})):void 0},e.prototype.eventBasedSwitchStateDetails=function(){return this.stateDescription(this.stateKeyDiagram(this.state.name),"Condition type","event-based")},e.prototype.dataBasedSwitchStateDetails=function(){return this.stateDescription(this.stateKeyDiagram(this.state.name),"Condition type","data-based")},e.prototype.operationStateDetails=function(){var e,t=this.state,n=[];return t.actionMode&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Action mode",t.actionMode)),t.actions&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Num. of actions",(null===(e=t.actions)||void 0===e?void 0:e.length)+"")),n.length>0?n.reduce((function(e,t){return e+"\n"+t})):void 0},e.prototype.sleepStateDetails=function(){var e=this.state;if(e.duration)return this.stateDescription(this.stateKeyDiagram(this.state.name),"Duration",e.duration)},e.prototype.foreachStateDetails=function(){var e,t=this.state,n=[];return t.inputCollection&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Input collection",t.inputCollection)),t.actions&&n.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Num. of actions",(null===(e=t.actions)||void 0===e?void 0:e.length)+"")),n.length>0?n.reduce((function(e,t){return e+"\n"+t})):void 0},e.prototype.callbackStateDetails=function(){var e=this.state,t=[];if(e.action&&e.action.functionRef){var n=e.action.functionRef,r="";xs(n)?r=n.refName:"string"==typeof n&&(r=n),t.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Callback function",r))}return e.eventRef&&t.push(this.stateDescription(this.stateKeyDiagram(this.state.name),"Callback event",e.eventRef)),t.length>0?t.reduce((function(e,t){return e+"\n"+t})):void 0},e.prototype.definitionName=function(){return this.stateKeyDiagram(this.state.name)+" : "+this.state.name},e.prototype.transitionDescription=function(e,t,n){return void 0===n&&(n=void 0),this.stateKeyDiagram(e)+" --\x3e "+this.stateKeyDiagram(t)+(n?" : "+n:"")},e.prototype.stateDescription=function(e,t,n){return e+" : "+t+(void 0!==n?" = "+n:"")},e}(),qc=function(){function e(e){this.workflow=e}return e.prototype.sourceCode=function(){return"stateDiagram-v2\n"+this.workflow.states.map((function(e,t){return new Mc(e,0===t).sourceCode()})).join("\n\n")},e}();e.MermaidDiagram=qc,e.Specification=Ba,e.ValidationError=t,e.WorkflowValidator=Pi,e.actionBuilder=function(){return Ii(Wa)},e.actiondatafilterBuilder=function(){return Ii(Ga)},e.authdefBuilder=function(){return Ii(Ja)},e.basicpropsdefBuilder=function(){return Ii(Ha)},e.bearerpropsdefBuilder=function(){return Ii(Ya)},e.branchBuilder=function(){return Ii(Qa)},e.callbackstateBuilder=function(){return Ii(Za)},e.continueasdefBuilder=function(){return Ii(Xa)},e.correlationDefBuilder=function(){return Ii(ec)},e.crondefBuilder=function(){return Ii(tc)},e.databasedswitchstateBuilder=function(){return Ii(nc)},e.defaultconditiondefBuilder=function(){return Ii(rc)},e.endBuilder=function(){return Ii(ic)},e.enddataconditionBuilder=function(){return Ii(oc)},e.enddeventconditionBuilder=function(){return Ii(sc)},e.errorBuilder=function(){return Ii(ac)},e.errordefBuilder=function(){return Ii(cc)},e.eventbasedswitchstateBuilder=function(){return Ii(dc)},e.eventdatafilterBuilder=function(){return Ii(uc)},e.eventdefBuilder=function(){return Ii(lc)},e.eventrefBuilder=function(){return Ii(fc)},e.eventstateBuilder=function(){return Ii(pc)},e.foreachstateBuilder=function(){return Ii(hc)},e.functionBuilder=function(){return Ii(mc)},e.functionrefBuilder=function(){return Ii(yc)},e.injectstateBuilder=function(){return Ii(vc)},e.metadataBuilder=function(){return Ii(gc)},e.oauth2propsdefBuilder=function(){return Ii(wc)},e.oneventsBuilder=function(){return Ii(bc)},e.operationstateBuilder=function(){return Ii($c)},e.parallelstateBuilder=function(){return Ii(kc)},e.produceeventdefBuilder=function(){return Ii(_c)},e.retrydefBuilder=function(){return Ii(jc)},e.scheduleBuilder=function(){return Ii(Sc)},e.sleepBuilder=function(){return Ii(Ec)},e.sleepstateBuilder=function(){return Ii(xc)},e.startdefBuilder=function(){return Ii(Cc)},e.stateExecTimeoutBuilder=function(){return Ii(Oc)},e.statedatafilterBuilder=function(){return Ii(Pc)},e.subflowrefBuilder=function(){return Ii(Ic)},e.timeoutsBuilder=function(){return Ii(Tc)},e.transitionBuilder=function(){return Ii(Ac)},e.transitiondataconditionBuilder=function(){return Ii(Nc)},e.transitioneventconditionBuilder=function(){return Ii(Dc)},e.validators=Oi,e.workflowBuilder=function(){return Ii(Ka)},e.workflowExecTimeoutBuilder=function(){return Ii(Rc)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
