"use strict";(self.webpackChunkred_hat_developer_hub_backstage_plugin_orchestrator_form_widgets=self.webpackChunkred_hat_developer_hub_backstage_plugin_orchestrator_form_widgets||[]).push([[879],{92218:(e,t,r)=>{r.r(t),r.d(t,{orchestratorFormApiFactory:()=>Q,orchestratorFormWidgetsPlugin:()=>X});var o=r(9490);const n=(0,o.createApiRef)({id:"plugin.orchestrator.form"});var i=r(18990),a=r(31085),s=r(95478),l=r.n(s),u=r(47566),d=r(46123),c=r.n(d),f=r(29362),p=r.n(f);function v(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const h=async(e,t,r=!1,o=!1)=>{const n=p()(t),i=await n.evaluate(e);if(o&&!i)return[];if("string"==typeof i&&r)return[i];if(Array.isArray(i)&&i.every((e=>"string"==typeof e)))return[...i];throw new Error(`Unexpected result of "${t}" selector, expected string[] type. Value ${JSON.stringify(i)}`)},m=async(e,t)=>{const r=p()(t),o=await r.evaluate(e);if("string"==typeof o)return o;throw new Error(`Unexpected result of "${t}" selector, expected string type. Value "${JSON.stringify(o)}"`)},g=()=>{const e=(0,o.useApp)(),t=(0,o.useApiHolder)(),r=(0,o.useApi)(o.configApiRef),n=(0,o.useApi)(o.identityApiRef),i=(0,o.useApi)(o.githubAuthApiRef),a=(0,o.useApi)(o.atlassianAuthApiRef),l=(0,o.useApi)(o.googleAuthApiRef),u=(0,o.useApi)(o.microsoftAuthApiRef),d=(0,o.useApi)(o.gitlabAuthApiRef),f=(0,s.useMemo)((()=>({githubAuthApi:i,atlassianAuthApi:a})),[i,a]),p=(0,s.useMemo)((()=>({googleAuthApi:l,microsoftAuthApi:u,gitlabAuthApi:d})),[l,u,d]),v=(0,s.useMemo)((()=>e.getPlugins()),[e]);return(0,s.useCallback)((async(e,o,i,a)=>{if(!e)throw new Error("Template unit can not be empty");const s=e.substring(0,e.indexOf(".")),l=e.substring(e.indexOf(".")+1);if("current"===s)return c()(o,l);if("backend"===s)return((e,t)=>{if("baseUrl"===t)return e.getString("backend.baseUrl");throw new Error(`Unknown template key "${t}" in "backend"`)})(r,l);if("rjsfConfig"===s)return r.getOptionalString(`orchestrator.rjsf-widgets.${l}`);if("identityApi"===s)return await(async(e,t)=>{if("token"===t)return(await e.getCredentials()).token;if("userEntityRef"===t)return(await e.getBackstageIdentity()).userEntityRef;if("profileEmail"===t)return(await e.getProfileInfo()).email;if("displayName"===t)return(await e.getProfileInfo()).displayName;throw new Error(`Unknown template key "${t}" in "identityApi"`)})(n,l);if("customAuthApi"===s)return await(async(e,t,r)=>{var o;const n=r.substring(0,r.lastIndexOf(".")),i=r.substring(r.lastIndexOf(".")+1),a=null===(o=t.flatMap((e=>Array.from(e.getApis()))).filter((e=>e.api.id===n)).at(0))||void 0===o?void 0:o.api;if(!a)throw new Error(`Unknown custom auth provider API of id "${n}". The provider id must match its ApiRef id, unit example: customAuthApi.my.auth.github-two.token , so: [KEY_FAMILY].[PLUGIN_ID].[PROVIDER_ID].[KEY] for provider id "my.auth.github-two".`);const s=e.get(a);if(!s)throw new Error(`No implementation available for ${a}`);if("token"===i){if(s.getAccessToken)return await s.getAccessToken();throw new Error(`The ${a} API does not provide a getAccessToken method.`)}if("openIdToken"===i){if(s.getIdToken)return await s.getIdToken();throw new Error(`The ${a} API does not provide a OpenIdConnectApi method.`)}if("profileEmail"===i){var l;if(s.getProfile)return null===(l=await s.getProfile())||void 0===l?void 0:l.email;throw new Error(`The ${a} API does not provide a getProfile method.`)}if("profileName"===i){var u;if(s.getProfile)return null===(u=await s.getProfile())||void 0===u?void 0:u.displayName;throw new Error(`The ${a} API does not provide a getProfile method.`)}throw new Error(`Unknown template key "${i}" for custom provider "${n}" API in "${r}"`)})(t,v,l);if(f[s])return await(async(e,t,r)=>{if("token"===r)return await e[t].getAccessToken();var o,n;if("profileEmail"===r)return null===(o=await e[t].getProfile())||void 0===o?void 0:o.email;if("profileName"===r)return null===(n=await e[t].getProfile())||void 0===n?void 0:n.displayName;throw new Error(`Unknown template key "${r}" in "${t}"`)})(f,s,l);if(p[s])return await(async(e,t,r)=>{if("token"===r)return await e[t].getAccessToken();if("openIdToken"===r)return await e[t].getIdToken();var o,n;if("profileEmail"===r)return null===(o=await e[t].getProfile())||void 0===o?void 0:o.email;if("profileName"===r)return null===(n=await e[t].getProfile())||void 0===n?void 0:n.displayName;throw new Error(`Unknown template key "${r}" in "${t}"`)})(p,s,l);if((e=>e.startsWith("fetch:response:"))(e)){if(!(null==a?void 0:a[e]))throw new Error(`Template evaluation error: The ui property '${e}' does not exist in the schema ui:props.`);if(!i)throw new Error(`Template evaluation error: Attempting to access fetched data for ui property '${e}', but the fetch response is undefined.`);return await m(i,a[e])}throw new Error(`Unknown template unit "${e}"`)}),[r,n,f,p,t,v])};var y=r(45250);const w=[],A=(e,t={},r)=>{const[o,n]=(0,s.useState)();return(0,s.useEffect)((()=>{r?(async()=>{const i=(await Promise.all(r.map((r=>e(r,t).catch((e=>{throw console.error("Can not evaluate retrigger condition: ",r,e),e})))))).map((e=>null==e?void 0:e.toString()));(0,y.isEqual)(o,i)||n(i)})():(!o||o.length>0)&&n(w)}),[r,o,e,t]),o},b=(e,t)=>{if(!t)return e;if(t instanceof Error&&t.message)return`${e}: ${t.message}`;const r=String(t);return r?`${e}: ${r}`:e},x="___undefined___",$=async e=>{const{template:t,key:r,unitEvaluator:o,formData:n,responseData:i,uiProps:a,iteration:s=0}=e;if(null==t)throw new Error(`Template can not be undefined, key: ${r}`);if("string"!=typeof t)return t;let l;const u=t.indexOf("$${{");if(u<0)l=t;else{l=t.substring(0,u);const r=t.indexOf("}}");if(r<0)throw new Error("Template unit is not closed by }}");const d=t.length<=r+2;let c=await o(t.substring(u+4,r),n,i,a);if(void 0===c&&(c=x),"object"==typeof c&&d&&0===u&&0===s)l=c;else if("object"==typeof c?l+=JSON.stringify(c):l?l+=c:l=c,!d){const o=await $({...e,template:t.substring(r+2),iteration:s+1});["string","boolean","number"].includes(typeof o)?l+=(null!=o?o:"").toString():l+=JSON.stringify(o)}}return l},E=async e=>{const{template:t,...r}=e,{key:o}=r;if("boolean"==typeof t||"number"==typeof t)return t;if("string"==typeof t)return $({...e,template:t.toString()});if(Array.isArray(t))return await Promise.all(t.map((async t=>Array.isArray(t)?[...await Promise.all(t.map((t=>E({...e,template:t}))))]:v(t)?E({...e,template:t}):$({template:t,...r}))));if(v(t)){const r=await Promise.all(Object.keys(t).map((r=>E({...e,template:t[r]})))),o={};return Object.keys(t).forEach(((e,t)=>{o[e]=r[t]})),o}throw new Error(`Template can be either a string, number, boolean, object or an array, key: ${o}`)},S=["GET","POST"],k=async(e,t,r,o)=>{var n;const i={},a=null===(n=e[`${t}:method`])||void 0===n?void 0:n.toString().toLocaleUpperCase();if(a){if(!S.includes(a))throw new Error(`Unsupported HTTP method, use one of ${S.join(", ")}`);i.method=a}const s=e[`${t}:body`];if(s){if("POST"!==a)throw new Error(`${t}:body can be used with POST requests only`);if("object"!=typeof s)throw new Error(`${t}:body must be object`);{const e=s,t={},n=Object.keys(s),a=await Promise.all(n.map((t=>E({unitEvaluator:r,key:t,formData:o,template:e[t]}))));n.forEach(((e,r)=>{a[r]&&a[r]!==x&&(t[e]=a[r])}));const l=JSON.stringify(t);i.body=l}}const l={"Content-Type":"application/json"},u=e[`${t}:headers`];if(u){if("object"!=typeof u)throw new Error("fetch:body must be object for POST requests");{const e=u,t=Object.keys(u),n=await Promise.all(t.map((t=>{const n=e[t];if("string"!=typeof n)throw new Error(`HTTP header must be a string. See "${t}" header.`);return $({unitEvaluator:r,key:t,formData:o,template:n})})));t.forEach(((e,t)=>{const r=n[t];r&&r!==x&&(l[e]="string"==typeof r?r:JSON.stringify(r))}))}}return i.headers=l,i};var j=r(22771);const T=(e,t,r)=>{const n=(0,o.useApi)(o.fetchApiRef),[i,a]=(0,s.useState)(),[l,u]=(0,s.useState)(!0),[d,c]=(0,s.useState)(),f=t["fetch:url"],p=(({uiProps:e,prefix:t,formData:r,setError:o})=>{const[n,i]=(0,s.useState)(),a=g();return(0,s.useEffect)((()=>{k(e,t,a,r).then((e=>i((t=>(0,y.isEqual)(t,e)?t:e)))).catch((e=>o(e.toString())))}),[e,a,r,t,o]),n})({uiProps:t,prefix:"fetch",formData:e,setError:a}),v=(({template:e,key:t,formData:r,setError:o})=>{const n=g(),[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{$({template:e,key:t,unitEvaluator:n,formData:r}).then(a).catch((e=>o(e.toString())))}),[e,n,r,t,o]),i})({template:null!=f?f:"",key:"fetch:url",formData:e,setError:a});return(0,j.A)((()=>{f&&v&&p&&r?(async()=>{try{if(a(void 0),"string"!=typeof v)return console.error("The fetch:url is not evaluated to a string: ",{fetchUrl:f,evaluatedFetchUrl:v}),void a(`The fetch:url is not evaluated to a string: "${f}"`);u(!0);const e=await n.fetch(v,p);if(!e.ok)throw new Error(`Request ${v} returned status ${e.status}. Status text: ${e.statusText}.`);const t=await e.json();if(!t)throw new Error("Empty response received");if("object"!=typeof t)throw new Error("JSON object expected");c(t)}catch(e){const t=`Failed to fetch data for url ${f}.`;console.error(t,e),a(b(t,e))}finally{u(!1)}})():u(!1)}),1e3,[v,p,n,f,r]),{data:d,error:i,loading:l}};var P=r(1321);const I=(0,P.n9)()((e=>({error:{color:e.palette.error.main}}))),C=({text:e,id:t})=>{const{classes:r}=I();return(0,a.jsx)("div",{className:r.error,"data-testid":`${t}-error-text`,children:e})};var O=r(54357),U=r(19478),N=r(27860),D=r(82152);const _=(0,P.n9)()((e=>({autocompleteOptionSelected:{backgroundColor:`${e.palette.action.selected} !important`}})));var R=r(2558),M=r(46702),F=r(42722),B=r(92824),J=r(37667);const V=(0,P.n9)()((e=>({menuItem:{display:"flex !important",justifyContent:"flex-start !important",paddingTop:"8px !important",paddingBottom:"8px !important",paddingLeft:"16px !important"},menuItemSelected:{backgroundColor:`${e.palette.action.selected} !important`}})));var W=r(113);const q=(0,P.n9)()((e=>{var t,r;return{chip:{borderRadius:"16px !important",outline:`1px solid ${null!==(r=null===(t=e.rhdh)||void 0===t?void 0:t.cardBorderColor)&&void 0!==r?r:"#A3A3A3"} !important`}}}));var H=r(17887);const z=(e,t,r)=>{const o=t.split(".",2);if(1===o.length)e[o[0]]=r;else{var n;const t=null!==(n=e[o[0]])&&void 0!==n?n:{};e[o[0]]=t,z(t,o[1],r)}},L=(e,t,r,o)=>{let n=o;o&&(n+=".");const i=Object.keys(e).map((o=>{var i;if("object"==typeof e[o])return(null===(i=e[o])||void 0===i?void 0:i["ui:widget"])?[r(`${n}${o}`,e[o])]:L(e[o],null==t?void 0:t[o],r,`${n}${o}`)})).filter(Boolean);return(0,y.flatten)(i)},Y=(e,t)=>t,G={SchemaUpdater:e=>{var t,r;const o=g(),{id:n,formContext:i}=e,l=null==i?void 0:i.formData,d=null==i?void 0:i.updateSchema,c=(0,s.useMemo)((()=>{var t,r;return null!==(r=null===(t=e.options)||void 0===t?void 0:t.props)&&void 0!==r?r:{}}),[null===(t=e.options)||void 0===t?void 0:t.props]),f=null===(r=c["fetch:response:value"])||void 0===r?void 0:r.toString(),[h,m]=(0,s.useState)(),y=A(o,l,c["fetch:retrigger"]),{data:w,error:b,loading:x}=T(null!=l?l:{},c,y);var $;return(0,s.useEffect)((()=>{w&&(d?(async()=>{let t=w;f&&(t=await(async(e,t)=>{const r=p()(t),o=await r.evaluate(e);if(v(o))return o;throw new Error(`Unexpected result of "${t}" selector, expected object type. Value "${JSON.stringify(o)}"`)})(w,f)),Object.keys(t).forEach((e=>{var r;(null===(r=t[e])||void 0===r?void 0:r.type)||(console.error("JSON response malformed: ",t),m(`JSON response malformed for SchemaUpdater, missing "type" field for "${e}" key.`))}));try{d(t)}catch(t){console.error("Error when updating schema",e.id,t),m(`Failed to update schema update by the ${e.id} SchemaUpdater`)}})():m("Missing the updateSchema() function in form context."))}),[w,e.id,d,f]),(null!=h?h:b)?(0,a.jsx)(C,{text:null!==($=null!=h?h:b)&&void 0!==$?$:"",id:n}):x?(0,a.jsx)(u.A,{size:20}):(0,a.jsx)(a.Fragment,{})},ActiveTextInput:e=>{var t,r,o;const{classes:n}=_(),i=g(),{id:l,label:d,value:c,onChange:f,formContext:p}=e,v=null==p?void 0:p.formData,y=!!(null==p?void 0:p.getIsChangedByUser(l)),w=null==p?void 0:p.setIsChangedByUser,b=(0,s.useMemo)((()=>{var t,r;return null!==(r=null===(t=e.options)||void 0===t?void 0:t.props)&&void 0!==r?r:{}}),[null===(t=e.options)||void 0===t?void 0:t.props]),x=!!e.readonly,$=null===(r=b["fetch:response:value"])||void 0===r?void 0:r.toString(),E=null===(o=b["fetch:response:autocomplete"])||void 0===o?void 0:o.toString(),[S]=(0,s.useState)($?void 0:`The fetch:response:value needs to be set for ${e.id}.`),[k,j]=(0,s.useState)(),P=A(i,v,b["fetch:retrigger"]),{data:I,error:R,loading:M}=T(null!=v?v:{},b,P),F=(0,s.useCallback)(((e,t)=>{t&&w&&w(l,!0),f(e)}),[f,l,w]);var B;if((0,s.useEffect)((()=>{I&&$&&(async()=>{if(!y){const e=await m(I,$);c!==e&&e&&null!==e&&"null"!==e&&F(e,!1)}if(E){const e=await h(I,E);j(e)}})()}),[$,E,I,e.id,c,F,y]),null!=S?S:R)return(0,a.jsx)(C,{text:null!==(B=null!=S?S:R)&&void 0!==B?B:"",id:l});if(M)return(0,a.jsx)(u.A,{size:20});if(k){const e=e=>(0,a.jsx)(N.A,{...e,"data-testid":`${l}-textfield`,onChange:e=>F(e.target.value,!0),label:d,disabled:x});return(0,a.jsx)(U.A,{variant:"outlined",fullWidth:!0,children:(0,a.jsx)(D.A,{options:k,"data-testid":`${l}-autocomplete`,value:c,onChange:(e,t)=>F(t,!0),disabled:x,renderInput:e,renderOption:(e,t,r)=>(0,s.createElement)("li",{...e,key:t,"data-testid":`${l}-autocomplete-option-${t}`,className:(0,O.A)(r.selected&&n.autocompleteOptionSelected,e.className)},t)})})}return(0,a.jsx)(U.A,{variant:"outlined",fullWidth:!0,children:(0,a.jsx)(N.A,{value:null!=c?c:"","data-testid":`${l}-textfield`,onChange:e=>F(e.target.value,!0),label:d})})},ActiveText:e=>{const{id:t,options:r,formContext:o}=e;var n;const i=null!==(n=null==r?void 0:r.props)&&void 0!==n?n:{},d=null==o?void 0:o.formData;var c;const{text:f,error:p,loading:v}=((e,t,r,o)=>{const n=g(),i=A(n,t,r["fetch:retrigger"]),{data:a,error:u,loading:d}=T(t,r,i),[c,f]=(0,s.useState)(),[p,v]=l().useState(!0),[h,m]=l().useState();return(0,j.A)((()=>{(async()=>{if(i&&!d&&!u)try{v(!0),f(void 0);const i=await $({template:e,key:o,unitEvaluator:n,formData:t,responseData:a,uiProps:r});m(null==i?void 0:i.toString())}catch(t){const r=`Failed to evaluate text '${e}' for field ${o}`,n=b(r,t);f(n),console.error(r,t)}finally{v(!1)}})()}),1e3,[i,u,d,o,a,t,r,n,e]),{text:h,loading:p||d,error:null!=c?c:u}})(null!==(c=i["ui:text"])&&void 0!==c?c:"",null!=d?d:{},i,t);return i["ui:text"]?p?(0,a.jsx)(C,{id:t,text:p}):(0,a.jsx)(M.A,{"data-testid":t,children:v?(0,a.jsx)(u.A,{size:20}):(0,a.jsx)(R.h,{content:f||""})}):(0,a.jsx)(C,{id:t,text:`Field ${t} is configured to use ActiveText widget, but doesn't contain property ui:text.`})},ActiveDropdown:e=>{var t,r,o;const{classes:n}=V(),i=g(),{id:l,label:d,value:c,onChange:f,formContext:p}=e,v=null==p?void 0:p.formData,m=!!(null==p?void 0:p.getIsChangedByUser(l)),y=null==p?void 0:p.setIsChangedByUser,w=`${e.id}-label`,b=(0,s.useMemo)((()=>{var t,r;return null!==(r=null===(t=e.options)||void 0===t?void 0:t.props)&&void 0!==r?r:{}}),[null===(t=e.options)||void 0===t?void 0:t.props]),x=!!e.readonly,$=null===(r=b["fetch:response:label"])||void 0===r?void 0:r.toString(),E=null===(o=b["fetch:response:value"])||void 0===o?void 0:o.toString(),[S,k]=(0,s.useState)($&&E?void 0:`Both fetch:response:label and fetch:response:value needs to be set for ${e.id}.`),[j,P]=(0,s.useState)(),[I,N]=(0,s.useState)(),D=A(i,v,b["fetch:retrigger"]),{data:_,error:R,loading:M}=T(null!=v?v:{},b,D);(0,s.useEffect)((()=>{_&&$&&E&&(async()=>{const t=await h(_,$),r=await h(_,E);t.length===r.length?(P(t),N(r)):k(`Selected labels and values have different count (${t.length} and ${r.length}) for ${e.id}`)})()}),[$,E,_,e.id]);const W=(0,s.useCallback)(((e,t)=>{t&&y&&y(l,!0),f(e)}),[f,l,y]);var q;return(0,s.useEffect)((()=>{!m&&I&&I.length>0&&W(I[0],!1)}),[W,c,I,m]),(null!=S?S:R)?(0,a.jsx)(C,{text:null!==(q=null!=S?S:R)&&void 0!==q?q:"",id:l}):!M&&j&&I?(0,a.jsxs)(U.A,{variant:"outlined",fullWidth:!0,children:[(0,a.jsx)(F.A,{id:w,children:d}),(0,a.jsx)(J.A,{labelId:w,id:l,"data-testid":l,value:c,label:d,disabled:x,onChange:e=>W(e.target.value,!0),MenuProps:{PaperProps:{sx:{maxHeight:"20rem"}}},children:j.map(((e,t)=>(0,a.jsx)(B.A,{value:I[t],"data-testid":`${l}-menuitem-${I[t]}`,className:(0,O.A)(n.menuItem,c===I[t]&&n.menuItemSelected),children:e},I[t])))})]}):(0,a.jsx)(u.A,{size:20})},ActiveMultiSelect:e=>{var t,r,o;const{classes:n}=q(),i=g(),{id:l,name:d,label:c,value:f,onChange:p,formContext:v}=e,m=f,y=null==v?void 0:v.formData,w=!!(null==v?void 0:v.getIsChangedByUser(l)),b=null==v?void 0:v.setIsChangedByUser,x=(0,s.useMemo)((()=>{var t;return null!==(t=e.options.props)&&void 0!==t?t:{}}),[e.options.props]),$=!!e.readonly,E=null===(t=x["fetch:response:autocomplete"])||void 0===t?void 0:t.toString(),S=null===(r=x["fetch:response:mandatory"])||void 0===r?void 0:r.toString(),k=null===(o=x["fetch:response:value"])||void 0===o?void 0:o.toString(),j="true"===x["ui:allowNewItems"],[P]=(0,s.useState)(E?void 0:`Missing fetch:response:autocomplete selector for ${l}`),[I,_]=(0,s.useState)(),[R,F]=(0,s.useState)(),[B,J]=(0,s.useState)(),V=(0,s.useMemo)((()=>j&&I?[...new Set([I,...null!=R?R:[]])]:R||[]),[I,R,j]),H=A(i,y,x["fetch:retrigger"]),{data:z,error:L,loading:Y}=T(null!=y?y:{},x,H);(0,s.useEffect)((()=>{z&&(async()=>{if(E){const e=await h(z,E,!0,!0);F(e)}let e=[];w||k&&(e=await h(z,k,!0,!0));let t=[];S&&(t=await h(z,S,!0),J(t)),t.every((e=>m.includes(e)))&&e.every((e=>m.includes(e)))||p([...new Set([...t,...m,...e])])})()}),[E,S,k,w,z,e.id,m,p]);var G;return(null!=P?P:L)?(0,a.jsx)(C,{text:null!==(G=null!=P?P:L)&&void 0!==G?G:"",id:l}):Y?(0,a.jsx)(u.A,{size:20}):R?(0,a.jsx)(M.A,{children:(0,a.jsx)(U.A,{variant:"outlined",fullWidth:!0,children:(0,a.jsx)(D.A,{multiple:!0,"data-testid":`${l}-autocomplete`,disabled:$,options:V,isOptionEqualToValue:(e,t)=>e===t,value:m,filterSelectedOptions:!0,onChange:(e,t)=>{b&&b(l,!0),_(void 0),p(t)},renderOption:(e,t)=>(0,s.createElement)("li",{...e,key:t,"data-testid":`${l}-autocomplete-option-${t}`},t),renderInput:e=>(0,a.jsx)(N.A,{...e,"data-testid":`${l}-text-field`,name:d,variant:"outlined",label:c,onChange:e=>{_(e.target.value)}}),renderTags:(e,t)=>e.map(((e,r)=>{const o=t({index:r}),{className:i,onDelete:s,key:u,...d}=o;return(0,a.jsx)(M.A,{title:e,children:(0,a.jsx)(W.A,{"data-testid":`${l}-chip-${e}`,variant:"outlined",label:e,className:(0,O.A)(o.className,n.chip),onDelete:(null==B?void 0:B.includes(e))?void 0:s,...d})},e)}))})})}):(0,a.jsx)(a.Fragment,{})}};class K{constructor(){(0,i._)(this,"getFormDecorator",(()=>(console.log("Using FormWidgetsApi by RHDH orchestrator-form-widgets."),e=>t=>{const r=(()=>{const e=(0,o.useApi)(o.fetchApiRef),t=g();return async(r,o)=>{const n={},i=L(o,r,(async(o,i)=>{var a,s,l;const u=null!==(l=null==i?void 0:i["ui:props"])&&void 0!==l?l:{},d=null===(a=u["validate:url"])||void 0===a?void 0:a.toString();var c;if(d&&["ActiveTextInput","ActiveDropdown","ActiveMultiSelect"].includes(null!==(c=null==i||null===(s=i["ui:widget"])||void 0===s?void 0:s.toString())&&void 0!==c?c:"")&&void 0!==(0,y.get)(r,o)){const i=await $({template:d,key:"validate:url",unitEvaluator:t,formData:r});if("string"!=typeof i)console.error("The validate:url is not evaluated to a string: ",{validateUrl:d,evaluatedValidateUrl:i}),z(n,o,{[H.s2]:`The validate:url is not evaluated to a string: "${d}"`});else{const a=await k(u,"validate",t,r),s=await e.fetch(i,a);if(200!==s.status){const e=await s.json();Object.keys(e).forEach((t=>{const r=e[t];if(r){const e=Array.isArray(r)?r:[r];z(n,o,{[H.s2]:e.map((e=>null==e?void 0:e.toString()))})}}))}}}}),"");return await Promise.all(i),n}})();return(0,a.jsx)(e,{widgets:G,formContext:t,customValidate:Y,getExtraErrors:r})})))}}const Q=(0,o.createApiFactory)({api:n,deps:{},factory:()=>new K}),X=(0,o.createPlugin)({id:"orchestrator-form-widgets",routes:{},apis:[Q]})}}]);
//# sourceMappingURL=exposed-PluginRoot.f3edccbd.chunk.js.map