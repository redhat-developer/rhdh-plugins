{"version":3,"file":"filter-table-data.esm.js","sources":["../../src/utils/filter-table-data.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { TableColumn } from '@backstage/core-components';\n\n/**\n * Filter the given `data` rows with the Backstage TableColumn `columns` configuration\n * and the `search` string.\n *\n * It ignores upper/lower case similar to the underlaying @material-table/core implementation:\n * https://github.com/material-table-core/core/blob/v3.2.5/src/utils/data-manager.js#L808-L811\n */\nexport const filterTableData = <T extends Record<string, any>>({\n  data,\n  columns,\n  searchText,\n}: {\n  data: T[];\n  columns: TableColumn<T>[];\n  searchText?: string | null;\n}): T[] => {\n  if (!data || !data.length || !columns || !columns.length || !searchText) {\n    return data || [];\n  }\n\n  const upperCaseSearch = searchText.toLocaleUpperCase('en-US');\n\n  return data.filter(row => {\n    const fieldValues = columns.map(column =>\n      column.field ? row[column.field] : null,\n    );\n\n    return fieldValues.some(fieldValue =>\n      fieldValue\n        ?.toString()\n        .toLocaleUpperCase('en-US')\n        .includes(upperCaseSearch),\n    );\n  });\n};\n"],"names":[],"mappings":"AAwBO,MAAM,kBAAkB,CAAgC;AAAA,EAC7D,IAAA;AAAA,EACA,OAAA;AAAA,EACA;AACF,CAIW,KAAA;AACT,EAAI,IAAA,CAAC,IAAQ,IAAA,CAAC,IAAK,CAAA,MAAA,IAAU,CAAC,OAAA,IAAW,CAAC,OAAA,CAAQ,MAAU,IAAA,CAAC,UAAY,EAAA;AACvE,IAAA,OAAO,QAAQ,EAAC;AAAA;AAGlB,EAAM,MAAA,eAAA,GAAkB,UAAW,CAAA,iBAAA,CAAkB,OAAO,CAAA;AAE5D,EAAO,OAAA,IAAA,CAAK,OAAO,CAAO,GAAA,KAAA;AACxB,IAAA,MAAM,cAAc,OAAQ,CAAA,GAAA;AAAA,MAAI,YAC9B,MAAO,CAAA,KAAA,GAAQ,GAAI,CAAA,MAAA,CAAO,KAAK,CAAI,GAAA;AAAA,KACrC;AAEA,IAAA,OAAO,WAAY,CAAA,IAAA;AAAA,MAAK,CAAA,UAAA,KACtB,YACI,QAAS,EAAA,CACV,kBAAkB,OAAO,CAAA,CACzB,SAAS,eAAe;AAAA,KAC7B;AAAA,GACD,CAAA;AACH;;;;"}