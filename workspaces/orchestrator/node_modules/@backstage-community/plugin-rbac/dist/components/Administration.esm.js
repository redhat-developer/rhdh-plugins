import React from 'react';
import { useAsync } from 'react-use';
import { SidebarItem } from '@backstage/core-components';
import { useApi, configApiRef } from '@backstage/core-plugin-api';
import RbacIcon from '@mui/icons-material/VpnKeyOutlined';
import { rbacApiRef } from '../api/RBACBackendClient.esm.js';

const Administration = () => {
  const rbacApi = useApi(rbacApiRef);
  const { loading: isUserLoading, value: result } = useAsync(
    async () => await rbacApi.getUserAuthorization(),
    []
  );
  const config = useApi(configApiRef);
  const isRBACPluginEnabled = config.getOptionalBoolean("permission.enabled");
  if (!isUserLoading && isRBACPluginEnabled) {
    return result?.status === "Authorized" ? /* @__PURE__ */ React.createElement(SidebarItem, { text: "RBAC", to: "rbac", icon: RbacIcon }) : null;
  }
  return null;
};

export { Administration };
//# sourceMappingURL=Administration.esm.js.map
