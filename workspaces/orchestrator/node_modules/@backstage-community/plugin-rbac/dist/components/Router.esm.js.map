{"version":3,"file":"Router.esm.js","sources":["../../src/components/Router.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { Route, Routes } from 'react-router-dom';\n\nimport { ErrorPage } from '@backstage/core-components';\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { RequirePermission } from '@backstage/plugin-permission-react';\n\nimport {\n  policyEntityCreatePermission,\n  policyEntityUpdatePermission,\n} from '@backstage-community/plugin-rbac-common';\n\nimport { createRoleRouteRef, editRoleRouteRef, roleRouteRef } from '../routes';\nimport { CreateRolePage } from './CreateRole/CreateRolePage';\nimport { EditRolePage } from './CreateRole/EditRolePage';\nimport { RbacPage } from './RbacPage';\nimport { RoleOverviewPage } from './RoleOverview/RoleOverviewPage';\nimport { ToastContextProvider } from './ToastContext';\n\n/**\n *\n * @public\n */\nexport const Router = ({ useHeader = true }: { useHeader?: boolean }) => {\n  const config = useApi(configApiRef);\n  const isRBACPluginEnabled = config.getOptionalBoolean('permission.enabled');\n\n  if (!isRBACPluginEnabled) {\n    return (\n      <ErrorPage\n        status=\"404\"\n        statusMessage=\"Enable the RBAC backend plugin to use this feature.\"\n        additionalInfo=\"To enable RBAC, set `permission.enabled` to `true` in the app-config file.\"\n      />\n    );\n  }\n\n  return (\n    <ToastContextProvider>\n      <Routes>\n        <Route path=\"/\" element={<RbacPage useHeader={useHeader} />} />\n        <Route path={roleRouteRef.path} element={<RoleOverviewPage />} />\n        <Route\n          path={createRoleRouteRef.path}\n          element={\n            <RequirePermission\n              permission={policyEntityCreatePermission}\n              resourceRef={policyEntityCreatePermission.resourceType}\n            >\n              <CreateRolePage />\n            </RequirePermission>\n          }\n        />\n        <Route\n          path={editRoleRouteRef.path}\n          element={\n            <RequirePermission\n              permission={policyEntityUpdatePermission}\n              resourceRef={policyEntityUpdatePermission.resourceType}\n            >\n              <EditRolePage />\n            </RequirePermission>\n          }\n        />\n      </Routes>\n    </ToastContextProvider>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;AAsCO,MAAM,MAAS,GAAA,CAAC,EAAE,SAAA,GAAY,MAAoC,KAAA;AACvE,EAAM,MAAA,MAAA,GAAS,OAAO,YAAY,CAAA;AAClC,EAAM,MAAA,mBAAA,GAAsB,MAAO,CAAA,kBAAA,CAAmB,oBAAoB,CAAA;AAE1E,EAAA,IAAI,CAAC,mBAAqB,EAAA;AACxB,IACE,uBAAA,KAAA,CAAA,aAAA;AAAA,MAAC,SAAA;AAAA,MAAA;AAAA,QACC,MAAO,EAAA,KAAA;AAAA,QACP,aAAc,EAAA,qDAAA;AAAA,QACd,cAAe,EAAA;AAAA;AAAA,KACjB;AAAA;AAIJ,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,4CACE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA,sCACE,KAAM,EAAA,EAAA,IAAA,EAAK,GAAI,EAAA,OAAA,kBAAU,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,WAAsB,CAAI,EAAA,CAAA,kBAC5D,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAM,IAAM,EAAA,YAAA,CAAa,MAAM,OAAS,kBAAA,KAAA,CAAA,aAAA,CAAC,gBAAiB,EAAA,IAAA,CAAA,EAAI,CAC/D,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,MAAM,kBAAmB,CAAA,IAAA;AAAA,MACzB,OACE,kBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,iBAAA;AAAA,QAAA;AAAA,UACC,UAAY,EAAA,4BAAA;AAAA,UACZ,aAAa,4BAA6B,CAAA;AAAA,SAAA;AAAA,4CAEzC,cAAe,EAAA,IAAA;AAAA;AAClB;AAAA,GAGJ,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,KAAA;AAAA,IAAA;AAAA,MACC,MAAM,gBAAiB,CAAA,IAAA;AAAA,MACvB,OACE,kBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,iBAAA;AAAA,QAAA;AAAA,UACC,UAAY,EAAA,4BAAA;AAAA,UACZ,aAAa,4BAA6B,CAAA;AAAA,SAAA;AAAA,4CAEzC,YAAa,EAAA,IAAA;AAAA;AAChB;AAAA,GAGN,CACF,CAAA;AAEJ;;;;"}