{"version":3,"file":"PoliciesCheckboxGroup.esm.js","sources":["../../../src/components/CreateRole/PoliciesCheckboxGroup.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport Checkbox from '@mui/material/Checkbox';\nimport FormControl from '@mui/material/FormControl';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormGroup from '@mui/material/FormGroup';\nimport FormLabel from '@mui/material/FormLabel';\n\nimport { PermissionsData } from '../../types';\nimport { RowPolicy } from './types';\n\nexport const PoliciesCheckboxGroup = ({\n  permissionPoliciesRowData,\n  rowName,\n  onChangePolicy,\n}: {\n  permissionPoliciesRowData: PermissionsData;\n  rowName: string;\n\n  onChangePolicy: (isChecked: boolean, policyIndex: number) => void;\n}) => {\n  return (\n    <FormControl\n      required\n      style={{\n        justifyContent: 'flex-start',\n        gap: '1px',\n        width: '402px',\n        flexGrow: '1',\n        marginBottom: '25px',\n      }}\n    >\n      <FormLabel\n        style={{\n          fontWeight: 800,\n          fontSize: '0.8rem',\n        }}\n      >\n        What actions they can do?\n      </FormLabel>\n      <FormGroup\n        style={{\n          display: 'flex',\n          gap: '7px',\n          flexDirection: 'row',\n          paddingLeft: '9px',\n        }}\n      >\n        {permissionPoliciesRowData.policies.map(\n          (p: RowPolicy, index: number, self) => {\n            const labelCheckedArray = self.filter(\n              val => val.effect === 'allow',\n            );\n            const labelCheckedCount = labelCheckedArray.length;\n            return (\n              <FormControlLabel\n                key={p.policy}\n                disabled={\n                  !(\n                    permissionPoliciesRowData.plugin &&\n                    permissionPoliciesRowData.permission\n                  ) ||\n                  permissionPoliciesRowData.policies.length === 1 ||\n                  (labelCheckedCount === 1 &&\n                    labelCheckedArray[0].policy === p.policy)\n                }\n                label={p.policy}\n                name={`${rowName}.policies[${index}].policy`}\n                control={\n                  <Checkbox\n                    checked={p.effect === 'allow'}\n                    name={`${rowName}.policies[${index}].policy-${p.policy}`}\n                    onChange={e => onChangePolicy(e.target.checked, index)}\n                    color=\"primary\"\n                  />\n                }\n              />\n            );\n          },\n        )}\n      </FormGroup>\n    </FormControl>\n  );\n};\n"],"names":[],"mappings":";;;;;;;AA0BO,MAAM,wBAAwB,CAAC;AAAA,EACpC,yBAAA;AAAA,EACA,OAAA;AAAA,EACA;AACF,CAKM,KAAA;AACJ,EACE,uBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,WAAA;AAAA,IAAA;AAAA,MACC,QAAQ,EAAA,IAAA;AAAA,MACR,KAAO,EAAA;AAAA,QACL,cAAgB,EAAA,YAAA;AAAA,QAChB,GAAK,EAAA,KAAA;AAAA,QACL,KAAO,EAAA,OAAA;AAAA,QACP,QAAU,EAAA,GAAA;AAAA,QACV,YAAc,EAAA;AAAA;AAChB,KAAA;AAAA,oBAEA,KAAA,CAAA,aAAA;AAAA,MAAC,SAAA;AAAA,MAAA;AAAA,QACC,KAAO,EAAA;AAAA,UACL,UAAY,EAAA,GAAA;AAAA,UACZ,QAAU,EAAA;AAAA;AACZ,OAAA;AAAA,MACD;AAAA,KAED;AAAA,oBACA,KAAA,CAAA,aAAA;AAAA,MAAC,SAAA;AAAA,MAAA;AAAA,QACC,KAAO,EAAA;AAAA,UACL,OAAS,EAAA,MAAA;AAAA,UACT,GAAK,EAAA,KAAA;AAAA,UACL,aAAe,EAAA,KAAA;AAAA,UACf,WAAa,EAAA;AAAA;AACf,OAAA;AAAA,MAEC,0BAA0B,QAAS,CAAA,GAAA;AAAA,QAClC,CAAC,CAAc,EAAA,KAAA,EAAe,IAAS,KAAA;AACrC,UAAA,MAAM,oBAAoB,IAAK,CAAA,MAAA;AAAA,YAC7B,CAAA,GAAA,KAAO,IAAI,MAAW,KAAA;AAAA,WACxB;AACA,UAAA,MAAM,oBAAoB,iBAAkB,CAAA,MAAA;AAC5C,UACE,uBAAA,KAAA,CAAA,aAAA;AAAA,YAAC,gBAAA;AAAA,YAAA;AAAA,cACC,KAAK,CAAE,CAAA,MAAA;AAAA,cACP,UACE,EACE,yBAAA,CAA0B,MAC1B,IAAA,yBAAA,CAA0B,eAE5B,yBAA0B,CAAA,QAAA,CAAS,MAAW,KAAA,CAAA,IAC7C,sBAAsB,CACrB,IAAA,iBAAA,CAAkB,CAAC,CAAA,CAAE,WAAW,CAAE,CAAA,MAAA;AAAA,cAEtC,OAAO,CAAE,CAAA,MAAA;AAAA,cACT,IAAM,EAAA,CAAA,EAAG,OAAO,CAAA,UAAA,EAAa,KAAK,CAAA,QAAA,CAAA;AAAA,cAClC,OACE,kBAAA,KAAA,CAAA,aAAA;AAAA,gBAAC,QAAA;AAAA,gBAAA;AAAA,kBACC,OAAA,EAAS,EAAE,MAAW,KAAA,OAAA;AAAA,kBACtB,MAAM,CAAG,EAAA,OAAO,aAAa,KAAK,CAAA,SAAA,EAAY,EAAE,MAAM,CAAA,CAAA;AAAA,kBACtD,UAAU,CAAK,CAAA,KAAA,cAAA,CAAe,CAAE,CAAA,MAAA,CAAO,SAAS,KAAK,CAAA;AAAA,kBACrD,KAAM,EAAA;AAAA;AAAA;AACR;AAAA,WAEJ;AAAA;AAEJ;AACF;AACF,GACF;AAEJ;;;;"}