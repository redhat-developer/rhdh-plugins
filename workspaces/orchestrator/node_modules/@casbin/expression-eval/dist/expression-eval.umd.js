!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("jsep")):"function"==typeof define&&define.amd?define(["exports","jsep"],r):r((e||self).expressionEval={},e.jsep)}(this,function(e,r){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/n(r),o=function(e,r){try{var n,t=e;switch(t.type){case"ArrayExpression":return Promise.resolve(i(t.elements,r));case"BinaryExpression":return Promise.resolve(Promise.all([o(t.left,r),o(t.right,r)])).then(function(e){return c[t.operator](e[0],e[1])});case"CallExpression":var s,f,l,p=function(){if("function"==typeof f){var e=f,n=e.apply,o=s;return Promise.resolve(i(t.arguments,r)).then(function(r){return Promise.resolve(n.call(e,o,r))})}},m="MemberExpression"===t.callee.type?Promise.resolve(u(t.callee,r)).then(function(e){s=(l=e)[0],f=l[1]}):Promise.resolve(o(t.callee,r)).then(function(e){f=e});return Promise.resolve(m&&m.then?m.then(p):p());case"ConditionalExpression":return Promise.resolve(o(t.test,r)).then(function(e){return Promise.resolve(o(e?t.consequent:t.alternate,r))});case"Identifier":return Promise.resolve(r[t.name]);case"Literal":return Promise.resolve(t.value);case"LogicalExpression":var d=function(e){return n?e:Promise.resolve(Promise.all([o(t.left,r),o(t.right,r)])).then(function(e){return c[t.operator](e[0],e[1])})},v="||"===t.operator?Promise.resolve(o(t.left,r)).then(function(e){return e?(n=1,e):Promise.resolve(o(t.right,r)).then(function(e){return n=1,e})}):function(){if("&&"===t.operator)return Promise.resolve(o(t.left,r)).then(function(e){return e?Promise.resolve(o(t.right,r)).then(function(e){return n=1,e}):(n=1,e)})}();return Promise.resolve(v&&v.then?v.then(d):d(v));case"MemberExpression":return Promise.resolve(u(t,r)).then(function(e){return e[1]});case"ThisExpression":return Promise.resolve(r);case"UnaryExpression":var h=a[t.operator];return Promise.resolve(o(t.argument,r)).then(function(e){return h.call(a,e)});default:return Promise.resolve(void 0)}}catch(e){return Promise.reject(e)}},u=function(e,r){try{return Promise.resolve(o(e.object,r)).then(function(n){function t(){if(/^__proto__|prototype|constructor$/.test(u))throw Error('Access to member "'+u+'" disallowed.');return[n,n[u]]}var u,i=function(){if(e.computed)return Promise.resolve(o(e.property,r)).then(function(e){u=e});u=e.property.name}();return i&&i.then?i.then(t):t()})}catch(e){return Promise.reject(e)}},i=function(e,r){try{return Promise.resolve(Promise.all(e.map(function(e){return o(e,r)})))}catch(e){return Promise.reject(e)}},s={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},c={"||":function(e,r){return e||r},"&&":function(e,r){return e&&r},"|":function(e,r){return e|r},"^":function(e,r){return e^r},"&":function(e,r){return e&r},"==":function(e,r){return e==r},"!=":function(e,r){return e!=r},"===":function(e,r){return e===r},"!==":function(e,r){return e!==r},"<":function(e,r){return e<r},">":function(e,r){return e>r},"<=":function(e,r){return e<=r},">=":function(e,r){return e>=r},"<<":function(e,r){return e<<r},">>":function(e,r){return e>>r},">>>":function(e,r){return e>>>r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"*":function(e,r){return e*r},"/":function(e,r){return e/r},"%":function(e,r){return e%r}},a={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function f(e,r){return e.map(function(e){return p(e,r)})}function l(e,r){var n,t=p(e.object,r);if(n=e.computed?p(e.property,r):e.property.name,/^__proto__|prototype|constructor$/.test(n))throw Error('Access to member "'+n+'" disallowed.');return[t,t[n]]}function p(e,r){var n=e;switch(n.type){case"ArrayExpression":return f(n.elements,r);case"BinaryExpression":return c[n.operator](p(n.left,r),p(n.right,r));case"CallExpression":var t,o,u;if("MemberExpression"===n.callee.type?(t=(u=l(n.callee,r))[0],o=u[1]):o=p(n.callee,r),"function"!=typeof o)return;return o.apply(t,f(n.arguments,r));case"ConditionalExpression":return p(n.test,r)?p(n.consequent,r):p(n.alternate,r);case"Identifier":return r[n.name];case"Literal":return n.value;case"LogicalExpression":var i=p(n.left,r);return"||"===n.operator&&i?i:"&&"!==n.operator||i?c[n.operator](i,p(n.right,r)):i;case"MemberExpression":return l(n,r)[1];case"ThisExpression":return r;case"UnaryExpression":return a[n.operator](p(n.argument,r));default:return}}Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.default}}),e.addBinaryOp=function(e,r,n){n?(t.default.addBinaryOp(e,r),c[e]=n):(t.default.addBinaryOp(e,s[e]||1),c[e]=r)},e.addUnaryOp=function(e,r){t.default.addUnaryOp(e),a[e]=r},e.compile=function(e){return p.bind(null,t.default(e))},e.compileAsync=function(e){return o.bind(null,t.default(e))},e.eval=p,e.evalAsync=o});
//# sourceMappingURL=expression-eval.umd.js.map
