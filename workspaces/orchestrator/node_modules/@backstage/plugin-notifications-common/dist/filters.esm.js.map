{"version":3,"file":"filters.esm.js","sources":["../src/filters.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Config } from '@backstage/config';\nimport { NotificationProcessorFilters, NotificationSeverity } from './types';\nimport { notificationSeverities } from './constants';\n\n/** @public */\nexport const getProcessorFiltersFromConfig = (config: Config) => {\n  const filter: NotificationProcessorFilters = {};\n  const minSeverity = config.getOptionalString(\n    'filter.minSeverity',\n  ) as NotificationSeverity;\n  if (minSeverity) {\n    if (notificationSeverities.includes(minSeverity)) {\n      filter.minSeverity = minSeverity;\n    } else {\n      throw new Error(`Invalid minSeverity: ${minSeverity}`);\n    }\n  }\n  const maxSeverity = config.getOptionalString(\n    'filter.maxSeverity',\n  ) as NotificationSeverity;\n  if (maxSeverity) {\n    if (notificationSeverities.includes(maxSeverity)) {\n      filter.maxSeverity = maxSeverity;\n    } else {\n      throw new Error(`Invalid maxSeverity: ${maxSeverity}`);\n    }\n  }\n  filter.excludedTopics = config.getOptionalStringArray(\n    'filter.excludedTopics',\n  );\n  return filter;\n};\n"],"names":[],"mappings":";;AAoBO,MAAM,6BAAA,GAAgC,CAAC,MAAA,KAAmB;AAC/D,EAAA,MAAM,SAAuC,EAAC;AAC9C,EAAA,MAAM,cAAc,MAAA,CAAO,iBAAA;AAAA,IACzB;AAAA,GACF;AACA,EAAA,IAAI,WAAA,EAAa;AACf,IAAA,IAAI,sBAAA,CAAuB,QAAA,CAAS,WAAW,CAAA,EAAG;AAChD,MAAA,MAAA,CAAO,WAAA,GAAc,WAAA;AAAA,IACvB,CAAA,MAAO;AACL,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,qBAAA,EAAwB,WAAW,CAAA,CAAE,CAAA;AAAA,IACvD;AAAA,EACF;AACA,EAAA,MAAM,cAAc,MAAA,CAAO,iBAAA;AAAA,IACzB;AAAA,GACF;AACA,EAAA,IAAI,WAAA,EAAa;AACf,IAAA,IAAI,sBAAA,CAAuB,QAAA,CAAS,WAAW,CAAA,EAAG;AAChD,MAAA,MAAA,CAAO,WAAA,GAAc,WAAA;AAAA,IACvB,CAAA,MAAO;AACL,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,qBAAA,EAAwB,WAAW,CAAA,CAAE,CAAA;AAAA,IACvD;AAAA,EACF;AACA,EAAA,MAAA,CAAO,iBAAiB,MAAA,CAAO,sBAAA;AAAA,IAC7B;AAAA,GACF;AACA,EAAA,OAAO,MAAA;AACT;;;;"}