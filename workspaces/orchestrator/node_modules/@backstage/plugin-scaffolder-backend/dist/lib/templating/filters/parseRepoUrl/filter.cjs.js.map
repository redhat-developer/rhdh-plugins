{"version":3,"file":"filter.cjs.js","sources":["../../../../../src/lib/templating/filters/parseRepoUrl/filter.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ScmIntegrations } from '@backstage/integration';\nimport { parseRepoUrl } from '@backstage/plugin-scaffolder-node';\nimport { createTemplateFilter } from '@backstage/plugin-scaffolder-node/alpha';\nimport { examples } from './examples';\n\nexport const createParseRepoUrl = (integrations: ScmIntegrations) =>\n  createTemplateFilter({\n    id: 'parseRepoUrl',\n    description:\n      'Parses a repository URL into its constituent parts: owner, repository name, etc.',\n    schema: z =>\n      z\n        .function()\n        .args(\n          z.string().describe('repo URL as collected from repository picker'),\n        )\n        .returns(\n          z\n            .object({\n              repo: z.string(),\n              host: z.string(),\n            })\n            .merge(\n              z\n                .object({\n                  owner: z.string(),\n                  organization: z.string(),\n                  workspace: z.string(),\n                  project: z.string(),\n                })\n                .partial(),\n            )\n            .describe('`RepoSpec`'),\n        ),\n    examples,\n    filter: url => parseRepoUrl(url, integrations),\n  });\n"],"names":["createTemplateFilter","examples","parseRepoUrl"],"mappings":";;;;;;AAoBO,MAAM,kBAAA,GAAqB,CAAC,YAAA,KACjCA,0BAAA,CAAqB;AAAA,EACnB,EAAA,EAAI,cAAA;AAAA,EACJ,WAAA,EACE,kFAAA;AAAA,EACF,MAAA,EAAQ,CAAA,CAAA,KACN,CAAA,CACG,QAAA,EAAS,CACT,IAAA;AAAA,IACC,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,CAAS,8CAA8C;AAAA,GACpE,CACC,OAAA;AAAA,IACC,EACG,MAAA,CAAO;AAAA,MACN,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,MACf,IAAA,EAAM,EAAE,MAAA;AAAO,KAChB,CAAA,CACA,KAAA;AAAA,MACC,EACG,MAAA,CAAO;AAAA,QACN,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,QAChB,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA,QACvB,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,QACpB,OAAA,EAAS,EAAE,MAAA;AAAO,OACnB,EACA,OAAA;AAAQ,KACb,CACC,SAAS,YAAY;AAAA,GAC1B;AAAA,YACJC,iBAAA;AAAA,EACA,MAAA,EAAQ,CAAA,GAAA,KAAOC,iCAAA,CAAa,GAAA,EAAK,YAAY;AAC/C,CAAC;;;;"}