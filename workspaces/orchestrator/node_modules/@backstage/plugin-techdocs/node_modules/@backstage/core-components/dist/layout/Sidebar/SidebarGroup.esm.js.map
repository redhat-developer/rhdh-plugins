{"version":3,"file":"SidebarGroup.esm.js","sources":["../../../src/layout/Sidebar/SidebarGroup.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-shadow */\n/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport BottomNavigationAction, {\n  BottomNavigationActionProps,\n} from '@material-ui/core/BottomNavigationAction';\nimport { Theme, makeStyles } from '@material-ui/core/styles';\nimport { ReactNode, ChangeEvent, useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Link } from '../../components/Link/Link';\nimport { SidebarConfig, SidebarConfigContext } from './config';\nimport { MobileSidebarContext } from './MobileSidebarContext';\nimport { useSidebarPinState } from './SidebarPinStateContext';\n\n/**\n * Props for the `SidebarGroup`\n *\n * @public\n */\nexport interface SidebarGroupProps extends BottomNavigationActionProps {\n  /**\n   * If the `SidebarGroup` should be a `Link`, `to` should be a pathname to that location\n   */\n  to?: string;\n  /**\n   * If the `SidebarGroup`s should be in a different order than in the normal `Sidebar`, you can provide\n   * each `SidebarGroup` it's own priority to reorder them.\n   */\n  priority?: number;\n  /**\n   * React children\n   */\n  children?: ReactNode;\n}\n\nconst useStyles = makeStyles<Theme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color,\n    },\n\n    selected: props => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: '-1px',\n    }),\n\n    label: {\n      display: 'none',\n    },\n  }),\n);\n\n/**\n * Returns a Material UI `BottomNavigationAction`, which is aware of the current location & the selected item in the `BottomNavigation`,\n * such that it will highlight a `MobileSidebarGroup` either on location change or if the selected item changes.\n *\n * @param props `to`: pathname of link; `value`: index of the selected item\n * @internal\n */\nconst MobileSidebarGroup = (props: SidebarGroupProps) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } =\n    useContext(MobileSidebarContext);\n\n  const onChange = (_: ChangeEvent<{}>, value: number) => {\n    if (value === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value);\n    }\n  };\n\n  const selected =\n    (value === selectedMenuItemIndex && selectedMenuItemIndex >= 0) ||\n    (!(value === selectedMenuItemIndex) &&\n      !(selectedMenuItemIndex >= 0) &&\n      to === location.pathname);\n\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    <BottomNavigationAction\n      aria-label={label}\n      label={label}\n      icon={icon}\n      component={Link as any}\n      to={(to ? to : location.pathname) as any}\n      onChange={onChange}\n      value={value}\n      selected={selected}\n      classes={classes}\n    />\n  );\n};\n\n/**\n * Groups items of the `Sidebar` together.\n *\n * @remarks\n * On bigger screens, this won't have any effect at the moment.\n * On small screens, it will add an action to the bottom navigation - either triggering an overlay menu or acting as a link\n *\n * @public\n */\nexport const SidebarGroup = (props: SidebarGroupProps) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    <MobileSidebarGroup to={to} label={label} icon={icon} value={value} />\n  ) : (\n    <>{children}</>\n  );\n};\n"],"names":["value"],"mappings":";;;;;;;;;;AAiDA,MAAM,SAAA,GAAY,UAAA;AAAA,EAChB,CAAA,KAAA,MAAU;AAAA,IACR,IAAA,EAAM;AAAA,MACJ,QAAA,EAAU,CAAA;AAAA,MACV,MAAA,EAAQ,KAAA,CAAM,OAAA,CAAQ,CAAA,EAAG,CAAC,CAAA;AAAA,MAC1B,KAAA,EAAO,KAAA,CAAM,OAAA,CAAQ,UAAA,CAAW;AAAA,KAClC;AAAA,IAEA,UAAU,CAAA,KAAA,MAAU;AAAA,MAClB,KAAA,EAAO,CAAA,EAAG,KAAA,CAAM,OAAA,CAAQ,WAAW,aAAa,CAAA,UAAA,CAAA;AAAA,MAChD,SAAA,EAAW,SAAS,KAAA,CAAM,aAAA,CAAc,sBAAsB,CAAA,GAAA,EAAM,KAAA,CAAM,OAAA,CAAQ,UAAA,CAAW,SAAS,CAAA,CAAA;AAAA,MACtG,SAAA,EAAW;AAAA,KACb,CAAA;AAAA,IAEA,KAAA,EAAO;AAAA,MACL,OAAA,EAAS;AAAA;AACX,GACF;AACF,CAAA;AASA,MAAM,kBAAA,GAAqB,CAAC,KAAA,KAA6B;AACvD,EAAA,MAAM,EAAE,EAAA,EAAI,KAAA,EAAO,IAAA,EAAM,OAAM,GAAI,KAAA;AACnC,EAAA,MAAM,EAAE,aAAA,EAAc,GAAI,UAAA,CAAW,oBAAoB,CAAA;AACzD,EAAA,MAAM,OAAA,GAAU,SAAA,CAAU,EAAE,aAAA,EAAe,CAAA;AAC3C,EAAA,MAAM,WAAW,WAAA,EAAY;AAC7B,EAAA,MAAM,EAAE,qBAAA,EAAuB,wBAAA,EAAyB,GACtD,WAAW,oBAAoB,CAAA;AAEjC,EAAA,MAAM,QAAA,GAAW,CAAC,CAAA,EAAoBA,MAAAA,KAAkB;AACtD,IAAA,IAAIA,WAAU,qBAAA,EAAuB;AACnC,MAAA,wBAAA,CAAyB,EAAE,CAAA;AAAA,IAC7B,CAAA,MAAO;AACL,MAAA,wBAAA,CAAyBA,MAAK,CAAA;AAAA,IAChC;AAAA,EACF,CAAA;AAEA,EAAA,MAAM,QAAA,GACH,KAAA,KAAU,qBAAA,IAAyB,qBAAA,IAAyB,CAAA,IAC5D,EAAE,KAAA,KAAU,qBAAA,CAAA,IACX,EAAE,qBAAA,IAAyB,CAAA,CAAA,IAC3B,EAAA,KAAO,QAAA,CAAS,QAAA;AAEpB,EAAA;AAAA;AAAA,oBAEE,GAAA;AAAA,MAAC,sBAAA;AAAA,MAAA;AAAA,QACC,YAAA,EAAY,KAAA;AAAA,QACZ,KAAA;AAAA,QACA,IAAA;AAAA,QACA,SAAA,EAAW,IAAA;AAAA,QACX,EAAA,EAAK,EAAA,GAAK,EAAA,GAAK,QAAA,CAAS,QAAA;AAAA,QACxB,QAAA;AAAA,QACA,KAAA;AAAA,QACA,QAAA;AAAA,QACA;AAAA;AAAA;AACF;AAEJ,CAAA;AAWO,MAAM,YAAA,GAAe,CAAC,KAAA,KAA6B;AACxD,EAAA,MAAM,EAAE,QAAA,EAAU,EAAA,EAAI,KAAA,EAAO,IAAA,EAAM,OAAM,GAAI,KAAA;AAC7C,EAAA,MAAM,EAAE,QAAA,EAAS,GAAI,kBAAA,EAAmB;AAExC,EAAA,OAAO,QAAA,uBACJ,kBAAA,EAAA,EAAmB,EAAA,EAAQ,OAAc,IAAA,EAAY,KAAA,EAAc,CAAA,mBAEpE,GAAA,CAAA,QAAA,EAAA,EAAG,QAAA,EAAS,CAAA;AAEhB;;;;"}