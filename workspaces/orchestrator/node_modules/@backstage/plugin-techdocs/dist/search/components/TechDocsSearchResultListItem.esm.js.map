{"version":3,"file":"TechDocsSearchResultListItem.esm.js","sources":["../../../src/search/components/TechDocsSearchResultListItem.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PropsWithChildren, ReactNode } from 'react';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '@backstage/core-components';\nimport { ResultHighlight } from '@backstage/plugin-search-common';\nimport { HighlightedSearchResultText } from '@backstage/plugin-search-react';\n\nconst useStyles = makeStyles({\n  flexContainer: {\n    flexWrap: 'wrap',\n  },\n  itemText: {\n    width: '100%',\n    marginBottom: '1rem',\n  },\n});\n\n/**\n * Props for {@link TechDocsSearchResultListItem}.\n *\n * @public\n */\nexport type TechDocsSearchResultListItemProps = {\n  icon?: ReactNode | ((result: any) => ReactNode);\n  result?: any;\n  highlight?: ResultHighlight;\n  rank?: number;\n  lineClamp?: number;\n  asListItem?: boolean;\n  asLink?: boolean;\n  title?: string;\n};\n\n/**\n * Component which renders documentation and related metadata.\n *\n * @public\n */\nexport const TechDocsSearchResultListItem = (\n  props: TechDocsSearchResultListItemProps,\n) => {\n  const {\n    result,\n    highlight,\n    lineClamp = 5,\n    asListItem = true,\n    asLink = true,\n    title,\n    icon,\n  } = props;\n  const classes = useStyles();\n\n  const LinkWrapper = ({ children }: PropsWithChildren<{}>) =>\n    asLink ? (\n      <Link noTrack to={result.location}>\n        {children}\n      </Link>\n    ) : (\n      <>{children}</>\n    );\n\n  const TextItem = () => {\n    const resultTitle = highlight?.fields.title ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.title}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.title\n    );\n\n    const entityTitle = highlight?.fields.entityTitle ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.entityTitle}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.entityTitle\n    );\n\n    const resultName = highlight?.fields.name ? (\n      <HighlightedSearchResultText\n        text={highlight.fields.name}\n        preTag={highlight.preTag}\n        postTag={highlight.postTag}\n      />\n    ) : (\n      result.name\n    );\n\n    if (!result) return null;\n\n    return (\n      <ListItemText\n        className={classes.itemText}\n        primaryTypographyProps={{ variant: 'h6' }}\n        primary={\n          <LinkWrapper>\n            {title ? (\n              title\n            ) : (\n              <>\n                {resultTitle} | {entityTitle ?? resultName} docs\n              </>\n            )}\n          </LinkWrapper>\n        }\n        secondary={\n          <Typography\n            component=\"span\"\n            style={{\n              display: '-webkit-box',\n              WebkitBoxOrient: 'vertical',\n              WebkitLineClamp: lineClamp,\n              overflow: 'hidden',\n            }}\n            color=\"textSecondary\"\n            variant=\"body2\"\n          >\n            {highlight?.fields.text ? (\n              <HighlightedSearchResultText\n                text={highlight.fields.text}\n                preTag={highlight.preTag}\n                postTag={highlight.postTag}\n              />\n            ) : (\n              result.text\n            )}\n          </Typography>\n        }\n      />\n    );\n  };\n\n  const ListItemWrapper = ({ children }: PropsWithChildren<{}>) =>\n    asListItem ? (\n      <>\n        {icon && (\n          <ListItemIcon>\n            {typeof icon === 'function' ? icon(result) : icon}\n          </ListItemIcon>\n        )}\n        <div className={classes.flexContainer}>{children}</div>\n      </>\n    ) : (\n      <>{children}</>\n    );\n\n  return (\n    <ListItemWrapper>\n      <TextItem />\n    </ListItemWrapper>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;AAyBA,MAAM,YAAY,UAAA,CAAW;AAAA,EAC3B,aAAA,EAAe;AAAA,IACb,QAAA,EAAU;AAAA,GACZ;AAAA,EACA,QAAA,EAAU;AAAA,IACR,KAAA,EAAO,MAAA;AAAA,IACP,YAAA,EAAc;AAAA;AAElB,CAAC,CAAA;AAuBM,MAAM,4BAAA,GAA+B,CAC1C,KAAA,KACG;AACH,EAAA,MAAM;AAAA,IACJ,MAAA;AAAA,IACA,SAAA;AAAA,IACA,SAAA,GAAY,CAAA;AAAA,IACZ,UAAA,GAAa,IAAA;AAAA,IACb,MAAA,GAAS,IAAA;AAAA,IACT,KAAA;AAAA,IACA;AAAA,GACF,GAAI,KAAA;AACJ,EAAA,MAAM,UAAU,SAAA,EAAU;AAE1B,EAAA,MAAM,cAAc,CAAC,EAAE,QAAA,EAAS,KAC9B,yBACE,GAAA,CAAC,IAAA,EAAA,EAAK,OAAA,EAAO,IAAA,EAAC,IAAI,MAAA,CAAO,QAAA,EACtB,QAAA,EACH,CAAA,mCAEG,QAAA,EAAS,CAAA;AAGhB,EAAA,MAAM,WAAW,MAAM;AACrB,IAAA,MAAM,WAAA,GAAc,SAAA,EAAW,MAAA,CAAO,KAAA,mBACpC,GAAA;AAAA,MAAC,2BAAA;AAAA,MAAA;AAAA,QACC,IAAA,EAAM,UAAU,MAAA,CAAO,KAAA;AAAA,QACvB,QAAQ,SAAA,CAAU,MAAA;AAAA,QAClB,SAAS,SAAA,CAAU;AAAA;AAAA,QAGrB,MAAA,CAAO,KAAA;AAGT,IAAA,MAAM,WAAA,GAAc,SAAA,EAAW,MAAA,CAAO,WAAA,mBACpC,GAAA;AAAA,MAAC,2BAAA;AAAA,MAAA;AAAA,QACC,IAAA,EAAM,UAAU,MAAA,CAAO,WAAA;AAAA,QACvB,QAAQ,SAAA,CAAU,MAAA;AAAA,QAClB,SAAS,SAAA,CAAU;AAAA;AAAA,QAGrB,MAAA,CAAO,WAAA;AAGT,IAAA,MAAM,UAAA,GAAa,SAAA,EAAW,MAAA,CAAO,IAAA,mBACnC,GAAA;AAAA,MAAC,2BAAA;AAAA,MAAA;AAAA,QACC,IAAA,EAAM,UAAU,MAAA,CAAO,IAAA;AAAA,QACvB,QAAQ,SAAA,CAAU,MAAA;AAAA,QAClB,SAAS,SAAA,CAAU;AAAA;AAAA,QAGrB,MAAA,CAAO,IAAA;AAGT,IAAA,IAAI,CAAC,QAAQ,OAAO,IAAA;AAEpB,IAAA,uBACE,GAAA;AAAA,MAAC,YAAA;AAAA,MAAA;AAAA,QACC,WAAW,OAAA,CAAQ,QAAA;AAAA,QACnB,sBAAA,EAAwB,EAAE,OAAA,EAAS,IAAA,EAAK;AAAA,QACxC,OAAA,kBACE,GAAA,CAAC,WAAA,EAAA,EACE,QAAA,EAAA,KAAA,GACC,wBAEA,IAAA,CAAA,QAAA,EAAA,EACG,QAAA,EAAA;AAAA,UAAA,WAAA;AAAA,UAAY,KAAA;AAAA,UAAI,WAAA,IAAe,UAAA;AAAA,UAAW;AAAA,SAAA,EAC7C,CAAA,EAEJ,CAAA;AAAA,QAEF,SAAA,kBACE,GAAA;AAAA,UAAC,UAAA;AAAA,UAAA;AAAA,YACC,SAAA,EAAU,MAAA;AAAA,YACV,KAAA,EAAO;AAAA,cACL,OAAA,EAAS,aAAA;AAAA,cACT,eAAA,EAAiB,UAAA;AAAA,cACjB,eAAA,EAAiB,SAAA;AAAA,cACjB,QAAA,EAAU;AAAA,aACZ;AAAA,YACA,KAAA,EAAM,eAAA;AAAA,YACN,OAAA,EAAQ,OAAA;AAAA,YAEP,QAAA,EAAA,SAAA,EAAW,OAAO,IAAA,mBACjB,GAAA;AAAA,cAAC,2BAAA;AAAA,cAAA;AAAA,gBACC,IAAA,EAAM,UAAU,MAAA,CAAO,IAAA;AAAA,gBACvB,QAAQ,SAAA,CAAU,MAAA;AAAA,gBAClB,SAAS,SAAA,CAAU;AAAA;AAAA,gBAGrB,MAAA,CAAO;AAAA;AAAA;AAEX;AAAA,KAEJ;AAAA,EAEJ,CAAA;AAEA,EAAA,MAAM,kBAAkB,CAAC,EAAE,QAAA,EAAS,KAClC,6BACE,IAAA,CAAA,QAAA,EAAA,EACG,QAAA,EAAA;AAAA,IAAA,IAAA,oBACC,GAAA,CAAC,gBACE,QAAA,EAAA,OAAO,IAAA,KAAS,aAAa,IAAA,CAAK,MAAM,IAAI,IAAA,EAC/C,CAAA;AAAA,oBAEF,GAAA,CAAC,KAAA,EAAA,EAAI,SAAA,EAAW,OAAA,CAAQ,eAAgB,QAAA,EAAS;AAAA,GAAA,EACnD,CAAA,mCAEG,QAAA,EAAS,CAAA;AAGhB,EAAA,uBACE,GAAA,CAAC,eAAA,EAAA,EACC,QAAA,kBAAA,GAAA,CAAC,QAAA,EAAA,EAAS,CAAA,EACZ,CAAA;AAEJ;;;;"}