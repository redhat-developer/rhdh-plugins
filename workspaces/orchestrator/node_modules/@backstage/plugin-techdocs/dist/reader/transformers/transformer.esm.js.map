{"version":3,"file":"transformer.esm.js","sources":["../../../src/reader/transformers/transformer.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type Transformer = (dom: Element) => Element | Promise<Element>;\n\nexport const transform = async (\n  html: string | Element,\n  transformers: Transformer[],\n): Promise<Element> => {\n  let dom: Element;\n\n  if (typeof html === 'string') {\n    dom = new DOMParser().parseFromString(html, 'text/html').documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error('dom is not a recognized type');\n  }\n\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n\n  return dom;\n};\n"],"names":[],"mappings":"AAkBO,MAAM,SAAA,GAAY,OACvB,IAAA,EACA,YAAA,KACqB;AACrB,EAAA,IAAI,GAAA;AAEJ,EAAA,IAAI,OAAO,SAAS,QAAA,EAAU;AAC5B,IAAA,GAAA,GAAM,IAAI,SAAA,EAAU,CAAE,eAAA,CAAgB,IAAA,EAAM,WAAW,CAAA,CAAE,eAAA;AAAA,EAC3D,CAAA,MAAA,IAAW,gBAAgB,OAAA,EAAS;AAClC,IAAA,GAAA,GAAM,IAAA;AAAA,EACR,CAAA,MAAO;AACL,IAAA,MAAM,IAAI,MAAM,8BAA8B,CAAA;AAAA,EAChD;AAEA,EAAA,KAAA,MAAW,eAAe,YAAA,EAAc;AACtC,IAAA,GAAA,GAAM,MAAM,YAAY,GAAG,CAAA;AAAA,EAC7B;AAEA,EAAA,OAAO,GAAA;AACT;;;;"}