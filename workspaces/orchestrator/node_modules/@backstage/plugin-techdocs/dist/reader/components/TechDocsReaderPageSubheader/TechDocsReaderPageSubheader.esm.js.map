{"version":3,"file":"TechDocsReaderPageSubheader.esm.js","sources":["../../../../src/reader/components/TechDocsReaderPageSubheader/TechDocsReaderPageSubheader.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MouseEvent, useState, useCallback } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { ToolbarProps } from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Menu from '@material-ui/core/Menu';\nimport Box from '@material-ui/core/Box';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageSubheader',\n    flexDirection: 'column',\n    minHeight: 'auto',\n    padding: theme.spacing(3, 3, 0),\n    '@media print': {\n      display: 'none',\n    },\n  },\n}));\n\n/**\n * Renders the reader page subheader.\n * Please use the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageSubheader = (props: {\n  toolbarProps?: ToolbarProps;\n}) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const handleClick = useCallback((event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  const addons = useTechDocsAddons();\n\n  const subheaderAddons = addons.renderComponentsByLocation(\n    locations.Subheader,\n  );\n\n  const settingsAddons = addons.renderComponentsByLocation(locations.Settings);\n\n  if (!subheaderAddons && !settingsAddons) return null;\n\n  // No entity metadata = 404. Don't render subheader on 404.\n  if (entityMetadataLoading === false && !entityMetadata) return null;\n\n  return (\n    <Toolbar classes={classes} {...props.toolbarProps}>\n      <Box\n        display=\"flex\"\n        justifyContent=\"flex-end\"\n        width=\"100%\"\n        flexWrap=\"wrap\"\n      >\n        {subheaderAddons}\n        {settingsAddons ? (\n          <>\n            <Tooltip title=\"Settings\">\n              <IconButton\n                aria-controls=\"tech-docs-reader-page-settings\"\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n              >\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n            <Menu\n              id=\"tech-docs-reader-page-settings\"\n              getContentAnchorEl={null}\n              anchorEl={anchorEl}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n              open={Boolean(anchorEl)}\n              onClose={handleClose}\n              keepMounted\n            >\n              <div>{settingsAddons}</div>\n            </Menu>\n          </>\n        ) : null}\n      </Box>\n    </Toolbar>\n  );\n};\n"],"names":["locations"],"mappings":";;;;;;;;;;;AAiCA,MAAM,SAAA,GAAY,WAAW,CAAA,KAAA,MAAU;AAAA,EACrC,IAAA,EAAM;AAAA,IACJ,QAAA,EAAU,eAAA;AAAA,IACV,aAAA,EAAe,QAAA;AAAA,IACf,SAAA,EAAW,MAAA;AAAA,IACX,OAAA,EAAS,KAAA,CAAM,OAAA,CAAQ,CAAA,EAAG,GAAG,CAAC,CAAA;AAAA,IAC9B,cAAA,EAAgB;AAAA,MACd,OAAA,EAAS;AAAA;AACX;AAEJ,CAAA,CAAE,CAAA;AAOK,MAAM,2BAAA,GAA8B,CAAC,KAAA,KAEtC;AACJ,EAAA,MAAM,UAAU,SAAA,EAAU;AAC1B,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAA6B,IAAI,CAAA;AAEjE,EAAA,MAAM,WAAA,GAAc,WAAA,CAAY,CAAC,KAAA,KAAyC;AACxE,IAAA,WAAA,CAAY,MAAM,aAAa,CAAA;AAAA,EACjC,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,MAAM,WAAA,GAAc,YAAY,MAAM;AACpC,IAAA,WAAA,CAAY,IAAI,CAAA;AAAA,EAClB,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,MAAM;AAAA,IACJ,cAAA,EAAgB,EAAE,KAAA,EAAO,cAAA,EAAgB,SAAS,qBAAA;AAAsB,MACtE,qBAAA,EAAsB;AAE1B,EAAA,MAAM,SAAS,iBAAA,EAAkB;AAEjC,EAAA,MAAM,kBAAkB,MAAA,CAAO,0BAAA;AAAA,IAC7BA,sBAAA,CAAU;AAAA,GACZ;AAEA,EAAA,MAAM,cAAA,GAAiB,MAAA,CAAO,0BAAA,CAA2BA,sBAAA,CAAU,QAAQ,CAAA;AAE3E,EAAA,IAAI,CAAC,eAAA,IAAmB,CAAC,cAAA,EAAgB,OAAO,IAAA;AAGhD,EAAA,IAAI,qBAAA,KAA0B,KAAA,IAAS,CAAC,cAAA,EAAgB,OAAO,IAAA;AAE/D,EAAA,uBACE,GAAA,CAAC,OAAA,EAAA,EAAQ,OAAA,EAAmB,GAAG,MAAM,YAAA,EACnC,QAAA,kBAAA,IAAA;AAAA,IAAC,GAAA;AAAA,IAAA;AAAA,MACC,OAAA,EAAQ,MAAA;AAAA,MACR,cAAA,EAAe,UAAA;AAAA,MACf,KAAA,EAAM,MAAA;AAAA,MACN,QAAA,EAAS,MAAA;AAAA,MAER,QAAA,EAAA;AAAA,QAAA,eAAA;AAAA,QACA,iCACC,IAAA,CAAA,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,0BAAA,GAAA,CAAC,OAAA,EAAA,EAAQ,OAAM,UAAA,EACb,QAAA,kBAAA,GAAA;AAAA,YAAC,UAAA;AAAA,YAAA;AAAA,cACC,eAAA,EAAc,gCAAA;AAAA,cACd,eAAA,EAAc,MAAA;AAAA,cACd,OAAA,EAAS,WAAA;AAAA,cAET,8BAAC,YAAA,EAAA,EAAa;AAAA;AAAA,WAChB,EACF,CAAA;AAAA,0BACA,GAAA;AAAA,YAAC,IAAA;AAAA,YAAA;AAAA,cACC,EAAA,EAAG,gCAAA;AAAA,cACH,kBAAA,EAAoB,IAAA;AAAA,cACpB,QAAA;AAAA,cACA,YAAA,EAAc,EAAE,QAAA,EAAU,QAAA,EAAU,YAAY,OAAA,EAAQ;AAAA,cACxD,IAAA,EAAM,QAAQ,QAAQ,CAAA;AAAA,cACtB,OAAA,EAAS,WAAA;AAAA,cACT,WAAA,EAAW,IAAA;AAAA,cAEX,QAAA,kBAAA,GAAA,CAAC,SAAK,QAAA,EAAA,cAAA,EAAe;AAAA;AAAA;AACvB,SAAA,EACF,CAAA,GACE;AAAA;AAAA;AAAA,GACN,EACF,CAAA;AAEJ;;;;"}