{"version":3,"file":"Breadcrumbs.esm.js","sources":["../../../src/layout/Breadcrumbs/Breadcrumbs.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  MouseEvent,\n  useState,\n  Children,\n  ComponentProps,\n  Fragment,\n} from 'react';\n\ntype Props = ComponentProps<typeof MaterialBreadcrumbs>;\n\n/** @public */\nexport type BreadcrumbsClickableTextClassKey = 'root';\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      cursor: 'pointer',\n    },\n  },\n  { name: 'BackstageBreadcrumbsClickableText' },\n)(Typography);\n\n/** @public */\nexport type BreadcrumbsStyledBoxClassKey = 'root';\n\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      color: 'inherit',\n    },\n  },\n  { name: 'BackstageBreadcrumbsStyledBox' },\n)(Box);\n\n/** @public */\nexport type BreadcrumbsCurrentPageClassKey = 'root';\n\nconst BreadcrumbsCurrentPage = withStyles(\n  {\n    root: {\n      fontStyle: 'italic',\n    },\n  },\n  { name: 'BreadcrumbsCurrentPage' },\n)(Box);\n\n/**\n * Breadcrumbs component to show navigation hierarchical structure\n *\n * @public\n *\n */\nexport function Breadcrumbs(props: Props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);\n\n  const childrenArray = Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    <Fragment>\n      <MaterialBreadcrumbs aria-label=\"breadcrumb\" {...restProps}>\n        {childrenArray.length > 1 && <StyledBox clone>{firstPage}</StyledBox>}\n        {childrenArray.length > 2 && <StyledBox clone>{secondPage}</StyledBox>}\n        {hasHiddenBreadcrumbs && (\n          <ClickableText onClick={handleClick}>...</ClickableText>\n        )}\n        <BreadcrumbsCurrentPage>{currentPage}</BreadcrumbsCurrentPage>\n      </MaterialBreadcrumbs>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        <List>\n          {expandablePages.map((pageLink, index) => (\n            <ListItem key={index} button>\n              <StyledBox clone>{pageLink}</StyledBox>\n            </ListItem>\n          ))}\n        </List>\n      </Popover>\n    </Fragment>\n  );\n}\n"],"names":[],"mappings":"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"}