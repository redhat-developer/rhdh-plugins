import { jsx } from 'react/jsx-runtime';
import { Route } from 'react-router-dom';
import { useApp } from '@backstage/core-plugin-api';
import { usePermission } from '../hooks/usePermission.esm.js';
import { isResourcePermission } from '@backstage/plugin-permission-common';

const PermissionedRoute = (props) => {
  const { permission, resourceRef, errorComponent, ...otherProps } = props;
  const permissionResult = usePermission(
    isResourcePermission(permission) ? { permission, resourceRef } : { permission }
  );
  const app = useApp();
  const { NotFoundErrorPage } = app.getComponents();
  let shownElement = errorComponent === void 0 ? /* @__PURE__ */ jsx(NotFoundErrorPage, {}) : errorComponent;
  if (permissionResult.loading) {
    shownElement = null;
  } else if (permissionResult.allowed) {
    shownElement = props.element;
  }
  return /* @__PURE__ */ jsx(Route, { ...otherProps, element: shownElement });
};

export { PermissionedRoute };
//# sourceMappingURL=PermissionedRoute.esm.js.map
