{"version":3,"file":"Filters.esm.js","sources":["../../../src/components/Table/Filters.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useEffect, useState } from 'react';\n\nimport { Select } from '../Select';\nimport { SelectProps } from '../Select/Select';\nimport { coreComponentsTranslationRef } from '../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nexport type TableFiltersClassKey = 'root' | 'value' | 'heder' | 'filters';\n\nconst useFilterStyles = makeStyles(\n  theme => ({\n    root: {\n      height: '100%',\n      width: '315px',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: theme.spacing(3),\n    },\n    value: {\n      fontWeight: 'bold',\n      fontSize: 18,\n    },\n    header: {\n      display: 'flex',\n      alignItems: 'center',\n      height: theme.spacing(7.5),\n      justifyContent: 'space-between',\n      borderBottom: `1px solid ${theme.palette.grey[500]}`,\n    },\n    filters: {\n      display: 'flex',\n      flexDirection: 'column',\n      '& > *': {\n        marginTop: theme.spacing(2),\n      },\n    },\n  }),\n  { name: 'BackstageTableFilters' },\n);\n\nexport type Without<T, K> = Pick<T, Exclude<keyof T, K>>;\n\nexport type Filter = {\n  type: 'select' | 'multiple-select';\n  element: Without<SelectProps, 'onChange'>;\n};\n\nexport type SelectedFilters = {\n  [key: string]: string | string[];\n};\n\ntype Props = {\n  filters: Filter[];\n  selectedFilters?: SelectedFilters;\n  onChangeFilters: (arg: any) => any;\n};\n\nexport const Filters = (props: Props) => {\n  const classes = useFilterStyles();\n\n  const { onChangeFilters } = props;\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n\n  const [selectedFilters, setSelectedFilters] = useState<SelectedFilters>({\n    ...props.selectedFilters,\n  });\n  const [reset, triggerReset] = useState(false);\n\n  // Trigger re-rendering\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset(el => !el);\n  };\n\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n\n  // As material table doesn't provide a way to add a column filter tab we will make our own filter logic\n  return (\n    <Box className={classes.root}>\n      <Box className={classes.header}>\n        <Box className={classes.value}>{t('table.filter.title')}</Box>\n        <Button color=\"primary\" onClick={handleClick}>\n          {t('table.filter.clearAll')}\n        </Button>\n      </Box>\n      <Box className={classes.filters}>\n        {props.filters?.length &&\n          props.filters.map(filter => (\n            <Select\n              triggerReset={reset}\n              key={filter.element.label}\n              {...(filter.element as SelectProps)}\n              selected={selectedFilters[filter.element.label]}\n              onChange={el =>\n                setSelectedFilters({\n                  ...selectedFilters,\n                  [filter.element.label]: el as any,\n                })\n              }\n            />\n          ))}\n      </Box>\n    </Box>\n  );\n};\n"],"names":["Select"],"mappings":"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"}