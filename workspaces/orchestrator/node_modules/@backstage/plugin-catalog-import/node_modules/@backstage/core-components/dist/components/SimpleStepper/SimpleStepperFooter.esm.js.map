{"version":3,"file":"SimpleStepperFooter.esm.js","sources":["../../../src/components/SimpleStepper/SimpleStepperFooter.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { PropsWithChildren, ReactNode, useContext } from 'react';\n\nimport { VerticalStepperContext } from './SimpleStepper';\nimport { StepActions } from './types';\nimport { coreComponentsTranslationRef } from '../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nexport type SimpleStepperFooterClassKey = 'root';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      marginTop: theme.spacing(3),\n      '& button': {\n        marginRight: theme.spacing(1),\n      },\n    },\n  }),\n  { name: 'BackstageSimpleStepperFooter' },\n);\n\ninterface CommonBtnProps {\n  text?: string;\n  handleClick?: () => void;\n  stepIndex: number;\n}\ninterface RestartBtnProps extends CommonBtnProps {}\n\ninterface NextBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  last?: boolean;\n  stepIndex: number;\n}\ninterface SkipBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\ninterface BackBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\nexport const RestartBtn = ({ text, handleClick }: RestartBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button onClick={handleClick}>{text || t('simpleStepper.reset')}</Button>\n  );\n};\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}: NextBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      variant=\"contained\"\n      color=\"primary\"\n      disabled={disabled}\n      data-testid={`nextButton-${stepIndex}`}\n      onClick={handleClick}\n    >\n      {text || (last ? t('simpleStepper.finish') : t('simpleStepper.next'))}\n    </Button>\n  );\n};\n\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }: SkipBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      variant=\"outlined\"\n      color=\"primary\"\n      disabled={disabled}\n      data-testid={`skipButton-${stepIndex}`}\n      onClick={handleClick}\n    >\n      {text || t('simpleStepper.skip')}\n    </Button>\n  );\n};\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }: BackBtnProps) => {\n  const { t } = useTranslationRef(coreComponentsTranslationRef);\n  return (\n    <Button\n      onClick={handleClick}\n      data-testid={`backButton-${stepIndex}`}\n      disabled={disabled}\n    >\n      {text || t('simpleStepper.back')}\n    </Button>\n  );\n};\n\nexport type SimpleStepperFooterProps = {\n  actions?: StepActions;\n  children?: ReactNode;\n};\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}: PropsWithChildren<SimpleStepperFooterProps>) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex: number, callback?: () => void) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    <Box className={classes.root}>\n      {[undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        <BackBtn\n          text={actions.backText}\n          handleClick={handleBack}\n          disabled={stepIndex === 0}\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showSkip && (\n        <SkipBtn\n          text={actions.skipText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canSkip && !actions.canSkip())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {[undefined, true].includes(actions.showNext) && (\n        <NextBtn\n          text={actions.nextText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showRestart && stepIndex !== 0 && (\n        <RestartBtn\n          text={actions.restartText}\n          handleClick={handleRestart}\n          stepIndex={stepIndex}\n        />\n      )}\n      {children}\n    </Box>\n  );\n};\n"],"names":[],"mappings":"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"}