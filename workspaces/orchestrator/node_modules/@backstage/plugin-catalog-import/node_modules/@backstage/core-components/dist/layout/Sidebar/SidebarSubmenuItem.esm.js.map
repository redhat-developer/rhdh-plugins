{"version":3,"file":"SidebarSubmenuItem.esm.js","sources":["../../../src/layout/Sidebar/SidebarSubmenuItem.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext, useState } from 'react';\nimport { resolvePath, useLocation, useResolvedPath } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '../../components/Link';\nimport { IconComponent } from '@backstage/core-plugin-api';\nimport classnames from 'classnames';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport { SidebarItemWithSubmenuContext } from './config';\nimport { isLocationMatch } from './utils';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\n\n/** @public */\nexport type SidebarSubmenuItemClassKey =\n  | 'item'\n  | 'itemContainer'\n  | 'selected'\n  | 'label'\n  | 'subtitle'\n  | 'dropdownArrow'\n  | 'dropdown'\n  | 'dropdownItem'\n  | 'textContent';\n\nconst useStyles = makeStyles(\n  theme => ({\n    item: {\n      height: 48,\n      width: '100%',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.navigation.color,\n      padding: theme.spacing(2.5),\n      cursor: 'pointer',\n      position: 'relative',\n      background: 'none',\n      border: 'none',\n    },\n    itemContainer: {\n      width: '100%',\n    },\n    selected: {\n      background: '#6f6f6f',\n      color: theme.palette.common.white,\n    },\n    label: {\n      margin: theme.spacing(1.75),\n      marginLeft: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n      lineHeight: 1,\n    },\n    subtitle: {\n      fontSize: 10,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    dropdownArrow: {\n      position: 'absolute',\n      right: 21,\n    },\n    dropdown: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'end',\n    },\n    dropdownItem: {\n      width: '100%',\n      padding: '10px 0 10px 0',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n    },\n    dropdownButton: {\n      textTransform: 'none',\n      justifyContent: 'flex-start',\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n  }),\n  { name: 'BackstageSidebarSubmenuItem' },\n);\n\n/**\n * Clickable item displayed when submenu item is clicked.\n * title: Text content of item\n * to: Path to navigate to when item is clicked\n *\n * @public\n */\nexport type SidebarSubmenuItemDropdownItem = {\n  title: string;\n  to: string;\n};\n/**\n * Holds submenu item content.\n *\n * @remarks\n * title: Text content of submenu item\n * subtitle: A subtitle displayed under the main title\n * to: Path to navigate to when item is clicked\n * icon: Icon displayed on the left of text content\n * dropdownItems: Optional array of dropdown items displayed when submenu item is clicked.\n *\n * @public\n */\nexport type SidebarSubmenuItemProps = {\n  title: string;\n  subtitle?: string;\n  to?: string;\n  icon?: IconComponent;\n  dropdownItems?: SidebarSubmenuItemDropdownItem[];\n  exact?: boolean;\n  initialShowDropdown?: boolean;\n};\n\n/**\n * Item used inside a submenu within the sidebar.\n *\n * @public\n */\nexport const SidebarSubmenuItem = (props: SidebarSubmenuItemProps) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems, exact } = props;\n  const classes = useStyles();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to ?? '');\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation, exact);\n\n  const [showDropDown, setShowDropDown] = useState(\n    props.initialShowDropdown ?? false,\n  );\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== undefined) {\n    dropdownItems.some(item => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath, exact);\n      return isActive;\n    });\n    return (\n      <Box className={classes.itemContainer}>\n        <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n          <Button\n            role=\"button\"\n            onClick={handleClickDropdown}\n            onTouchStart={e => e.stopPropagation()}\n            className={classnames(\n              classes.item,\n              classes.dropdownButton,\n              isActive ? classes.selected : undefined,\n            )}\n          >\n            {Icon && <Icon fontSize=\"small\" />}\n            <Typography\n              variant=\"subtitle1\"\n              component=\"span\"\n              className={classes.label}\n            >\n              {title}\n              <br />\n              {subtitle && (\n                <Typography\n                  variant=\"caption\"\n                  component=\"span\"\n                  className={classes.subtitle}\n                >\n                  {subtitle}\n                </Typography>\n              )}\n            </Typography>\n            {showDropDown ? (\n              <ArrowDropUpIcon className={classes.dropdownArrow} />\n            ) : (\n              <ArrowDropDownIcon className={classes.dropdownArrow} />\n            )}\n          </Button>\n        </Tooltip>\n        {dropdownItems && showDropDown && (\n          <Box className={classes.dropdown}>\n            {dropdownItems.map((object, key) => (\n              <Tooltip\n                key={key}\n                title={object.title}\n                enterDelay={500}\n                enterNextDelay={500}\n              >\n                <Link\n                  to={object.to}\n                  underline=\"none\"\n                  className={classes.dropdownItem}\n                  onClick={closeSubmenu}\n                  onTouchStart={e => e.stopPropagation()}\n                >\n                  <Typography component=\"span\" className={classes.textContent}>\n                    {object.title}\n                  </Typography>\n                </Link>\n              </Tooltip>\n            ))}\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  return (\n    <Box className={classes.itemContainer}>\n      <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n        <Link\n          to={to!}\n          underline=\"none\"\n          className={classnames(\n            classes.item,\n            isActive ? classes.selected : undefined,\n          )}\n          onClick={closeSubmenu}\n          onTouchStart={e => e.stopPropagation()}\n        >\n          {Icon && <Icon fontSize=\"small\" />}\n          <Typography\n            variant=\"subtitle1\"\n            component=\"span\"\n            className={classes.label}\n          >\n            {title}\n            <br />\n            {subtitle && (\n              <Typography\n                variant=\"caption\"\n                component=\"span\"\n                className={classes.subtitle}\n              >\n                {subtitle}\n              </Typography>\n            )}\n          </Typography>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n"],"names":["classnames"],"mappings":"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"}