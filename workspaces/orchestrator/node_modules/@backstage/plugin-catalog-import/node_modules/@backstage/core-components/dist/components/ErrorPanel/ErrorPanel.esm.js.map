{"version":3,"file":"ErrorPanel.esm.js","sources":["../../../src/components/ErrorPanel/ErrorPanel.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { PropsWithChildren } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\n/** @public */\nexport type ErrorPanelClassKey = 'text' | 'divider';\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageErrorPanel' },\n);\n\ntype ErrorListProps = {\n  error: string;\n  message: string;\n  request?: string;\n  stack?: string;\n  json?: string;\n};\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}: PropsWithChildren<ErrorListProps>) => {\n  const classes = useStyles();\n\n  return (\n    <List dense>\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Error\"\n          secondary={error}\n        />\n        <CopyTextButton text={error} />\n      </ListItem>\n\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Message\"\n          secondary={message}\n        />\n        <CopyTextButton text={message} />\n      </ListItem>\n\n      {stack && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Stack Trace\"\n            secondary={stack}\n          />\n          <CopyTextButton text={stack} />\n        </ListItem>\n      )}\n\n      {children}\n    </List>\n  );\n};\n\n/** @public */\nexport type ErrorPanelProps = {\n  error: Error;\n  defaultExpanded?: boolean;\n  titleFormat?: string;\n  title?: string;\n};\n\n/**\n * Renders a warning panel as the effect of an error.\n *\n * @public\n */\nexport function ErrorPanel(props: PropsWithChildren<ErrorPanelProps>) {\n  const { title, error, defaultExpanded, titleFormat, children } = props;\n  return (\n    <WarningPanel\n      severity=\"error\"\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n      titleFormat={titleFormat}\n    >\n      <ErrorList\n        error={error.name}\n        message={error.message}\n        stack={error.stack}\n        children={children}\n      />\n    </WarningPanel>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;AA2BA,MAAM,SAAA,GAAY,UAAA;AAAA,EAChB,CAAA,KAAA,MAAU;AAAA,IACR,IAAA,EAAM;AAAA,MACJ,UAAA,EAAY,WAAA;AAAA,MACZ,UAAA,EAAY,KAAA;AAAA,MACZ,SAAA,EAAW,MAAA;AAAA,MACX,WAAA,EAAa,KAAA,CAAM,OAAA,CAAQ,CAAC;AAAA,KAC9B;AAAA,IACA,OAAA,EAAS;AAAA,MACP,MAAA,EAAQ,KAAA,CAAM,OAAA,CAAQ,CAAC;AAAA;AACzB,GACF,CAAA;AAAA,EACA,EAAE,MAAM,qBAAA;AACV,CAAA;AAUA,MAAM,YAAY,CAAC;AAAA,EACjB,KAAA;AAAA,EACA,OAAA;AAAA,EACA,KAAA;AAAA,EACA;AACF,CAAA,KAAyC;AACvC,EAAA,MAAM,UAAU,SAAA,EAAU;AAE1B,EAAA,uBACE,IAAA,CAAC,IAAA,EAAA,EAAK,KAAA,EAAK,IAAA,EACT,QAAA,EAAA;AAAA,oBAAA,IAAA,CAAC,QAAA,EAAA,EAAS,YAAW,YAAA,EACnB,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA,EAAS,EAAE,SAAA,EAAW,OAAA,CAAQ,IAAA,EAAK;AAAA,UACnC,OAAA,EAAQ,OAAA;AAAA,UACR,SAAA,EAAW;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAA,EAAA,EAAe,IAAA,EAAM,KAAA,EAAO;AAAA,KAAA,EAC/B,CAAA;AAAA,oBAEA,IAAA,CAAC,QAAA,EAAA,EAAS,UAAA,EAAW,YAAA,EACnB,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA,EAAS,EAAE,SAAA,EAAW,OAAA,CAAQ,IAAA,EAAK;AAAA,UACnC,OAAA,EAAQ,SAAA;AAAA,UACR,SAAA,EAAW;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAA,EAAA,EAAe,IAAA,EAAM,OAAA,EAAS;AAAA,KAAA,EACjC,CAAA;AAAA,IAEC,KAAA,oBACC,IAAA,CAAC,QAAA,EAAA,EAAS,UAAA,EAAW,YAAA,EACnB,QAAA,EAAA;AAAA,sBAAA,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA,EAAS,EAAE,SAAA,EAAW,OAAA,CAAQ,IAAA,EAAK;AAAA,UACnC,OAAA,EAAQ,aAAA;AAAA,UACR,SAAA,EAAW;AAAA;AAAA,OACb;AAAA,sBACA,GAAA,CAAC,cAAA,EAAA,EAAe,IAAA,EAAM,KAAA,EAAO;AAAA,KAAA,EAC/B,CAAA;AAAA,IAGD;AAAA,GAAA,EACH,CAAA;AAEJ,CAAA;AAeO,SAAS,WAAW,KAAA,EAA2C;AACpE,EAAA,MAAM,EAAE,KAAA,EAAO,KAAA,EAAO,eAAA,EAAiB,WAAA,EAAa,UAAS,GAAI,KAAA;AACjE,EAAA,uBACE,GAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,QAAA,EAAS,OAAA;AAAA,MACT,KAAA,EAAO,SAAS,KAAA,CAAM,OAAA;AAAA,MACtB,eAAA;AAAA,MACA,WAAA;AAAA,MAEA,QAAA,kBAAA,GAAA;AAAA,QAAC,SAAA;AAAA,QAAA;AAAA,UACC,OAAO,KAAA,CAAM,IAAA;AAAA,UACb,SAAS,KAAA,CAAM,OAAA;AAAA,UACf,OAAO,KAAA,CAAM,KAAA;AAAA,UACb;AAAA;AAAA;AACF;AAAA,GACF;AAEJ;;;;"}