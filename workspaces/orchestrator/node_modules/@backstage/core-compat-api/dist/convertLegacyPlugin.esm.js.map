{"version":3,"file":"convertLegacyPlugin.esm.js","sources":["../src/convertLegacyPlugin.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstagePlugin as LegacyBackstagePlugin } from '@backstage/core-plugin-api';\nimport {\n  ApiBlueprint,\n  ExtensionDefinition,\n  FrontendPlugin as NewBackstagePlugin,\n  createFrontendPlugin,\n} from '@backstage/frontend-plugin-api';\nimport { convertLegacyRouteRefs } from './convertLegacyRouteRef';\n\n/** @public */\nexport function convertLegacyPlugin(\n  legacyPlugin: LegacyBackstagePlugin,\n  options: { extensions: ExtensionDefinition[] },\n): NewBackstagePlugin {\n  const apiExtensions = Array.from(legacyPlugin.getApis()).map(factory =>\n    ApiBlueprint.make({\n      name: factory.api.id,\n      params: defineParams => defineParams(factory),\n    }),\n  );\n  return createFrontendPlugin({\n    pluginId: legacyPlugin.getId(),\n    featureFlags: [...legacyPlugin.getFeatureFlags()],\n    routes: convertLegacyRouteRefs(legacyPlugin.routes ?? {}),\n    externalRoutes: convertLegacyRouteRefs(legacyPlugin.externalRoutes ?? {}),\n    extensions: [...apiExtensions, ...options.extensions],\n  });\n}\n"],"names":[],"mappings":";;;AA0BO,SAAS,mBAAA,CACd,cACA,OAAA,EACoB;AACpB,EAAA,MAAM,gBAAgB,KAAA,CAAM,IAAA,CAAK,YAAA,CAAa,OAAA,EAAS,CAAA,CAAE,GAAA;AAAA,IAAI,CAAA,OAAA,KAC3D,aAAa,IAAA,CAAK;AAAA,MAChB,IAAA,EAAM,QAAQ,GAAA,CAAI,EAAA;AAAA,MAClB,MAAA,EAAQ,CAAA,YAAA,KAAgB,YAAA,CAAa,OAAO;AAAA,KAC7C;AAAA,GACH;AACA,EAAA,OAAO,oBAAA,CAAqB;AAAA,IAC1B,QAAA,EAAU,aAAa,KAAA,EAAM;AAAA,IAC7B,YAAA,EAAc,CAAC,GAAG,YAAA,CAAa,iBAAiB,CAAA;AAAA,IAChD,MAAA,EAAQ,sBAAA,CAAuB,YAAA,CAAa,MAAA,IAAU,EAAE,CAAA;AAAA,IACxD,cAAA,EAAgB,sBAAA,CAAuB,YAAA,CAAa,cAAA,IAAkB,EAAE,CAAA;AAAA,IACxE,YAAY,CAAC,GAAG,aAAA,EAAe,GAAG,QAAQ,UAAU;AAAA,GACrD,CAAA;AACH;;;;"}