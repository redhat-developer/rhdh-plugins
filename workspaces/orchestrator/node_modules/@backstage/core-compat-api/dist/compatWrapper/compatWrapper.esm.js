import { jsx } from 'react/jsx-runtime';
import { useVersionedContext } from '@backstage/version-bridge';
import { BackwardsCompatProvider } from './BackwardsCompatProvider.esm.js';
import { ForwardsCompatProvider } from './ForwardsCompatProvider.esm.js';
import { useApiHolder, appTreeApiRef } from '@backstage/frontend-plugin-api';

function BidirectionalCompatProvider(props) {
  const isInOldApp = useVersionedContext("app-context");
  const isInNewApp = Boolean(useApiHolder().get(appTreeApiRef));
  if (isInNewApp && !isInOldApp) {
    return /* @__PURE__ */ jsx(BackwardsCompatProvider, { ...props });
  }
  if (isInOldApp && !isInNewApp) {
    return /* @__PURE__ */ jsx(ForwardsCompatProvider, { ...props });
  }
  return props.children;
}
function compatWrapper(element) {
  return /* @__PURE__ */ jsx(BidirectionalCompatProvider, { children: element });
}

export { compatWrapper };
//# sourceMappingURL=compatWrapper.esm.js.map
