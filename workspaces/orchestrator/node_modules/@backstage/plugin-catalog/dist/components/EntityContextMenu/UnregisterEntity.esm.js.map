{"version":3,"file":"UnregisterEntity.esm.js","sources":["../../../src/components/EntityContextMenu/UnregisterEntity.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { catalogTranslationRef } from '../../alpha/translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\nimport { forwardRef } from 'react';\n\ntype VisibleType = 'visible' | 'hidden' | 'disable';\n\nexport type UnregisterEntityOptions = {\n  disableUnregister: boolean | VisibleType;\n};\n\ninterface UnregisterEntityProps {\n  unregisterEntityOptions?: UnregisterEntityOptions;\n  isUnregisterAllowed: boolean;\n  onUnregisterEntity: () => void;\n  onClose: () => void;\n}\n\n// TODO: When Backstage supports only React 19+, remove the forwardRef\nexport const UnregisterEntity = forwardRef<\n  HTMLLIElement,\n  UnregisterEntityProps\n>((props, ref) => {\n  const {\n    unregisterEntityOptions,\n    isUnregisterAllowed,\n    onUnregisterEntity,\n    onClose,\n  } = props;\n  const { t } = useTranslationRef(catalogTranslationRef);\n\n  const isBoolean =\n    typeof unregisterEntityOptions?.disableUnregister === 'boolean';\n\n  const isDisabled =\n    (!isUnregisterAllowed ||\n      (isBoolean\n        ? !!unregisterEntityOptions?.disableUnregister\n        : unregisterEntityOptions?.disableUnregister === 'disable')) ??\n    false;\n\n  if (unregisterEntityOptions?.disableUnregister !== 'hidden') {\n    return (\n      <MenuItem\n        ref={ref}\n        onClick={() => {\n          onClose();\n          onUnregisterEntity();\n        }}\n        disabled={isDisabled}\n        {...props}\n      >\n        <ListItemIcon>\n          <CancelIcon fontSize=\"small\" />\n        </ListItemIcon>\n        <ListItemText primary={t('entityContextMenu.unregisterMenuTitle')} />\n      </MenuItem>\n    );\n  }\n\n  return null;\n});\n"],"names":[],"mappings":";;;;;;;;;AAsCO,MAAM,gBAAA,GAAmB,UAAA,CAG9B,CAAC,KAAA,EAAO,GAAA,KAAQ;AAChB,EAAA,MAAM;AAAA,IACJ,uBAAA;AAAA,IACA,mBAAA;AAAA,IACA,kBAAA;AAAA,IACA;AAAA,GACF,GAAI,KAAA;AACJ,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,qBAAqB,CAAA;AAErD,EAAA,MAAM,SAAA,GACJ,OAAO,uBAAA,EAAyB,iBAAA,KAAsB,SAAA;AAExD,EAAA,MAAM,UAAA,GAAA,CACH,CAAC,mBAAA,KACC,SAAA,GACG,CAAC,CAAC,uBAAA,EAAyB,iBAAA,GAC3B,uBAAA,EAAyB,iBAAA,KAAsB,SAAA,CAAA,KACrD,KAAA;AAEF,EAAA,IAAI,uBAAA,EAAyB,sBAAsB,QAAA,EAAU;AAC3D,IAAA,uBACE,IAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,GAAA;AAAA,QACA,SAAS,MAAM;AACb,UAAA,OAAA,EAAQ;AACR,UAAA,kBAAA,EAAmB;AAAA,QACrB,CAAA;AAAA,QACA,QAAA,EAAU,UAAA;AAAA,QACT,GAAG,KAAA;AAAA,QAEJ,QAAA,EAAA;AAAA,0BAAA,GAAA,CAAC,YAAA,EAAA,EACC,QAAA,kBAAA,GAAA,CAAC,UAAA,EAAA,EAAW,QAAA,EAAS,SAAQ,CAAA,EAC/B,CAAA;AAAA,0BACA,GAAA,CAAC,YAAA,EAAA,EAAa,OAAA,EAAS,CAAA,CAAE,uCAAuC,CAAA,EAAG;AAAA;AAAA;AAAA,KACrE;AAAA,EAEJ;AAEA,EAAA,OAAO,IAAA;AACT,CAAC;;;;"}