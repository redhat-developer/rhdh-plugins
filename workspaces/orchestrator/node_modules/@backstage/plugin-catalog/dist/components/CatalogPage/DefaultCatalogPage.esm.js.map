{"version":3,"file":"DefaultCatalogPage.esm.js","sources":["../../../src/components/CatalogPage/DefaultCatalogPage.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Content,\n  ContentHeader,\n  CreateButton,\n  PageWithHeader,\n  SupportButton,\n  TableColumn,\n  TableProps,\n} from '@backstage/core-components';\nimport { configApiRef, useApi, useRouteRef } from '@backstage/core-plugin-api';\nimport {\n  CatalogFilterLayout,\n  DefaultFilters,\n  EntityListPagination,\n  EntityListProvider,\n  EntityOwnerPickerProps,\n  UserListFilterKind,\n} from '@backstage/plugin-catalog-react';\nimport { ReactNode } from 'react';\nimport { createComponentRouteRef } from '../../routes';\nimport { CatalogTable, CatalogTableRow } from '../CatalogTable';\nimport { catalogTranslationRef } from '../../alpha/translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\nimport { CatalogTableColumnsFunc } from '../CatalogTable/types';\nimport { catalogEntityCreatePermission } from '@backstage/plugin-catalog-common/alpha';\nimport { usePermission } from '@backstage/plugin-permission-react';\n\n/** @internal */\nexport type BaseCatalogPageProps = {\n  filters: ReactNode;\n  content?: ReactNode;\n  pagination?: EntityListPagination;\n};\n\n/** @internal */\nexport function BaseCatalogPage(props: BaseCatalogPageProps) {\n  const { filters, content = <CatalogTable />, pagination } = props;\n  const orgName =\n    useApi(configApiRef).getOptionalString('organization.name') ?? 'Backstage';\n  const createComponentLink = useRouteRef(createComponentRouteRef);\n  const { t } = useTranslationRef(catalogTranslationRef);\n  const { allowed } = usePermission({\n    permission: catalogEntityCreatePermission,\n  });\n\n  return (\n    <PageWithHeader title={t('indexPage.title', { orgName })} themeId=\"home\">\n      <Content>\n        <ContentHeader title=\"\">\n          {allowed && (\n            <CreateButton\n              title={t('indexPage.createButtonTitle')}\n              to={createComponentLink && createComponentLink()}\n            />\n          )}\n          <SupportButton>{t('indexPage.supportButtonContent')}</SupportButton>\n        </ContentHeader>\n        <EntityListProvider pagination={pagination}>\n          <CatalogFilterLayout>\n            <CatalogFilterLayout.Filters>{filters}</CatalogFilterLayout.Filters>\n            <CatalogFilterLayout.Content>{content}</CatalogFilterLayout.Content>\n          </CatalogFilterLayout>\n        </EntityListProvider>\n      </Content>\n    </PageWithHeader>\n  );\n}\n\n/**\n * Props for root catalog pages.\n *\n * @public\n */\nexport interface DefaultCatalogPageProps {\n  initiallySelectedFilter?: UserListFilterKind;\n  columns?: TableColumn<CatalogTableRow>[] | CatalogTableColumnsFunc;\n  actions?: TableProps<CatalogTableRow>['actions'];\n  initialKind?: string;\n  tableOptions?: TableProps<CatalogTableRow>['options'];\n  emptyContent?: ReactNode;\n  ownerPickerMode?: EntityOwnerPickerProps['mode'];\n  filters?: ReactNode;\n  initiallySelectedNamespaces?: string[];\n  pagination?: EntityListPagination;\n}\n\nexport function DefaultCatalogPage(props: DefaultCatalogPageProps) {\n  const {\n    columns,\n    actions,\n    initiallySelectedFilter = 'owned',\n    initialKind = 'component',\n    tableOptions = {},\n    emptyContent,\n    pagination,\n    ownerPickerMode,\n    filters,\n    initiallySelectedNamespaces,\n  } = props;\n\n  return (\n    <BaseCatalogPage\n      filters={\n        filters ?? (\n          <DefaultFilters\n            initialKind={initialKind}\n            initiallySelectedFilter={initiallySelectedFilter}\n            ownerPickerMode={ownerPickerMode}\n            initiallySelectedNamespaces={initiallySelectedNamespaces}\n          />\n        )\n      }\n      content={\n        <CatalogTable\n          columns={columns}\n          actions={actions}\n          tableOptions={tableOptions}\n          emptyContent={emptyContent}\n        />\n      }\n      pagination={pagination}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAmDO,SAAS,gBAAgB,KAAA,EAA6B;AAC3D,EAAA,MAAM,EAAE,OAAA,EAAS,OAAA,uBAAW,YAAA,EAAA,EAAa,CAAA,EAAI,YAAW,GAAI,KAAA;AAC5D,EAAA,MAAM,UACJ,MAAA,CAAO,YAAY,CAAA,CAAE,iBAAA,CAAkB,mBAAmB,CAAA,IAAK,WAAA;AACjE,EAAA,MAAM,mBAAA,GAAsB,YAAY,uBAAuB,CAAA;AAC/D,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,qBAAqB,CAAA;AACrD,EAAA,MAAM,EAAE,OAAA,EAAQ,GAAI,aAAA,CAAc;AAAA,IAChC,UAAA,EAAY;AAAA,GACb,CAAA;AAED,EAAA,uBACE,GAAA,CAAC,cAAA,EAAA,EAAe,KAAA,EAAO,CAAA,CAAE,iBAAA,EAAmB,EAAE,OAAA,EAAS,CAAA,EAAG,OAAA,EAAQ,MAAA,EAChE,QAAA,kBAAA,IAAA,CAAC,OAAA,EAAA,EACC,QAAA,EAAA;AAAA,oBAAA,IAAA,CAAC,aAAA,EAAA,EAAc,OAAM,EAAA,EAClB,QAAA,EAAA;AAAA,MAAA,OAAA,oBACC,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,KAAA,EAAO,EAAE,6BAA6B,CAAA;AAAA,UACtC,EAAA,EAAI,uBAAuB,mBAAA;AAAoB;AAAA,OACjD;AAAA,sBAEF,GAAA,CAAC,aAAA,EAAA,EAAe,QAAA,EAAA,CAAA,CAAE,gCAAgC,CAAA,EAAE;AAAA,KAAA,EACtD,CAAA;AAAA,oBACA,GAAA,CAAC,kBAAA,EAAA,EAAmB,UAAA,EAClB,QAAA,kBAAA,IAAA,CAAC,mBAAA,EAAA,EACC,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,mBAAA,CAAoB,OAAA,EAApB,EAA6B,QAAA,EAAA,OAAA,EAAQ,CAAA;AAAA,sBACtC,GAAA,CAAC,mBAAA,CAAoB,OAAA,EAApB,EAA6B,QAAA,EAAA,OAAA,EAAQ;AAAA,KAAA,EACxC,CAAA,EACF;AAAA,GAAA,EACF,CAAA,EACF,CAAA;AAEJ;AAoBO,SAAS,mBAAmB,KAAA,EAAgC;AACjE,EAAA,MAAM;AAAA,IACJ,OAAA;AAAA,IACA,OAAA;AAAA,IACA,uBAAA,GAA0B,OAAA;AAAA,IAC1B,WAAA,GAAc,WAAA;AAAA,IACd,eAAe,EAAC;AAAA,IAChB,YAAA;AAAA,IACA,UAAA;AAAA,IACA,eAAA;AAAA,IACA,OAAA;AAAA,IACA;AAAA,GACF,GAAI,KAAA;AAEJ,EAAA,uBACE,GAAA;AAAA,IAAC,eAAA;AAAA,IAAA;AAAA,MACC,SACE,OAAA,oBACE,GAAA;AAAA,QAAC,cAAA;AAAA,QAAA;AAAA,UACC,WAAA;AAAA,UACA,uBAAA;AAAA,UACA,eAAA;AAAA,UACA;AAAA;AAAA,OACF;AAAA,MAGJ,OAAA,kBACE,GAAA;AAAA,QAAC,YAAA;AAAA,QAAA;AAAA,UACC,OAAA;AAAA,UACA,OAAA;AAAA,UACA,YAAA;AAAA,UACA;AAAA;AAAA,OACF;AAAA,MAEF;AAAA;AAAA,GACF;AAEJ;;;;"}