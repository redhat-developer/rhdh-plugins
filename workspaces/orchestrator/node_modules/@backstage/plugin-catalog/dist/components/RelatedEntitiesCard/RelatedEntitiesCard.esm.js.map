{"version":3,"file":"RelatedEntitiesCard.esm.js","sources":["../../../src/components/RelatedEntitiesCard/RelatedEntitiesCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport Typography from '@material-ui/core/Typography';\nimport {\n  EntityTable,\n  useEntity,\n  useRelatedEntities,\n} from '@backstage/plugin-catalog-react';\nimport {\n  InfoCard,\n  InfoCardVariants,\n  Link,\n  Progress,\n  ResponseErrorPanel,\n  TableColumn,\n  TableOptions,\n} from '@backstage/core-components';\nimport {\n  asComponentEntities,\n  asDomainEntities,\n  asResourceEntities,\n  asSystemEntities,\n  componentEntityColumns,\n  componentEntityHelpLink,\n  domainEntityColumns,\n  domainEntityHelpLink,\n  resourceEntityColumns,\n  resourceEntityHelpLink,\n  systemEntityColumns,\n  systemEntityHelpLink,\n} from './presets';\nimport { catalogTranslationRef } from '../../alpha/translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\n/** @public */\nexport type RelatedEntitiesCardProps<T extends Entity> = {\n  variant?: InfoCardVariants;\n  title: string;\n  columns: TableColumn<T>[];\n  entityKind?: string;\n  relationType: string;\n  emptyMessage: string;\n  emptyHelpLink: string;\n  asRenderableEntities: (entities: Entity[]) => T[];\n  tableOptions?: TableOptions;\n};\n\n/**\n * A low level card component that can be used as a building block for more\n * specific cards.\n *\n * @remarks\n *\n * You probably want to make a dedicated component for your needs, which renders\n * this card as its implementation with some of the props set to the appropriate\n * values.\n *\n * @public\n */\nexport const RelatedEntitiesCard = <T extends Entity>(\n  props: RelatedEntitiesCardProps<T>,\n) => {\n  const {\n    variant = 'gridItem',\n    title,\n    columns,\n    entityKind,\n    relationType,\n    emptyMessage,\n    emptyHelpLink,\n    asRenderableEntities,\n    tableOptions = {},\n  } = props;\n  const { t } = useTranslationRef(catalogTranslationRef);\n  const { entity } = useEntity();\n  const { entities, loading, error } = useRelatedEntities(entity, {\n    type: relationType,\n    kind: entityKind,\n  });\n\n  if (loading) {\n    return (\n      <InfoCard variant={variant} title={title}>\n        <Progress />\n      </InfoCard>\n    );\n  }\n\n  if (error) {\n    return (\n      <InfoCard variant={variant} title={title}>\n        <ResponseErrorPanel error={error} />\n      </InfoCard>\n    );\n  }\n\n  return (\n    <EntityTable\n      title={title}\n      variant={variant}\n      emptyContent={\n        <div style={{ textAlign: 'center' }}>\n          <Typography variant=\"body1\">{emptyMessage}</Typography>\n          <Typography variant=\"body2\">\n            <Link to={emptyHelpLink} externalLinkIcon>\n              {t('relatedEntitiesCard.emptyHelpLinkTitle')}\n            </Link>\n          </Typography>\n        </div>\n      }\n      columns={columns}\n      entities={asRenderableEntities(entities || [])}\n      tableOptions={tableOptions}\n    />\n  );\n};\n\nRelatedEntitiesCard.componentEntityColumns = componentEntityColumns;\nRelatedEntitiesCard.componentEntityHelpLink = componentEntityHelpLink;\nRelatedEntitiesCard.asComponentEntities = asComponentEntities;\nRelatedEntitiesCard.resourceEntityColumns = resourceEntityColumns;\nRelatedEntitiesCard.resourceEntityHelpLink = resourceEntityHelpLink;\nRelatedEntitiesCard.asResourceEntities = asResourceEntities;\nRelatedEntitiesCard.systemEntityColumns = systemEntityColumns;\nRelatedEntitiesCard.systemEntityHelpLink = systemEntityHelpLink;\nRelatedEntitiesCard.asSystemEntities = asSystemEntities;\nRelatedEntitiesCard.domainEntityColums = domainEntityColumns;\nRelatedEntitiesCard.domainEntityHelpLink = domainEntityHelpLink;\nRelatedEntitiesCard.asDomainEntities = asDomainEntities;\n"],"names":[],"mappings":";;;;;;;;AA0EO,MAAM,mBAAA,GAAsB,CACjC,KAAA,KACG;AACH,EAAA,MAAM;AAAA,IACJ,OAAA,GAAU,UAAA;AAAA,IACV,KAAA;AAAA,IACA,OAAA;AAAA,IACA,UAAA;AAAA,IACA,YAAA;AAAA,IACA,YAAA;AAAA,IACA,aAAA;AAAA,IACA,oBAAA;AAAA,IACA,eAAe;AAAC,GAClB,GAAI,KAAA;AACJ,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,qBAAqB,CAAA;AACrD,EAAA,MAAM,EAAE,MAAA,EAAO,GAAI,SAAA,EAAU;AAC7B,EAAA,MAAM,EAAE,QAAA,EAAU,OAAA,EAAS,KAAA,EAAM,GAAI,mBAAmB,MAAA,EAAQ;AAAA,IAC9D,IAAA,EAAM,YAAA;AAAA,IACN,IAAA,EAAM;AAAA,GACP,CAAA;AAED,EAAA,IAAI,OAAA,EAAS;AACX,IAAA,2BACG,QAAA,EAAA,EAAS,OAAA,EAAkB,KAAA,EAC1B,QAAA,kBAAA,GAAA,CAAC,YAAS,CAAA,EACZ,CAAA;AAAA,EAEJ;AAEA,EAAA,IAAI,KAAA,EAAO;AACT,IAAA,2BACG,QAAA,EAAA,EAAS,OAAA,EAAkB,OAC1B,QAAA,kBAAA,GAAA,CAAC,kBAAA,EAAA,EAAmB,OAAc,CAAA,EACpC,CAAA;AAAA,EAEJ;AAEA,EAAA,uBACE,GAAA;AAAA,IAAC,WAAA;AAAA,IAAA;AAAA,MACC,KAAA;AAAA,MACA,OAAA;AAAA,MACA,8BACE,IAAA,CAAC,KAAA,EAAA,EAAI,OAAO,EAAE,SAAA,EAAW,UAAS,EAChC,QAAA,EAAA;AAAA,wBAAA,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EAAS,QAAA,EAAA,YAAA,EAAa,CAAA;AAAA,wBAC1C,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EAClB,QAAA,kBAAA,GAAA,CAAC,IAAA,EAAA,EAAK,EAAA,EAAI,aAAA,EAAe,gBAAA,EAAgB,IAAA,EACtC,QAAA,EAAA,CAAA,CAAE,wCAAwC,GAC7C,CAAA,EACF;AAAA,OAAA,EACF,CAAA;AAAA,MAEF,OAAA;AAAA,MACA,QAAA,EAAU,oBAAA,CAAqB,QAAA,IAAY,EAAE,CAAA;AAAA,MAC7C;AAAA;AAAA,GACF;AAEJ;AAEA,mBAAA,CAAoB,sBAAA,GAAyB,sBAAA;AAC7C,mBAAA,CAAoB,uBAAA,GAA0B,uBAAA;AAC9C,mBAAA,CAAoB,mBAAA,GAAsB,mBAAA;AAC1C,mBAAA,CAAoB,qBAAA,GAAwB,qBAAA;AAC5C,mBAAA,CAAoB,sBAAA,GAAyB,sBAAA;AAC7C,mBAAA,CAAoB,kBAAA,GAAqB,kBAAA;AACzC,mBAAA,CAAoB,mBAAA,GAAsB,mBAAA;AAC1C,mBAAA,CAAoB,oBAAA,GAAuB,oBAAA;AAC3C,mBAAA,CAAoB,gBAAA,GAAmB,gBAAA;AACvC,mBAAA,CAAoB,kBAAA,GAAqB,mBAAA;AACzC,mBAAA,CAAoB,oBAAA,GAAuB,oBAAA;AAC3C,mBAAA,CAAoB,gBAAA,GAAmB,gBAAA;;;;"}