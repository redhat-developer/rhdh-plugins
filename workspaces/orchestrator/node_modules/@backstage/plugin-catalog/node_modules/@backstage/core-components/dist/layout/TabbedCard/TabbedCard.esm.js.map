{"version":3,"file":"TabbedCard.esm.js","sources":["../../../src/layout/TabbedCard/TabbedCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Tab, { TabProps } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport {\n  ChangeEvent,\n  Children,\n  isValidElement,\n  PropsWithChildren,\n  ReactElement,\n  ReactNode,\n  useState,\n} from 'react';\nimport { BottomLink, BottomLinkProps } from '../BottomLink';\nimport { ErrorBoundary, ErrorBoundaryProps } from '../ErrorBoundary';\n\nexport type TabbedCardClassKey = 'root' | 'indicator';\n\nconst useTabsStyles = makeStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3),\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageTabbedCard' },\n);\n\n/** @public */\nexport type BoldHeaderClassKey = 'root' | 'title' | 'subheader';\n\nconst BoldHeader = withStyles(\n  theme => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: 'inline-block' },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) },\n  }),\n  { name: 'BackstageTabbedCardBoldHeader' },\n)(CardHeader);\n\ntype Props = {\n  /** @deprecated Use errorBoundaryProps instead */\n  slackChannel?: string;\n  errorBoundaryProps?: ErrorBoundaryProps;\n  children?: ReactElement<TabProps>[];\n  onChange?: (event: ChangeEvent<{}>, value: number | string) => void;\n  title?: string;\n  value?: number | string;\n  deepLink?: BottomLinkProps;\n};\n\nexport function TabbedCard(props: PropsWithChildren<Props>) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange,\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n\n  const handleChange = onChange\n    ? onChange\n    : (_ev: unknown, newSelectedIndex: number) => selectIndex(newSelectedIndex);\n\n  let selectedTabContent: ReactNode;\n  if (!value) {\n    Children.map(children, (child, index) => {\n      if (isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  } else {\n    Children.map(children, child => {\n      if (\n        isValidElement<{ children?: ReactNode; value?: unknown }>(child) &&\n        child?.props.value === value\n      ) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  }\n\n  const errProps: ErrorBoundaryProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    <Card>\n      <ErrorBoundary {...errProps}>\n        {title && <BoldHeader title={title} />}\n        <Tabs\n          classes={tabsClasses}\n          value={value || selectedIndex}\n          onChange={handleChange}\n        >\n          {children}\n        </Tabs>\n        <Divider />\n        <CardContent>{selectedTabContent}</CardContent>\n        {deepLink && <BottomLink {...deepLink} />}\n      </ErrorBoundary>\n    </Card>\n  );\n}\n\n/** @public */\nexport type CardTabClassKey = 'root' | 'selected';\n\nconst useCardTabStyles = makeStyles(\n  theme => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: 'none',\n      '&:hover': {\n        opacity: 1,\n        backgroundColor: 'transparent',\n        color: theme.palette.text.primary,\n      },\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n  }),\n  { name: 'BackstageCardTab' },\n);\n\ntype CardTabProps = TabProps & {\n  children: ReactNode;\n};\n\n/**\n * Card tab component used in {@link TabbedCard}\n *\n * @public\n *\n */\nexport function CardTab(props: PropsWithChildren<CardTabProps>) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n\n  return <Tab disableRipple classes={classes} {...restProps} />;\n}\n"],"names":["Tab"],"mappings":"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"}