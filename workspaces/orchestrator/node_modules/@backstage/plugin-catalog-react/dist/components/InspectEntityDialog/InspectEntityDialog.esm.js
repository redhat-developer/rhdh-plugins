import { jsxs, jsx } from 'react/jsx-runtime';
import Box from '@material-ui/core/Box';
import Button from '@material-ui/core/Button';
import Dialog from '@material-ui/core/Dialog';
import DialogActions from '@material-ui/core/DialogActions';
import DialogContent from '@material-ui/core/DialogContent';
import DialogTitle from '@material-ui/core/DialogTitle';
import Tab from '@material-ui/core/Tab';
import Tabs from '@material-ui/core/Tabs';
import { makeStyles } from '@material-ui/core/styles';
import { useState, useEffect } from 'react';
import { AncestryPage } from './components/AncestryPage.esm.js';
import { ColocatedPage } from './components/ColocatedPage.esm.js';
import { JsonPage } from './components/JsonPage.esm.js';
import { OverviewPage } from './components/OverviewPage.esm.js';
import { YamlPage } from './components/YamlPage.esm.js';
import { catalogReactTranslationRef } from '../../translation.esm.js';
import { useTranslationRef } from '@backstage/core-plugin-api/alpha';

const useStyles = makeStyles((theme) => ({
  fullHeightDialog: {
    height: "calc(100% - 64px)"
  },
  root: {
    display: "flex",
    flexGrow: 1,
    width: "100%",
    backgroundColor: theme.palette.background.paper
  },
  tabs: {
    borderRight: `1px solid ${theme.palette.divider}`,
    flexShrink: 0
  },
  tabContents: {
    flexGrow: 1,
    overflowX: "auto"
  }
}));
function TabPanel(props) {
  const { children, value, index, ...other } = props;
  const classes = useStyles();
  return /* @__PURE__ */ jsx(
    "div",
    {
      role: "tabpanel",
      hidden: value !== index,
      id: `vertical-tabpanel-${index}`,
      "aria-labelledby": `vertical-tab-${index}`,
      className: classes.tabContents,
      ...other,
      children: value === index && /* @__PURE__ */ jsx(Box, { pl: 3, pr: 3, children })
    }
  );
}
function a11yProps(index) {
  return {
    id: `vertical-tab-${index}`,
    "aria-controls": `vertical-tabpanel-${index}`
  };
}
const tabNames = {
  overview: "Overview",
  ancestry: "Ancestry",
  colocated: "Colocated",
  json: "Raw JSON",
  yaml: "Raw YAML"
};
const tabs = Object.keys(tabNames);
function InspectEntityDialog(props) {
  const classes = useStyles();
  const [activeTab, setActiveTab] = useState(
    getTabIndex(tabs, props.initialTab)
  );
  const { t } = useTranslationRef(catalogReactTranslationRef);
  useEffect(() => {
    getTabIndex(tabs, props.initialTab);
  }, [props.open, props.initialTab]);
  if (!props.entity) {
    return null;
  }
  return /* @__PURE__ */ jsxs(
    Dialog,
    {
      fullWidth: true,
      maxWidth: "xl",
      open: props.open,
      onClose: props.onClose,
      "aria-labelledby": "entity-inspector-dialog-title",
      PaperProps: { className: classes.fullHeightDialog },
      children: [
        /* @__PURE__ */ jsx(DialogTitle, { id: "entity-inspector-dialog-title", children: t("inspectEntityDialog.title") }),
        /* @__PURE__ */ jsx(DialogContent, { dividers: true, children: /* @__PURE__ */ jsxs("div", { className: classes.root, children: [
          /* @__PURE__ */ jsx(
            Tabs,
            {
              orientation: "vertical",
              variant: "scrollable",
              value: activeTab,
              onChange: (_, tabIndex) => {
                setActiveTab(tabIndex);
                props.onSelect?.(tabs[tabIndex]);
              },
              "aria-label": "Inspector options",
              className: classes.tabs,
              children: tabs.map((tab, index) => /* @__PURE__ */ jsx(Tab, { label: tabNames[tab], ...a11yProps(index) }, tab))
            }
          ),
          /* @__PURE__ */ jsx(TabPanel, { value: activeTab, index: 0, children: /* @__PURE__ */ jsx(OverviewPage, { entity: props.entity }) }),
          /* @__PURE__ */ jsx(TabPanel, { value: activeTab, index: 1, children: /* @__PURE__ */ jsx(AncestryPage, { entity: props.entity }) }),
          /* @__PURE__ */ jsx(TabPanel, { value: activeTab, index: 2, children: /* @__PURE__ */ jsx(ColocatedPage, { entity: props.entity }) }),
          /* @__PURE__ */ jsx(TabPanel, { value: activeTab, index: 3, children: /* @__PURE__ */ jsx(JsonPage, { entity: props.entity }) }),
          /* @__PURE__ */ jsx(TabPanel, { value: activeTab, index: 4, children: /* @__PURE__ */ jsx(YamlPage, { entity: props.entity }) })
        ] }) }),
        /* @__PURE__ */ jsx(DialogActions, { children: /* @__PURE__ */ jsx(Button, { onClick: props.onClose, color: "primary", children: t("inspectEntityDialog.closeButtonTitle") }) })
      ]
    }
  );
}
function getTabIndex(allTabs, initialTab) {
  return initialTab ? allTabs.indexOf(initialTab) : 0;
}

export { InspectEntityDialog };
//# sourceMappingURL=InspectEntityDialog.esm.js.map
