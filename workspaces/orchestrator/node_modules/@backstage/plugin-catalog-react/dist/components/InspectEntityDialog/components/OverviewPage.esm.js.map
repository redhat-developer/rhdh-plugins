{"version":3,"file":"OverviewPage.esm.js","sources":["../../../../src/components/InspectEntityDialog/components/OverviewPage.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlphaEntity } from '@backstage/catalog-model/alpha';\nimport Box from '@material-ui/core/Box';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport { EntityRefLink } from '../../EntityRefLink';\nimport {\n  Container,\n  HelpIcon,\n  KeyValueListItem,\n  ListItemText,\n  ListSubheader,\n} from './common';\nimport { stringifyEntityRef } from '@backstage/catalog-model';\nimport { CopyTextButton } from '@backstage/core-components';\nimport { catalogReactTranslationRef } from '../../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nexport function OverviewPage(props: { entity: AlphaEntity }) {\n  const classes = useStyles();\n  const {\n    apiVersion,\n    kind,\n    metadata,\n    spec,\n    relations = [],\n    status = {},\n  } = props.entity;\n\n  const groupedRelations = groupBy(\n    sortBy(relations, r => r.targetRef),\n    'type',\n  );\n  const { t } = useTranslationRef(catalogReactTranslationRef);\n\n  const entityRef = stringifyEntityRef(props.entity);\n  return (\n    <>\n      <DialogContentText variant=\"h2\">\n        {t('inspectEntityDialog.overviewPage.title')}\n      </DialogContentText>\n      <div className={classes.root}>\n        <Container title=\"Identity\">\n          <List dense>\n            <ListItem>\n              <ListItemText primary=\"apiVersion\" secondary={apiVersion} />\n            </ListItem>\n            <ListItem>\n              <ListItemText primary=\"kind\" secondary={kind} />\n            </ListItem>\n            {spec?.type && (\n              <ListItem>\n                <ListItemText\n                  primary=\"spec.type\"\n                  secondary={spec.type?.toString()}\n                />\n              </ListItem>\n            )}\n            {metadata.uid && (\n              <ListItem>\n                <ListItemText primary=\"uid\" secondary={metadata.uid} />\n                <ListItemSecondaryAction>\n                  <CopyTextButton text={metadata.uid} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            )}\n            {metadata.etag && (\n              <ListItem>\n                <ListItemText primary=\"etag\" secondary={metadata.etag} />\n                <ListItemSecondaryAction>\n                  <CopyTextButton text={metadata.etag} />\n                </ListItemSecondaryAction>\n              </ListItem>\n            )}\n            <ListItem>\n              <ListItemText primary=\"entityRef\" secondary={entityRef} />\n              <ListItemSecondaryAction>\n                <CopyTextButton text={entityRef} />\n              </ListItemSecondaryAction>\n            </ListItem>\n          </List>\n        </Container>\n\n        <Container title=\"Metadata\">\n          {!!Object.keys(metadata.annotations || {}).length && (\n            <List\n              dense\n              subheader={\n                <ListSubheader>\n                  Annotations\n                  <HelpIcon to=\"https://backstage.io/docs/features/software-catalog/well-known-annotations\" />\n                </ListSubheader>\n              }\n            >\n              {Object.entries(metadata.annotations!).map(entry => (\n                <KeyValueListItem key={entry[0]} indent entry={entry} />\n              ))}\n            </List>\n          )}\n          {!!Object.keys(metadata.labels || {}).length && (\n            <List dense subheader={<ListSubheader>Labels</ListSubheader>}>\n              {Object.entries(metadata.labels!).map(entry => (\n                <KeyValueListItem key={entry[0]} indent entry={entry} />\n              ))}\n            </List>\n          )}\n          {!!metadata.tags?.length && (\n            <List dense subheader={<ListSubheader>Tags</ListSubheader>}>\n              {metadata.tags.map((tag, index) => (\n                <ListItem key={`${tag}-${index}`}>\n                  <ListItemIcon />\n                  <ListItemText primary={tag} />\n                </ListItem>\n              ))}\n            </List>\n          )}\n        </Container>\n\n        {!!relations.length && (\n          <Container\n            title=\"Relations\"\n            helpLink=\"https://backstage.io/docs/features/software-catalog/well-known-relations\"\n          >\n            {Object.entries(groupedRelations).map(\n              ([type, groupRelations], index) => (\n                <div key={index}>\n                  <List dense subheader={<ListSubheader>{type}</ListSubheader>}>\n                    {groupRelations.map(group => (\n                      <ListItem key={group.targetRef}>\n                        <ListItemText\n                          primary={\n                            <EntityRefLink entityRef={group.targetRef} />\n                          }\n                        />\n                      </ListItem>\n                    ))}\n                  </List>\n                </div>\n              ),\n            )}\n          </Container>\n        )}\n\n        {!!status.items?.length && (\n          <Container\n            title=\"Status\"\n            helpLink=\"https://backstage.io/docs/features/software-catalog/well-known-statuses\"\n          >\n            {status.items.map((item, index) => (\n              <div key={index}>\n                <Typography>\n                  {item.level}: {item.type}\n                </Typography>\n                <Box ml={2}>{item.message}</Box>\n              </div>\n            ))}\n          </Container>\n        )}\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}