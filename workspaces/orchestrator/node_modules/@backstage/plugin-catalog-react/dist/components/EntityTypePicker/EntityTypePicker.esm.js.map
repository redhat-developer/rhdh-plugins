{"version":3,"file":"EntityTypePicker.esm.js","sources":["../../../src/components/EntityTypePicker/EntityTypePicker.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\nimport Box from '@material-ui/core/Box';\nimport { useEntityTypeFilter } from '../../hooks/useEntityTypeFilter';\n\nimport { alertApiRef, useApi } from '@backstage/core-plugin-api';\nimport { Select } from '@backstage/core-components';\nimport { catalogReactTranslationRef } from '../../translation';\nimport { useTranslationRef } from '@backstage/core-plugin-api/alpha';\n\n/**\n * Props for {@link EntityTypePicker}.\n *\n * @public\n */\nexport interface EntityTypePickerProps {\n  initialFilter?: string;\n  hidden?: boolean;\n}\n\n/** @public */\nexport const EntityTypePicker = (props: EntityTypePickerProps) => {\n  const { hidden, initialFilter } = props;\n  const alertApi = useApi(alertApiRef);\n  const { error, availableTypes, selectedTypes, setSelectedTypes } =\n    useEntityTypeFilter();\n  const { t } = useTranslationRef(catalogReactTranslationRef);\n\n  useEffect(() => {\n    if (error) {\n      alertApi.post({\n        message: t('entityTypePicker.errorMessage'),\n        severity: 'error',\n      });\n    }\n    if (initialFilter) {\n      setSelectedTypes([initialFilter]);\n    }\n  }, [error, alertApi, initialFilter, setSelectedTypes, t]);\n\n  if (availableTypes.length === 0 || error) return null;\n\n  availableTypes.sort((a, b) =>\n    a.toLocaleLowerCase('en-US').localeCompare(b.toLocaleLowerCase('en-US')),\n  );\n\n  const items = [\n    { value: 'all', label: t('entityTypePicker.optionAllTitle') },\n    ...availableTypes.map((type: string) => ({\n      value: type,\n      label: type,\n    })),\n  ];\n\n  return hidden ? null : (\n    <Box pb={1} pt={1}>\n      <Select\n        label={t('entityTypePicker.title')}\n        items={items}\n        selected={(items.length > 1 ? selectedTypes[0] : undefined) ?? 'all'}\n        onChange={value =>\n          setSelectedTypes(value === 'all' ? [] : [String(value)])\n        }\n      />\n    </Box>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;AAoCO,MAAM,gBAAA,GAAmB,CAAC,KAAA,KAAiC;AAChE,EAAA,MAAM,EAAE,MAAA,EAAQ,aAAA,EAAc,GAAI,KAAA;AAClC,EAAA,MAAM,QAAA,GAAW,OAAO,WAAW,CAAA;AACnC,EAAA,MAAM,EAAE,KAAA,EAAO,cAAA,EAAgB,aAAA,EAAe,gBAAA,KAC5C,mBAAA,EAAoB;AACtB,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,0BAA0B,CAAA;AAE1D,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,KAAA,EAAO;AACT,MAAA,QAAA,CAAS,IAAA,CAAK;AAAA,QACZ,OAAA,EAAS,EAAE,+BAA+B,CAAA;AAAA,QAC1C,QAAA,EAAU;AAAA,OACX,CAAA;AAAA,IACH;AACA,IAAA,IAAI,aAAA,EAAe;AACjB,MAAA,gBAAA,CAAiB,CAAC,aAAa,CAAC,CAAA;AAAA,IAClC;AAAA,EACF,GAAG,CAAC,KAAA,EAAO,UAAU,aAAA,EAAe,gBAAA,EAAkB,CAAC,CAAC,CAAA;AAExD,EAAA,IAAI,cAAA,CAAe,MAAA,KAAW,CAAA,IAAK,KAAA,EAAO,OAAO,IAAA;AAEjD,EAAA,cAAA,CAAe,IAAA;AAAA,IAAK,CAAC,CAAA,EAAG,CAAA,KACtB,CAAA,CAAE,iBAAA,CAAkB,OAAO,CAAA,CAAE,aAAA,CAAc,CAAA,CAAE,iBAAA,CAAkB,OAAO,CAAC;AAAA,GACzE;AAEA,EAAA,MAAM,KAAA,GAAQ;AAAA,IACZ,EAAE,KAAA,EAAO,KAAA,EAAO,KAAA,EAAO,CAAA,CAAE,iCAAiC,CAAA,EAAE;AAAA,IAC5D,GAAG,cAAA,CAAe,GAAA,CAAI,CAAC,IAAA,MAAkB;AAAA,MACvC,KAAA,EAAO,IAAA;AAAA,MACP,KAAA,EAAO;AAAA,KACT,CAAE;AAAA,GACJ;AAEA,EAAA,OAAO,SAAS,IAAA,mBACd,GAAA,CAAC,OAAI,EAAA,EAAI,CAAA,EAAG,IAAI,CAAA,EACd,QAAA,kBAAA,GAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,EAAE,wBAAwB,CAAA;AAAA,MACjC,KAAA;AAAA,MACA,WAAW,KAAA,CAAM,MAAA,GAAS,IAAI,aAAA,CAAc,CAAC,IAAI,MAAA,KAAc,KAAA;AAAA,MAC/D,QAAA,EAAU,CAAA,KAAA,KACR,gBAAA,CAAiB,KAAA,KAAU,KAAA,GAAQ,EAAC,GAAI,CAAC,MAAA,CAAO,KAAK,CAAC,CAAC;AAAA;AAAA,GAE3D,EACF,CAAA;AAEJ;;;;"}