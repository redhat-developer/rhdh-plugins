{"version":3,"file":"UserSettingsLanguageToggle.esm.js","sources":["../../../src/components/General/UserSettingsLanguageToggle.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\nimport {\n  useTranslationRef,\n  appLanguageApiRef,\n} from '@backstage/core-plugin-api/alpha';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { userSettingsTranslationRef } from '../../translation';\nimport { useApi } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/esm/useObservable';\nimport { Select } from '@backstage/core-components';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    width: '100%',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingBottom: 8,\n    paddingRight: 16,\n  },\n  list: {\n    width: 'initial',\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      padding: `0 0 12px`,\n    },\n  },\n  listItemText: {\n    paddingRight: 0,\n    paddingLeft: 0,\n  },\n  listItemSecondaryAction: {\n    position: 'relative',\n    transform: 'unset',\n    top: 'auto',\n    right: 'auto',\n    paddingLeft: 16,\n    [theme.breakpoints.down('xs')]: {\n      paddingLeft: 0,\n    },\n  },\n}));\n\nconst capitalize = (s: string) =>\n  s.charAt(0).toLocaleUpperCase('en-US') + s.slice(1);\n\n/** @public */\nexport const UserSettingsLanguageToggle = () => {\n  const classes = useStyles();\n  const languageApi = useApi(appLanguageApiRef);\n  const { t } = useTranslationRef(userSettingsTranslationRef);\n\n  const [languageObservable] = useState(() => languageApi.language$());\n  const { language: currentLanguage } = useObservable(\n    languageObservable,\n    languageApi.getLanguage(),\n  );\n\n  const { languages } = languageApi.getAvailableLanguages();\n\n  if (languages.length <= 1) {\n    return null;\n  }\n\n  const handleSetLanguage = (newLanguage: string | undefined) => {\n    languageApi.setLanguage(newLanguage);\n  };\n\n  const getLanguageDisplayName = (language: string) => {\n    try {\n      const names = new Intl.DisplayNames([language], {\n        type: 'language',\n      });\n      const languageDisplayName = names.of(language);\n      return languageDisplayName ? capitalize(languageDisplayName) : language;\n    } catch (err) {\n      return language;\n    }\n  };\n\n  return (\n    <ListItem\n      className={classes.list}\n      classes={{ container: classes.container }}\n    >\n      <ListItemText\n        className={classes.listItemText}\n        primary={t('languageToggle.title')}\n        secondary={t('languageToggle.description')}\n      />\n      <ListItemSecondaryAction className={classes.listItemSecondaryAction}>\n        <Select\n          label=\"\"\n          selected={currentLanguage}\n          items={languages.map(language => ({\n            label: getLanguageDisplayName(language),\n            value: language,\n          }))}\n          onChange={selectedItems => handleSetLanguage(selectedItems as string)}\n        />\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n"],"names":[],"mappings":"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"}