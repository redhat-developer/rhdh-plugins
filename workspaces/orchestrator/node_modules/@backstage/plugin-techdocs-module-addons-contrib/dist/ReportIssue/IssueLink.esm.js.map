{"version":3,"file":"IssueLink.esm.js","sources":["../../src/ReportIssue/IssueLink.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core';\nimport BugReportIcon from '@material-ui/icons/BugReport';\n\nimport { Link, GitHubIcon } from '@backstage/core-components';\n\nimport { ReportIssueTemplate, Repository } from './types';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'grid',\n    gridGap: theme.spacing(1),\n    gridAutoFlow: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: theme.palette.common.black,\n    fontSize: theme.typography.button.fontSize,\n  },\n}));\n\ntype IssueLinkProps = {\n  template: ReportIssueTemplate;\n  repository: Repository;\n};\n\nconst getIcon = ({ type }: Repository) => {\n  if (type === 'github') {\n    return GitHubIcon;\n  }\n  return BugReportIcon;\n};\n\nconst getName = ({ type }: Repository) => {\n  return type.charAt(0).toLocaleUpperCase('en-US') + type.slice(1);\n};\n\nconst getUrl = (repository: Repository, template: ReportIssueTemplate) => {\n  const { title, body } = template;\n  const encodedTitle = encodeURIComponent(title);\n  const encodedBody = encodeURIComponent(body);\n  const { protocol, resource, owner, name, type } = repository;\n\n  const url = `${protocol}://${resource}/${owner}/${name}`;\n  const encodedUrl = encodeURI(url);\n  if (type === 'github') {\n    return `${encodedUrl}/issues/new?title=${encodedTitle}&body=${encodedBody}`;\n  }\n  return `${encodedUrl}/issues/new?issue[title]=${encodedTitle}&issue[description]=${encodedBody}`;\n};\n\nexport const IssueLink = ({ template, repository }: IssueLinkProps) => {\n  const classes = useStyles();\n\n  const Icon = getIcon(repository);\n  const url = getUrl(repository, template);\n\n  return (\n    <Link className={classes.root} to={url} target=\"_blank\">\n      <Icon /> Open new {getName(repository)} issue\n    </Link>\n  );\n};\n"],"names":[],"mappings":";;;;;AAuBA,MAAM,SAAA,GAAY,WAAW,CAAA,KAAA,MAAU;AAAA,EACrC,IAAA,EAAM;AAAA,IACJ,OAAA,EAAS,MAAA;AAAA,IACT,OAAA,EAAS,KAAA,CAAM,OAAA,CAAQ,CAAC,CAAA;AAAA,IACxB,YAAA,EAAc,QAAA;AAAA,IACd,cAAA,EAAgB,QAAA;AAAA,IAChB,UAAA,EAAY,QAAA;AAAA,IACZ,KAAA,EAAO,KAAA,CAAM,OAAA,CAAQ,MAAA,CAAO,KAAA;AAAA,IAC5B,QAAA,EAAU,KAAA,CAAM,UAAA,CAAW,MAAA,CAAO;AAAA;AAEtC,CAAA,CAAE,CAAA;AAOF,MAAM,OAAA,GAAU,CAAC,EAAE,IAAA,EAAK,KAAkB;AACxC,EAAA,IAAI,SAAS,QAAA,EAAU;AACrB,IAAA,OAAO,UAAA;AAAA,EACT;AACA,EAAA,OAAO,aAAA;AACT,CAAA;AAEA,MAAM,OAAA,GAAU,CAAC,EAAE,IAAA,EAAK,KAAkB;AACxC,EAAA,OAAO,IAAA,CAAK,OAAO,CAAC,CAAA,CAAE,kBAAkB,OAAO,CAAA,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA;AACjE,CAAA;AAEA,MAAM,MAAA,GAAS,CAAC,UAAA,EAAwB,QAAA,KAAkC;AACxE,EAAA,MAAM,EAAE,KAAA,EAAO,IAAA,EAAK,GAAI,QAAA;AACxB,EAAA,MAAM,YAAA,GAAe,mBAAmB,KAAK,CAAA;AAC7C,EAAA,MAAM,WAAA,GAAc,mBAAmB,IAAI,CAAA;AAC3C,EAAA,MAAM,EAAE,QAAA,EAAU,QAAA,EAAU,KAAA,EAAO,IAAA,EAAM,MAAK,GAAI,UAAA;AAElD,EAAA,MAAM,GAAA,GAAM,GAAG,QAAQ,CAAA,GAAA,EAAM,QAAQ,CAAA,CAAA,EAAI,KAAK,IAAI,IAAI,CAAA,CAAA;AACtD,EAAA,MAAM,UAAA,GAAa,UAAU,GAAG,CAAA;AAChC,EAAA,IAAI,SAAS,QAAA,EAAU;AACrB,IAAA,OAAO,CAAA,EAAG,UAAU,CAAA,kBAAA,EAAqB,YAAY,SAAS,WAAW,CAAA,CAAA;AAAA,EAC3E;AACA,EAAA,OAAO,CAAA,EAAG,UAAU,CAAA,yBAAA,EAA4B,YAAY,uBAAuB,WAAW,CAAA,CAAA;AAChG,CAAA;AAEO,MAAM,SAAA,GAAY,CAAC,EAAE,QAAA,EAAU,YAAW,KAAsB;AACrE,EAAA,MAAM,UAAU,SAAA,EAAU;AAE1B,EAAA,MAAM,IAAA,GAAO,QAAQ,UAAU,CAAA;AAC/B,EAAA,MAAM,GAAA,GAAM,MAAA,CAAO,UAAA,EAAY,QAAQ,CAAA;AAEvC,EAAA,uBACE,IAAA,CAAC,QAAK,SAAA,EAAW,OAAA,CAAQ,MAAM,EAAA,EAAI,GAAA,EAAK,QAAO,QAAA,EAC7C,QAAA,EAAA;AAAA,oBAAA,GAAA,CAAC,IAAA,EAAA,EAAK,CAAA;AAAA,IAAE,YAAA;AAAA,IAAW,QAAQ,UAAU,CAAA;AAAA,IAAE;AAAA,GAAA,EACzC,CAAA;AAEJ;;;;"}