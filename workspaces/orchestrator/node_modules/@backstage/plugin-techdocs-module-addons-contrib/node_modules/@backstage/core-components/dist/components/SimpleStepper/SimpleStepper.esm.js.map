{"version":3,"file":"SimpleStepper.esm.js","sources":["../../../src/components/SimpleStepper/SimpleStepper.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {\n  ReactNode,\n  createContext,\n  Children,\n  isValidElement,\n  useState,\n  useEffect,\n  PropsWithChildren,\n} from 'react';\nimport MuiStepper from '@material-ui/core/Stepper';\n\ntype InternalState = {\n  stepperLength: number;\n  stepIndex: number;\n  setStepIndex: any;\n  stepHistory: number[];\n  setStepHistory: any;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n};\n\nconst noop = () => {};\n\nexport const VerticalStepperContext = createContext<InternalState>({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop,\n});\n\nexport interface StepperProps {\n  elevated?: boolean;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n  activeStep?: number;\n}\n\nexport function SimpleStepper(props: PropsWithChildren<StepperProps>) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState<number>(activeStep);\n  /*\n  Recreates the stepHistory array based on the activeStep\n  to make sure the handleBack function of the Footer works when activeStep is higher than 0\n  */\n  const inOrderRecreatedStepHistory = Array.from(\n    { length: activeStep + 1 },\n    (_, i) => i,\n  );\n  const [stepHistory, setStepHistory] = useState<number[]>(\n    inOrderRecreatedStepHistory,\n  );\n\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n\n  const steps: ReactNode[] = [];\n  let endStep;\n  Children.forEach(children, child => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n\n  return (\n    <>\n      <VerticalStepperContext.Provider\n        value={{\n          stepIndex,\n          setStepIndex,\n          stepHistory,\n          setStepHistory,\n          onStepChange,\n          stepperLength: Children.count(children),\n        }}\n      >\n        <MuiStepper\n          activeStep={stepIndex}\n          orientation=\"vertical\"\n          elevation={elevated ? 2 : 0}\n        >\n          {steps}\n        </MuiStepper>\n      </VerticalStepperContext.Provider>\n      {stepIndex >= Children.count(children) - 1 && endStep}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAmCA,MAAM,OAAO,MAAM;AAAC,CAAA;AAEb,MAAM,yBAAyB,aAAA,CAA6B;AAAA,EACjE,aAAA,EAAe,CAAA;AAAA,EACf,SAAA,EAAW,CAAA;AAAA,EACX,YAAA,EAAc,IAAA;AAAA,EACd,aAAa,EAAC;AAAA,EACd,cAAA,EAAgB,IAAA;AAAA,EAChB,YAAA,EAAc;AAChB,CAAC;AAQM,SAAS,cAAc,KAAA,EAAwC;AACpE,EAAA,MAAM,EAAE,QAAA,EAAU,QAAA,EAAU,YAAA,EAAc,UAAA,GAAa,GAAE,GAAI,KAAA;AAC7D,EAAA,MAAM,CAAC,SAAA,EAAW,YAAY,CAAA,GAAI,SAAiB,UAAU,CAAA;AAK7D,EAAA,MAAM,8BAA8B,KAAA,CAAM,IAAA;AAAA,IACxC,EAAE,MAAA,EAAQ,UAAA,GAAa,CAAA,EAAE;AAAA,IACzB,CAAC,GAAG,CAAA,KAAM;AAAA,GACZ;AACA,EAAA,MAAM,CAAC,WAAA,EAAa,cAAc,CAAA,GAAI,QAAA;AAAA,IACpC;AAAA,GACF;AAEA,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,YAAA,CAAa,UAAU,CAAA;AAAA,EACzB,CAAA,EAAG,CAAC,UAAU,CAAC,CAAA;AAEf,EAAA,MAAM,QAAqB,EAAC;AAC5B,EAAA,IAAI,OAAA;AACJ,EAAA,QAAA,CAAS,OAAA,CAAQ,UAAU,CAAA,KAAA,KAAS;AAClC,IAAA,IAAI,cAAA,CAAe,KAAK,CAAA,EAAG;AACzB,MAAA,IAAI,KAAA,CAAM,MAAM,GAAA,EAAK;AACnB,QAAA,OAAA,GAAU,KAAA;AAAA,MACZ,CAAA,MAAO;AACL,QAAA,KAAA,CAAM,KAAK,KAAK,CAAA;AAAA,MAClB;AAAA,IACF;AAAA,EACF,CAAC,CAAA;AAED,EAAA,uBACE,IAAA,CAAA,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,oBAAA,GAAA;AAAA,MAAC,sBAAA,CAAuB,QAAA;AAAA,MAAvB;AAAA,QACC,KAAA,EAAO;AAAA,UACL,SAAA;AAAA,UACA,YAAA;AAAA,UACA,WAAA;AAAA,UACA,cAAA;AAAA,UACA,YAAA;AAAA,UACA,aAAA,EAAe,QAAA,CAAS,KAAA,CAAM,QAAQ;AAAA,SACxC;AAAA,QAEA,QAAA,kBAAA,GAAA;AAAA,UAAC,UAAA;AAAA,UAAA;AAAA,YACC,UAAA,EAAY,SAAA;AAAA,YACZ,WAAA,EAAY,UAAA;AAAA,YACZ,SAAA,EAAW,WAAW,CAAA,GAAI,CAAA;AAAA,YAEzB,QAAA,EAAA;AAAA;AAAA;AACH;AAAA,KACF;AAAA,IACC,SAAA,IAAa,QAAA,CAAS,KAAA,CAAM,QAAQ,IAAI,CAAA,IAAK;AAAA,GAAA,EAChD,CAAA;AAEJ;;;;"}