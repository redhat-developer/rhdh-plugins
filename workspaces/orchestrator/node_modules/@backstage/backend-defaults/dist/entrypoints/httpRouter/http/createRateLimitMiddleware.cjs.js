'use strict';

var RateLimitStoreFactory = require('../../../lib/RateLimitStoreFactory.cjs.js');
var rateLimitMiddleware = require('../../../lib/rateLimitMiddleware.cjs.js');

const createRateLimitMiddleware = (options) => {
  const { pluginId, config } = options;
  const configKey = `backend.rateLimit.plugin.${pluginId}`;
  const enabled = config.has(configKey);
  if (!enabled) {
    return (_req, _res, next) => {
      next();
    };
  }
  const rateLimitOptions = config.getConfig(configKey);
  return rateLimitMiddleware.rateLimitMiddleware({
    store: RateLimitStoreFactory.RateLimitStoreFactory.create({ config, prefix: pluginId }),
    config: rateLimitOptions
  });
};

exports.createRateLimitMiddleware = createRateLimitMiddleware;
//# sourceMappingURL=createRateLimitMiddleware.cjs.js.map
