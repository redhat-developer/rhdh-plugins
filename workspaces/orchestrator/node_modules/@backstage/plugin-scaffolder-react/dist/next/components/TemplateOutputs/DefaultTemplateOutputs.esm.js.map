{"version":3,"file":"DefaultTemplateOutputs.esm.js","sources":["../../../../src/next/components/TemplateOutputs/DefaultTemplateOutputs.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { InfoCard, MarkdownContent } from '@backstage/core-components';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport {\n  ScaffolderOutputText,\n  ScaffolderTaskOutput,\n} from '@backstage/plugin-scaffolder-react';\nimport Box from '@material-ui/core/Box';\nimport Paper from '@material-ui/core/Paper';\nimport { useEffect, useMemo, useState } from 'react';\n\nimport { scaffolderReactTranslationRef } from '../../../translation';\nimport { LinkOutputs } from './LinkOutputs';\nimport { TextOutputs } from './TextOutputs';\n\n/**\n * The DefaultOutputs renderer for the scaffolder task output\n *\n * @alpha\n */\nexport const DefaultTemplateOutputs = (props: {\n  output?: ScaffolderTaskOutput;\n}) => {\n  const { t } = useTranslationRef(scaffolderReactTranslationRef);\n  const { output } = props;\n  const [textOutputIndex, setTextOutputIndex] = useState<number | undefined>(\n    undefined,\n  );\n\n  useEffect(() => {\n    if (textOutputIndex === undefined && output?.text) {\n      const defaultIndex = output.text.findIndex(\n        (text: ScaffolderOutputText) => text.default,\n      );\n      setTextOutputIndex(defaultIndex >= 0 ? defaultIndex : 0);\n    }\n  }, [textOutputIndex, output]);\n\n  const textOutput = useMemo(\n    () =>\n      textOutputIndex !== undefined ? output?.text?.[textOutputIndex] : null,\n    [output, textOutputIndex],\n  );\n\n  if (!output) {\n    return null;\n  }\n\n  const displayTextButtons = (output.text || []).length > 1;\n  const emptyOutput = (output.links || []).length === 0 && !displayTextButtons;\n\n  return (\n    <>\n      {!emptyOutput ? (\n        <Box paddingBottom={2} data-testid=\"output-box\">\n          <Paper>\n            <Box\n              padding={2}\n              justifyContent=\"center\"\n              display=\"flex\"\n              gridGap={16}\n              flexWrap=\"wrap\"\n            >\n              {displayTextButtons && (\n                <TextOutputs\n                  data-testid=\"text-outputs\"\n                  output={output}\n                  index={textOutputIndex}\n                  setIndex={setTextOutputIndex}\n                />\n              )}\n              <LinkOutputs output={output} />\n            </Box>\n          </Paper>\n        </Box>\n      ) : null}\n      {textOutput ? (\n        <Box paddingBottom={2} data-testid=\"text-output-box\">\n          <InfoCard\n            title={textOutput.title ?? t('templateOutputs.title')}\n            noPadding\n            titleTypographyProps={{ component: 'h2' }}\n          >\n            <Box padding={2} height=\"100%\">\n              <MarkdownContent content={textOutput.content ?? ''} />\n            </Box>\n          </InfoCard>\n        </Box>\n      ) : null}\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;AAkCO,MAAM,sBAAA,GAAyB,CAAC,KAAA,KAEjC;AACJ,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,6BAA6B,CAAA;AAC7D,EAAA,MAAM,EAAE,QAAO,GAAI,KAAA;AACnB,EAAA,MAAM,CAAC,eAAA,EAAiB,kBAAkB,CAAA,GAAI,QAAA;AAAA,IAC5C;AAAA,GACF;AAEA,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,IAAI,eAAA,KAAoB,MAAA,IAAa,MAAA,EAAQ,IAAA,EAAM;AACjD,MAAA,MAAM,YAAA,GAAe,OAAO,IAAA,CAAK,SAAA;AAAA,QAC/B,CAAC,SAA+B,IAAA,CAAK;AAAA,OACvC;AACA,MAAA,kBAAA,CAAmB,YAAA,IAAgB,CAAA,GAAI,YAAA,GAAe,CAAC,CAAA;AAAA,IACzD;AAAA,EACF,CAAA,EAAG,CAAC,eAAA,EAAiB,MAAM,CAAC,CAAA;AAE5B,EAAA,MAAM,UAAA,GAAa,OAAA;AAAA,IACjB,MACE,eAAA,KAAoB,MAAA,GAAY,MAAA,EAAQ,IAAA,GAAO,eAAe,CAAA,GAAI,IAAA;AAAA,IACpE,CAAC,QAAQ,eAAe;AAAA,GAC1B;AAEA,EAAA,IAAI,CAAC,MAAA,EAAQ;AACX,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,MAAM,kBAAA,GAAA,CAAsB,MAAA,CAAO,IAAA,IAAQ,IAAI,MAAA,GAAS,CAAA;AACxD,EAAA,MAAM,eAAe,MAAA,CAAO,KAAA,IAAS,EAAC,EAAG,MAAA,KAAW,KAAK,CAAC,kBAAA;AAE1D,EAAA,uBACE,IAAA,CAAA,QAAA,EAAA,EACG,QAAA,EAAA;AAAA,IAAA,CAAC,WAAA,uBACC,GAAA,EAAA,EAAI,aAAA,EAAe,GAAG,aAAA,EAAY,YAAA,EACjC,8BAAC,KAAA,EAAA,EACC,QAAA,kBAAA,IAAA;AAAA,MAAC,GAAA;AAAA,MAAA;AAAA,QACC,OAAA,EAAS,CAAA;AAAA,QACT,cAAA,EAAe,QAAA;AAAA,QACf,OAAA,EAAQ,MAAA;AAAA,QACR,OAAA,EAAS,EAAA;AAAA,QACT,QAAA,EAAS,MAAA;AAAA,QAER,QAAA,EAAA;AAAA,UAAA,kBAAA,oBACC,GAAA;AAAA,YAAC,WAAA;AAAA,YAAA;AAAA,cACC,aAAA,EAAY,cAAA;AAAA,cACZ,MAAA;AAAA,cACA,KAAA,EAAO,eAAA;AAAA,cACP,QAAA,EAAU;AAAA;AAAA,WACZ;AAAA,0BAEF,GAAA,CAAC,eAAY,MAAA,EAAgB;AAAA;AAAA;AAAA,KAC/B,EACF,GACF,CAAA,GACE,IAAA;AAAA,IACH,6BACC,GAAA,CAAC,GAAA,EAAA,EAAI,aAAA,EAAe,CAAA,EAAG,eAAY,iBAAA,EACjC,QAAA,kBAAA,GAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,KAAA,EAAO,UAAA,CAAW,KAAA,IAAS,CAAA,CAAE,uBAAuB,CAAA;AAAA,QACpD,SAAA,EAAS,IAAA;AAAA,QACT,oBAAA,EAAsB,EAAE,SAAA,EAAW,IAAA,EAAK;AAAA,QAExC,QAAA,kBAAA,GAAA,CAAC,GAAA,EAAA,EAAI,OAAA,EAAS,CAAA,EAAG,MAAA,EAAO,MAAA,EACtB,QAAA,kBAAA,GAAA,CAAC,eAAA,EAAA,EAAgB,OAAA,EAAS,UAAA,CAAW,OAAA,IAAW,EAAA,EAAI,CAAA,EACtD;AAAA;AAAA,OAEJ,CAAA,GACE;AAAA,GAAA,EACN,CAAA;AAEJ;;;;"}