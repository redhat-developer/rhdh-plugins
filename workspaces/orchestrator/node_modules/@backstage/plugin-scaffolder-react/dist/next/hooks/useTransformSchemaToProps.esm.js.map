{"version":3,"file":"useTransformSchemaToProps.esm.js","sources":["../../../src/next/hooks/useTransformSchemaToProps.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useMemo } from 'react';\nimport { LayoutOptions } from '../../layouts';\nimport { type ParsedTemplateSchema } from './useTemplateSchema';\n\ninterface Options {\n  layouts?: LayoutOptions[];\n}\n\nexport const useTransformSchemaToProps = (\n  step: ParsedTemplateSchema,\n  options: Options = {},\n): ParsedTemplateSchema => {\n  const { layouts = [] } = options;\n  const objectFieldTemplate = step?.uiSchema['ui:ObjectFieldTemplate'] as\n    | string\n    | undefined;\n  return useMemo(() => {\n    if (typeof objectFieldTemplate !== 'string') {\n      return step;\n    }\n\n    const Layout = layouts.find(\n      layout => layout.name === objectFieldTemplate,\n    )?.component;\n\n    if (!Layout) {\n      return step;\n    }\n    return {\n      ...step,\n      uiSchema: {\n        ...step.uiSchema,\n        ['ui:ObjectFieldTemplate']: Layout,\n      },\n    };\n  }, [layouts, objectFieldTemplate, step]);\n};\n"],"names":[],"mappings":";;AAuBO,MAAM,yBAAA,GAA4B,CACvC,IAAA,EACA,OAAA,GAAmB,EAAC,KACK;AACzB,EAAA,MAAM,EAAE,OAAA,GAAU,EAAC,EAAE,GAAI,OAAA;AACzB,EAAA,MAAM,mBAAA,GAAsB,IAAA,EAAM,QAAA,CAAS,wBAAwB,CAAA;AAGnE,EAAA,OAAO,QAAQ,MAAM;AACnB,IAAA,IAAI,OAAO,wBAAwB,QAAA,EAAU;AAC3C,MAAA,OAAO,IAAA;AAAA,IACT;AAEA,IAAA,MAAM,SAAS,OAAA,CAAQ,IAAA;AAAA,MACrB,CAAA,MAAA,KAAU,OAAO,IAAA,KAAS;AAAA,KAC5B,EAAG,SAAA;AAEH,IAAA,IAAI,CAAC,MAAA,EAAQ;AACX,MAAA,OAAO,IAAA;AAAA,IACT;AACA,IAAA,OAAO;AAAA,MACL,GAAG,IAAA;AAAA,MACH,QAAA,EAAU;AAAA,QACR,GAAG,IAAA,CAAK,QAAA;AAAA,QACR,CAAC,wBAAwB,GAAG;AAAA;AAC9B,KACF;AAAA,EACF,CAAA,EAAG,CAAC,OAAA,EAAS,mBAAA,EAAqB,IAAI,CAAC,CAAA;AACzC;;;;"}