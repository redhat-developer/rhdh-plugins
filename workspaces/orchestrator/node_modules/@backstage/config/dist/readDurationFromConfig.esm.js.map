{"version":3,"file":"readDurationFromConfig.esm.js","sources":["../src/readDurationFromConfig.ts"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { InputError, stringifyError } from '@backstage/errors';\nimport { HumanDuration } from '@backstage/types';\nimport ms from 'ms';\nimport { Config } from './types';\n\nexport const propsOfHumanDuration = [\n  'years',\n  'months',\n  'weeks',\n  'days',\n  'hours',\n  'minutes',\n  'seconds',\n  'milliseconds',\n];\n\n/**\n * Reads a duration from config.\n *\n * @public\n * @remarks\n *\n * The supported formats are:\n *\n * - A string in the format of '1d', '2 seconds' etc. as supported by the `ms`\n *   library.\n * - A standard ISO formatted duration string, e.g. 'P2DT6H' or 'PT1M'.\n * - An object with individual units (in plural) as keys, e.g. `{ days: 2, hours: 6 }`.\n *\n * The string forms are naturally only supported if the `options.key` argument\n * is passed, since a `Config` argument always represents an object by its\n * nature.\n *\n * This does not support optionality; if you want to support optional durations,\n * you need to first check the presence of the target with `config.has(...)` and\n * then call this function.\n *\n * @param config - A configuration object\n * @param key - If specified, read the duration from the given subkey under the\n *        config object\n * @returns A duration object\n */\nexport function readDurationFromConfig(\n  config: Config,\n  options?: {\n    key?: string;\n  },\n): HumanDuration {\n  if (options?.key && typeof config.getOptional(options.key) === 'string') {\n    const value = config.getString(options.key).trim();\n    try {\n      return value.startsWith('P')\n        ? parseIsoDuration(value)\n        : parseMsDuration(value);\n    } catch (error) {\n      throw new InputError(\n        `Invalid duration '${value}' in config at '${\n          options.key\n        }', ${stringifyError(error)}`,\n      );\n    }\n  }\n\n  return parseObjectDuration(config, options);\n}\n\n/**\n * Parses the object form of durations.\n */\nexport function parseObjectDuration(\n  config: Config,\n  options?: {\n    key?: string;\n  },\n): HumanDuration {\n  let root: Config;\n  let found = false;\n  const result: Record<string, number> = {};\n\n  try {\n    root = options?.key ? config.getConfig(options.key) : config;\n    for (const prop of propsOfHumanDuration) {\n      const value = root.getOptionalNumber(prop);\n      if (value !== undefined) {\n        result[prop] = value;\n        found = true;\n      }\n    }\n  } catch (error) {\n    // This needs no contextual key prefix since the config reader adds it to\n    // its own errors\n    throw new InputError(`Failed to read duration from config, ${error}`);\n  }\n\n  try {\n    if (!found) {\n      const good = propsOfHumanDuration.map(p => `'${p}'`).join(', ');\n      throw new Error(`Needs one or more of ${good}`);\n    }\n\n    const invalidProps = root\n      .keys()\n      .filter(prop => !propsOfHumanDuration.includes(prop));\n    if (invalidProps.length) {\n      const what = invalidProps.length === 1 ? 'property' : 'properties';\n      const bad = invalidProps.map(p => `'${p}'`).join(', ');\n      const good = propsOfHumanDuration.map(p => `'${p}'`).join(', ');\n      throw new Error(\n        `Unknown ${what} ${bad}; expected one or more of ${good}`,\n      );\n    }\n  } catch (error) {\n    // For our own errors, even though we don't know where we are anchored in\n    // the config hierarchy, we try to be helpful and at least add the subkey if\n    // we have it\n    let prefix = 'Failed to read duration from config';\n    if (options?.key) {\n      prefix += ` at '${options.key}'`;\n    }\n    throw new Error(`${prefix}, ${error}`);\n  }\n\n  return result as HumanDuration;\n}\n\n/**\n * Parses friendly string durations like '1d', '2 seconds' etc using the ms\n * library.\n */\nexport function parseMsDuration(input: string): HumanDuration {\n  if (/^\\d+$/.exec(input)) {\n    // We explicitly disallow the only-digits form of the ms library, because\n    // from a configuration perspective it's just confusing to even be able to\n    // specify that\n    throw new Error(\n      `The value cannot be a plain number; try adding a unit like 'ms' or 'seconds'`,\n    );\n  }\n\n  let milliseconds = ms(input);\n  if (!Number.isFinite(milliseconds)) {\n    throw new Error(\n      `Not a valid duration string, try a number followed by a unit such as '1d' or '2 seconds'`,\n    );\n  } else if (milliseconds < 0) {\n    throw new Error('Negative durations are not allowed');\n  } else if (milliseconds === 0) {\n    return { milliseconds: 0 };\n  }\n\n  // As used by the ms library\n  const s = 1000;\n  const m = s * 60;\n  const h = m * 60;\n  const d = h * 24;\n  const w = d * 7;\n  const y = d * 365.25;\n\n  const result: HumanDuration = {};\n\n  if (milliseconds >= y) {\n    const years = Math.floor(milliseconds / y);\n    milliseconds -= years * y;\n    result.years = years;\n  }\n\n  if (milliseconds >= w) {\n    const weeks = Math.floor(milliseconds / w);\n    milliseconds -= weeks * w;\n    result.weeks = weeks;\n  }\n\n  if (milliseconds >= d) {\n    const days = Math.floor(milliseconds / d);\n    milliseconds -= days * d;\n    result.days = days;\n  }\n\n  if (milliseconds >= h) {\n    const hours = Math.floor(milliseconds / h);\n    milliseconds -= hours * h;\n    result.hours = hours;\n  }\n\n  if (milliseconds >= m) {\n    const minutes = Math.floor(milliseconds / m);\n    milliseconds -= minutes * m;\n    result.minutes = minutes;\n  }\n\n  if (milliseconds >= s) {\n    const seconds = Math.floor(milliseconds / s);\n    milliseconds -= seconds * s;\n    result.seconds = seconds;\n  }\n\n  if (milliseconds > 0) {\n    result.milliseconds = milliseconds;\n  }\n\n  return result;\n}\n\n/**\n * Parses an ISO formatted duration string.\n *\n * Implementation taken from luxon's Duration.fromISO to not force that\n * dependency on everyone.\n */\nexport function parseIsoDuration(input: string): HumanDuration {\n  const match =\n    /^-?P(?:(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)Y)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)M)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)W)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)D)?(?:T(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)H)?(?:(-?\\d{1,20}(?:\\.\\d{1,20})?)M)?(?:(-?\\d{1,20})(?:[.,](-?\\d{1,20}))?S)?)?)$/.exec(\n      input,\n    );\n  if (!match) {\n    throw new Error(\n      `Invalid ISO format, expected a value similar to 'P2DT6H' (2 days 6 hours) or 'PT1M' (1 minute)`,\n    );\n  }\n\n  const [\n    s,\n    yearStr,\n    monthStr,\n    weekStr,\n    dayStr,\n    hourStr,\n    minuteStr,\n    secondStr,\n    millisecondsStr,\n  ] = match;\n\n  const hasNegativePrefix = s[0] === '-';\n  const negativeSeconds = !!secondStr && secondStr[0] === '-';\n\n  const maybeNegate = (num: number | undefined, force = false) =>\n    num !== undefined && (force || (num && hasNegativePrefix)) ? -num : num;\n\n  const parseFloating = (value: string) => {\n    if (typeof value === 'undefined' || value === null || value === '') {\n      return undefined;\n    }\n    return parseFloat(value);\n  };\n\n  const parseMillis = (fraction: string | undefined) => {\n    // Return undefined (instead of 0) in these cases, where fraction is not set\n    if (\n      typeof fraction === 'undefined' ||\n      fraction === null ||\n      fraction === ''\n    ) {\n      return undefined;\n    }\n    const f = parseFloat(`0.${fraction}`) * 1000;\n    return Math.floor(f);\n  };\n\n  const years = maybeNegate(parseFloating(yearStr));\n  const months = maybeNegate(parseFloating(monthStr));\n  const weeks = maybeNegate(parseFloating(weekStr));\n  const days = maybeNegate(parseFloating(dayStr));\n  const hours = maybeNegate(parseFloating(hourStr));\n  const minutes = maybeNegate(parseFloating(minuteStr));\n  const seconds = maybeNegate(parseFloating(secondStr), secondStr === '-0');\n  const milliseconds = maybeNegate(\n    parseMillis(millisecondsStr),\n    negativeSeconds,\n  );\n\n  if (\n    years === undefined &&\n    months === undefined &&\n    weeks === undefined &&\n    days === undefined &&\n    hours === undefined &&\n    minutes === undefined &&\n    seconds === undefined &&\n    milliseconds === undefined\n  ) {\n    throw new Error('Invalid ISO format, no values given');\n  }\n\n  return {\n    ...(years ? { years } : {}),\n    ...(months ? { months } : {}),\n    ...(weeks ? { weeks } : {}),\n    ...(days ? { days } : {}),\n    ...(hours ? { hours } : {}),\n    ...(minutes ? { minutes } : {}),\n    ...(seconds ? { seconds } : {}),\n    ...(milliseconds ? { milliseconds } : {}),\n  };\n}\n"],"names":[],"mappings":"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"}