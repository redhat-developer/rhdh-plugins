'use strict';

var fs = require('fs-extra');
var path = require('path');
var paths = require('../../../lib/paths.cjs.js');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var fs__default = /*#__PURE__*/_interopDefaultCompat(fs);

async function createTemporaryTsConfig(includedPackageDirs) {
  const path$1 = paths.paths.resolveTargetRoot("tsconfig.tmp.json");
  process.once("exit", () => {
    fs__default.default.removeSync(path$1);
  });
  let assetTypeFile = [];
  try {
    assetTypeFile = [
      require.resolve("@backstage/cli/asset-types/asset-types.d.ts")
    ];
  } catch {
  }
  await fs__default.default.writeJson(path$1, {
    extends: "./tsconfig.json",
    include: [
      // These two contain global definitions that are needed for stable API report generation
      ...assetTypeFile,
      ...includedPackageDirs.map((dir) => path.join(dir, "src"))
    ],
    // we don't exclude node_modules so that we can use the asset-types.d.ts file
    exclude: []
  });
  return path$1;
}

exports.createTemporaryTsConfig = createTemporaryTsConfig;
//# sourceMappingURL=createTemporaryTsConfig.cjs.js.map
