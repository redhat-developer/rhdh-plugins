'use strict';

var fs = require('fs-extra');
var child_process = require('child_process');
var paths = require('../../../lib/paths.cjs.js');

function _interopDefaultCompat (e) { return e && typeof e === 'object' && 'default' in e ? e : { default: e }; }

var fs__default = /*#__PURE__*/_interopDefaultCompat(fs);

async function generateTypeDeclarations(tsconfigFilePath) {
  await fs__default.default.remove(paths.paths.resolveTargetRoot("dist-types"));
  const { status } = child_process.spawnSync(
    "yarn",
    [
      "tsc",
      ["--project", tsconfigFilePath],
      ["--skipLibCheck", "false"],
      ["--incremental", "false"]
    ].flat(),
    {
      stdio: "inherit",
      shell: true,
      cwd: paths.paths.targetRoot
    }
  );
  if (status !== 0) {
    process.exit(status || void 0);
  }
}

exports.generateTypeDeclarations = generateTypeDeclarations;
//# sourceMappingURL=generateTypeDeclarations.cjs.js.map
