{"version":3,"file":"schema.esm.js","sources":["../../../../src/components/fields/RepoBranchPicker/schema.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeFieldSchema } from '@backstage/plugin-scaffolder-react';\n\n/**\n * @public\n */\nexport const RepoBranchPickerFieldSchema = makeFieldSchema({\n  output: z => z.string(),\n  uiOptions: z =>\n    z.object({\n      requestUserCredentials: z\n        .object({\n          secretsKey: z\n            .string()\n            .describe(\n              'Key used within the template secrets context to store the credential',\n            ),\n          additionalScopes: z\n            .object({\n              gitea: z\n                .array(z.string())\n                .optional()\n                .describe('Additional Gitea scopes to request'),\n              gerrit: z\n                .array(z.string())\n                .optional()\n                .describe('Additional Gerrit scopes to request'),\n              github: z\n                .array(z.string())\n                .optional()\n                .describe('Additional GitHub scopes to request'),\n              gitlab: z\n                .array(z.string())\n                .optional()\n                .describe('Additional GitLab scopes to request'),\n              bitbucket: z\n                .array(z.string())\n                .optional()\n                .describe('Additional BitBucket scopes to request'),\n              azure: z\n                .array(z.string())\n                .optional()\n                .describe('Additional Azure scopes to request'),\n            })\n            .optional()\n            .describe('Additional permission scopes to request'),\n        })\n        .optional()\n        .describe(\n          'If defined will request user credentials to auth against the given SCM platform',\n        ),\n    }),\n});\n\n/**\n * The input props that can be specified under `ui:options` for the\n * `RepoBranchPicker` field extension.\n *\n * @public\n */\nexport type RepoBranchPickerUiOptions = NonNullable<\n  (typeof RepoBranchPickerFieldSchema.TProps.uiSchema)['ui:options']\n>;\n\nexport type RepoBranchPickerProps = typeof RepoBranchPickerFieldSchema.TProps;\n\n// This has been duplicated from /plugins/scaffolder/src/components/fields/RepoUrlPicker/schema.ts\n// NOTE: There is a bug with this failing validation in the custom field explorer due\n// to https://github.com/rjsf-team/react-jsonschema-form/issues/675 even if\n// requestUserCredentials is not defined\nexport const RepoBranchPickerSchema = RepoBranchPickerFieldSchema.schema;\n"],"names":[],"mappings":";;AAoBO,MAAM,8BAA8B,eAAA,CAAgB;AAAA,EACzD,MAAA,EAAQ,CAAA,CAAA,KAAK,CAAA,CAAE,MAAA,EAAO;AAAA,EACtB,SAAA,EAAW,CAAA,CAAA,KACT,CAAA,CAAE,MAAA,CAAO;AAAA,IACP,sBAAA,EAAwB,EACrB,MAAA,CAAO;AAAA,MACN,UAAA,EAAY,CAAA,CACT,MAAA,EAAO,CACP,QAAA;AAAA,QACC;AAAA,OACF;AAAA,MACF,gBAAA,EAAkB,EACf,MAAA,CAAO;AAAA,QACN,KAAA,EAAO,CAAA,CACJ,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,oCAAoC,CAAA;AAAA,QAChD,MAAA,EAAQ,CAAA,CACL,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,MAAA,EAAQ,CAAA,CACL,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,MAAA,EAAQ,CAAA,CACL,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,qCAAqC,CAAA;AAAA,QACjD,SAAA,EAAW,CAAA,CACR,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,wCAAwC,CAAA;AAAA,QACpD,KAAA,EAAO,CAAA,CACJ,KAAA,CAAM,CAAA,CAAE,MAAA,EAAQ,CAAA,CAChB,QAAA,EAAS,CACT,QAAA,CAAS,oCAAoC;AAAA,OACjD,CAAA,CACA,QAAA,EAAS,CACT,SAAS,yCAAyC;AAAA,KACtD,CAAA,CACA,QAAA,EAAS,CACT,QAAA;AAAA,MACC;AAAA;AACF,GACH;AACL,CAAC;AAkBM,MAAM,yBAAyB,2BAAA,CAA4B;;;;"}