{"version":3,"file":"functionArgs.esm.js","sources":["../../../src/components/TemplatingExtensionsPage/functionArgs.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { JSONSchema7, JSONSchema7Definition } from 'json-schema';\n\nfunction isSchema(d: JSONSchema7Definition): d is JSONSchema7 {\n  return typeof d === 'object';\n}\n\nexport function inspectFunctionArgSchema(\n  schema: JSONSchema7Definition,\n): [schema: JSONSchema7Definition, required: boolean] {\n  const hasOnlyKey = (k: string) => (o: any) =>\n    k in o && Object.keys(o).every(ok => ok.startsWith('$') || ok === k);\n\n  if (\n    isSchema(schema) &&\n    hasOnlyKey('anyOf')(schema) &&\n    schema.anyOf?.length === 2\n  ) {\n    const alt0 = schema.anyOf[0];\n    if (isSchema(alt0) && hasOnlyKey('not')(alt0)) {\n      const not = alt0.not!;\n      if (isSchema(not) && !Object.keys(not).length) {\n        return [schema.anyOf[1], false];\n      }\n    }\n  }\n  return [schema, true];\n}\n"],"names":[],"mappings":"AAiBA,SAAS,SAAS,CAAA,EAA4C;AAC5D,EAAA,OAAO,OAAO,CAAA,KAAM,QAAA;AACtB;AAEO,SAAS,yBACd,MAAA,EACoD;AACpD,EAAA,MAAM,aAAa,CAAC,CAAA,KAAc,CAAC,CAAA,KACjC,CAAA,IAAK,KAAK,MAAA,CAAO,IAAA,CAAK,CAAC,CAAA,CAAE,MAAM,CAAA,EAAA,KAAM,EAAA,CAAG,WAAW,GAAG,CAAA,IAAK,OAAO,CAAC,CAAA;AAErE,EAAA,IACE,QAAA,CAAS,MAAM,CAAA,IACf,UAAA,CAAW,OAAO,CAAA,CAAE,MAAM,CAAA,IAC1B,MAAA,CAAO,KAAA,EAAO,MAAA,KAAW,CAAA,EACzB;AACA,IAAA,MAAM,IAAA,GAAO,MAAA,CAAO,KAAA,CAAM,CAAC,CAAA;AAC3B,IAAA,IAAI,SAAS,IAAI,CAAA,IAAK,WAAW,KAAK,CAAA,CAAE,IAAI,CAAA,EAAG;AAC7C,MAAA,MAAM,MAAM,IAAA,CAAK,GAAA;AACjB,MAAA,IAAI,QAAA,CAAS,GAAG,CAAA,IAAK,CAAC,OAAO,IAAA,CAAK,GAAG,EAAE,MAAA,EAAQ;AAC7C,QAAA,OAAO,CAAC,MAAA,CAAO,KAAA,CAAM,CAAC,GAAG,KAAK,CAAA;AAAA,MAChC;AAAA,IACF;AAAA,EACF;AACA,EAAA,OAAO,CAAC,QAAQ,IAAI,CAAA;AACtB;;;;"}