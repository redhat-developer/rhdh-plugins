{"version":3,"file":"TemplateEditorToolbarTemplatesMenu.esm.js","sources":["../../../../src/alpha/components/TemplateEditorPage/TemplateEditorToolbarTemplatesMenu.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MouseEvent, useCallback, useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport { Entity } from '@backstage/catalog-model';\nimport { useTranslationRef } from '@backstage/frontend-plugin-api';\nimport { scaffolderTranslationRef } from '../../../translation';\n\nconst ITEM_HEIGHT = 48;\n\nconst useStyles = makeStyles({\n  menu: {\n    maxHeight: ITEM_HEIGHT * 5,\n  },\n});\n\nexport type TemplateOption = {\n  label: string;\n  value: Entity;\n};\n\nexport function TemplateEditorToolbarTemplatesMenu(props: {\n  options: TemplateOption[];\n  selectedOption?: TemplateOption;\n  onSelectOption: (option: TemplateOption) => void;\n}) {\n  const { options, selectedOption, onSelectOption } = props;\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const { t } = useTranslationRef(scaffolderTranslationRef);\n\n  const isSelectedOption = useCallback(\n    (option: TemplateOption) => {\n      return !!selectedOption && selectedOption.value === option.value;\n    },\n    [selectedOption],\n  );\n\n  const handleOpenMenu = useCallback(\n    (event: MouseEvent<HTMLElement>) => {\n      setAnchorEl(event.currentTarget);\n    },\n    [setAnchorEl],\n  );\n\n  const handleCloseMenu = useCallback(() => {\n    setAnchorEl(null);\n  }, [setAnchorEl]);\n\n  const handleSelectOption = useCallback(\n    (option: TemplateOption) => {\n      handleCloseMenu();\n      onSelectOption(option);\n    },\n    [handleCloseMenu, onSelectOption],\n  );\n\n  return (\n    <>\n      <Button\n        aria-controls=\"templates-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleOpenMenu}\n      >\n        {t('templateEditorToolbarTemplatesMenu.button')}\n      </Button>\n      <Menu\n        id=\"templates-menu\"\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={handleCloseMenu}\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n        PaperProps={{\n          className: classes.menu,\n        }}\n      >\n        {options.map((option, index) => (\n          <MenuItem\n            key={index}\n            selected={isSelectedOption(option)}\n            aria-selected={isSelectedOption(option)}\n            onClick={() => handleSelectOption(option)}\n          >\n            {option.label}\n          </MenuItem>\n        ))}\n      </Menu>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;AA2BA,MAAM,WAAA,GAAc,EAAA;AAEpB,MAAM,YAAY,UAAA,CAAW;AAAA,EAC3B,IAAA,EAAM;AAAA,IACJ,WAAW,WAAA,GAAc;AAAA;AAE7B,CAAC,CAAA;AAOM,SAAS,mCAAmC,KAAA,EAIhD;AACD,EAAA,MAAM,EAAE,OAAA,EAAS,cAAA,EAAgB,cAAA,EAAe,GAAI,KAAA;AACpD,EAAA,MAAM,UAAU,SAAA,EAAU;AAC1B,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAA6B,IAAI,CAAA;AACjE,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,wBAAwB,CAAA;AAExD,EAAA,MAAM,gBAAA,GAAmB,WAAA;AAAA,IACvB,CAAC,MAAA,KAA2B;AAC1B,MAAA,OAAO,CAAC,CAAC,cAAA,IAAkB,cAAA,CAAe,UAAU,MAAA,CAAO,KAAA;AAAA,IAC7D,CAAA;AAAA,IACA,CAAC,cAAc;AAAA,GACjB;AAEA,EAAA,MAAM,cAAA,GAAiB,WAAA;AAAA,IACrB,CAAC,KAAA,KAAmC;AAClC,MAAA,WAAA,CAAY,MAAM,aAAa,CAAA;AAAA,IACjC,CAAA;AAAA,IACA,CAAC,WAAW;AAAA,GACd;AAEA,EAAA,MAAM,eAAA,GAAkB,YAAY,MAAM;AACxC,IAAA,WAAA,CAAY,IAAI,CAAA;AAAA,EAClB,CAAA,EAAG,CAAC,WAAW,CAAC,CAAA;AAEhB,EAAA,MAAM,kBAAA,GAAqB,WAAA;AAAA,IACzB,CAAC,MAAA,KAA2B;AAC1B,MAAA,eAAA,EAAgB;AAChB,MAAA,cAAA,CAAe,MAAM,CAAA;AAAA,IACvB,CAAA;AAAA,IACA,CAAC,iBAAiB,cAAc;AAAA,GAClC;AAEA,EAAA,uBACE,IAAA,CAAA,QAAA,EAAA,EACE,QAAA,EAAA;AAAA,oBAAA,GAAA;AAAA,MAAC,MAAA;AAAA,MAAA;AAAA,QACC,eAAA,EAAc,gBAAA;AAAA,QACd,eAAA,EAAc,MAAA;AAAA,QACd,OAAA,EAAS,cAAA;AAAA,QAER,YAAE,2CAA2C;AAAA;AAAA,KAChD;AAAA,oBACA,GAAA;AAAA,MAAC,IAAA;AAAA,MAAA;AAAA,QACC,EAAA,EAAG,gBAAA;AAAA,QACH,QAAA;AAAA,QACA,IAAA,EAAM,QAAQ,QAAQ,CAAA;AAAA,QACtB,OAAA,EAAS,eAAA;AAAA,QACT,kBAAA,EAAoB,IAAA;AAAA,QACpB,YAAA,EAAc;AAAA,UACZ,QAAA,EAAU,QAAA;AAAA,UACV,UAAA,EAAY;AAAA,SACd;AAAA,QACA,eAAA,EAAiB;AAAA,UACf,QAAA,EAAU,KAAA;AAAA,UACV,UAAA,EAAY;AAAA,SACd;AAAA,QACA,UAAA,EAAY;AAAA,UACV,WAAW,OAAA,CAAQ;AAAA,SACrB;AAAA,QAEC,QAAA,EAAA,OAAA,CAAQ,GAAA,CAAI,CAAC,MAAA,EAAQ,KAAA,qBACpB,GAAA;AAAA,UAAC,QAAA;AAAA,UAAA;AAAA,YAEC,QAAA,EAAU,iBAAiB,MAAM,CAAA;AAAA,YACjC,eAAA,EAAe,iBAAiB,MAAM,CAAA;AAAA,YACtC,OAAA,EAAS,MAAM,kBAAA,CAAmB,MAAM,CAAA;AAAA,YAEvC,QAAA,EAAA,MAAA,CAAO;AAAA,WAAA;AAAA,UALH;AAAA,SAOR;AAAA;AAAA;AACH,GAAA,EACF,CAAA;AAEJ;;;;"}