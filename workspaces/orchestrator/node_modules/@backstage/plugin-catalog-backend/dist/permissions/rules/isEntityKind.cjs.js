'use strict';

var alpha = require('@backstage/plugin-catalog-node/alpha');
var pluginPermissionNode = require('@backstage/plugin-permission-node');
var zod = require('zod');

const isEntityKind = pluginPermissionNode.createPermissionRule({
  name: "IS_ENTITY_KIND",
  description: "Allow entities matching a specified kind",
  resourceRef: alpha.catalogEntityPermissionResourceRef,
  paramsSchema: zod.z.object({
    kinds: zod.z.array(zod.z.string()).describe("List of kinds to match at least one of")
  }),
  apply(resource, { kinds }) {
    const resourceKind = resource.kind.toLocaleLowerCase("en-US");
    return kinds.some((kind) => kind.toLocaleLowerCase("en-US") === resourceKind);
  },
  toQuery({ kinds }) {
    return {
      key: "kind",
      values: kinds.map((kind) => kind.toLocaleLowerCase("en-US"))
    };
  }
});

exports.isEntityKind = isEntityKind;
//# sourceMappingURL=isEntityKind.cjs.js.map
