"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.compareSpecs = void 0;
const diff_1 = require("../diff/diff");
const packageJson = require('../../package.json');
const compareSpecs = async (from, to, ruleRunner, context) => {
    const adjustedFromSpec = from.isEmptySpec ? { paths: {} } : from.jsonLike;
    const adjustedToSpec = to.isEmptySpec ? { paths: {} } : to.jsonLike;
    const diffs = (0, diff_1.diff)(adjustedFromSpec, adjustedToSpec);
    const results = await ruleRunner.runRules({
        context,
        diffs,
        fromSpec: from.jsonLike,
        toSpec: to.jsonLike,
    });
    return {
        diffs,
        results,
        version: packageJson.version,
    };
};
exports.compareSpecs = compareSpecs;
//# sourceMappingURL=compare-specs.js.map